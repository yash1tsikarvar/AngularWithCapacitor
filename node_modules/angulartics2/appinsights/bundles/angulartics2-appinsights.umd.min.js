!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/router"),require("rxjs/operators/filter"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/appinsights",["exports","@angular/core","@angular/platform-browser","@angular/router","rxjs/operators/filter","angulartics2"],e):e((t.angulartics2=t.angulartics2||{},t.angulartics2.appinsights={}),t.ng.core,t.ng.platformBrowser,t.ng.router,t.Rx.Observable.prototype,t.angulartics2)}(this,function(t,e,s,n,a,r){"use strict";var o=function(){this.userId=null},i=function(){function t(t,e,s){var r=this;this.angulartics2=t,this.title=e,this.router=s,this.loadStartTime=null,this.loadTime=null,this.metrics=null,this.dimensions=null,this.measurements=null,"undefined"==typeof appInsights&&console.warn("appInsights not found");var i=new o;this.angulartics2.settings.appInsights=Object.assign({},i,this.angulartics2.settings.appInsights),this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return r.pageTrack(t.path)}),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return r.eventTrack(t.action,t.properties)}),this.angulartics2.exceptionTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(t){return r.exceptionTrack(t)}),this.angulartics2.setUsername.subscribe(function(t){return r.setUsername(t)}),this.angulartics2.setUserProperties.subscribe(function(t){return r.setUserProperties(t)}),this.router.events.pipe(this.angulartics2.filterDeveloperMode(),a.filter(function(t){return t instanceof n.NavigationStart})).subscribe(function(t){return r.startTimer()}),this.router.events.pipe(a.filter(function(t){return t instanceof n.NavigationError||t instanceof n.NavigationEnd})).subscribe(function(t){return r.stopTimer()})}return t.prototype.startTimer=function(){this.loadStartTime=Date.now(),this.loadTime=null},t.prototype.stopTimer=function(){this.loadTime=Date.now()-this.loadStartTime,this.loadStartTime=null},t.prototype.pageTrack=function(t){appInsights.trackPageView(this.title.getTitle(),t,this.dimensions,this.metrics,this.loadTime)},t.prototype.eventTrack=function(t,e){appInsights.trackEvent(t,e,this.measurements)},t.prototype.exceptionTrack=function(t){var e=t.event||t.description||t;appInsights.trackException(e)},t.prototype.setUsername=function(t){this.angulartics2.settings.appInsights.userId=t,appInsights.setAuthenticatedUserContext(t)},t.prototype.setUserProperties=function(t){t.userId&&(this.angulartics2.settings.appInsights.userId=t.userId),t.accountId?appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId,t.accountId):appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId)},t}();i.decorators=[{type:e.Injectable}],i.ctorParameters=function(){return[{type:r.Angulartics2},{type:s.Title},{type:n.Router}]},t.AppInsightsDefaults=o,t.Angulartics2AppInsights=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angulartics2-appinsights.umd.min.js.map
