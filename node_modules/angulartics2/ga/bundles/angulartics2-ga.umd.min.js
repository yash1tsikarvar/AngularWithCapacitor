!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/core"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/ga",["exports","tslib","@angular/core","angulartics2"],t):t((e.angulartics2=e.angulartics2||{},e.angulartics2.ga={}),e.tslib,e.ng.core,e.angulartics2)}(this,function(e,A,t,n){"use strict";var a=function(){this.additionalAccountNames=[],this.userId=null,this.transport="",this.anonymizeIp=!1},i=function(){function e(e){var t=this;this.angulartics2=e,this.dimensionsAndMetrics=[];var n=new a;this.angulartics2.settings.ga=Object.assign({},n,this.angulartics2.settings.ga),this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.pageTrack(e.path)}),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.eventTrack(e.action,e.properties)}),this.angulartics2.exceptionTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.exceptionTrack(e)}),this.angulartics2.setUsername.subscribe(function(e){return t.setUsername(e)}),this.angulartics2.setUserProperties.subscribe(function(e){return t.setUserProperties(e)}),this.angulartics2.userTimings.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.userTimings(e)})}return e.prototype.pageTrack=function(e){if("undefined"!=typeof _gaq&&_gaq){_gaq.push(["_trackPageview",e]);try{for(var t=A.__values(this.angulartics2.settings.ga.additionalAccountNames),n=t.next();!n.done;n=t.next()){var a=n.value;_gaq.push([a+"._trackPageview",e])}}catch(m){u={error:m}}finally{try{n&&!n.done&&(g=t["return"])&&g.call(t)}finally{if(u)throw u.error}}}if("undefined"!=typeof ga&&ga){if(this.angulartics2.settings.ga.userId){ga("set","&uid",this.angulartics2.settings.ga.userId);try{for(var i=A.__values(this.angulartics2.settings.ga.additionalAccountNames),r=i.next();!r.done;r=i.next()){a=r.value;ga(a+".set","&uid",this.angulartics2.settings.ga.userId)}}catch(b){d={error:b}}finally{try{r&&!r.done&&(f=i["return"])&&f.call(i)}finally{if(d)throw d.error}}}if(this.angulartics2.settings.ga.anonymizeIp){ga("set","anonymizeIp",!0);try{for(var s=A.__values(this.angulartics2.settings.ga.additionalAccountNames),o=s.next();!o.done;o=s.next()){a=o.value;ga(a+".set","anonymizeIp",!0)}}catch(x){p={error:x}}finally{try{o&&!o.done&&(h=s["return"])&&h.call(s)}finally{if(p)throw p.error}}}ga("send","pageview",e);try{for(var c=A.__values(this.angulartics2.settings.ga.additionalAccountNames),l=c.next();!l.done;l=c.next()){a=l.value;ga(a+".send","pageview",e)}}catch(_){y={error:_}}finally{try{l&&!l.done&&(v=c["return"])&&v.call(c)}finally{if(y)throw y.error}}}var u,g,d,f,p,h,y,v},e.prototype.eventTrack=function(e,t){if(t&&t.category||((t=t||{}).category="Event"),t.value){var n=parseInt(t.value,10);t.value=isNaN(n)?0:n}if("undefined"!=typeof ga){var a={eventCategory:t.category,eventAction:e,eventLabel:t.label,eventValue:t.value,nonInteraction:t.noninteraction,page:t.page||location.hash.substring(1)||location.pathname,userId:this.angulartics2.settings.ga.userId,hitCallback:t.hitCallback};this.setDimensionsAndMetrics(t),this.angulartics2.settings.ga.transport?ga("send","event",a,{transport:this.angulartics2.settings.ga.transport}):ga("send","event",a);try{for(var i=A.__values(this.angulartics2.settings.ga.additionalAccountNames),r=i.next();!r.done;r=i.next()){var s=r.value;ga(s+".send","event",a)}}catch(l){o={error:l}}finally{try{r&&!r.done&&(c=i["return"])&&c.call(i)}finally{if(o)throw o.error}}}else"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",t.category,e,t.label,t.value,t.noninteraction]);var o,c},e.prototype.exceptionTrack=function(e){e.fatal===undefined&&(console.log('No "fatal" provided, sending with fatal=true'),e.fatal=!0),e.exDescription=e.description;var t,n,a={exFatal:e.fatal,exDescription:e.description};ga("send","exception",a);try{for(var i=A.__values(this.angulartics2.settings.ga.additionalAccountNames),r=i.next();!r.done;r=i.next()){var s=r.value;ga(s+".send","exception",a)}}catch(o){t={error:o}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.userTimings=function(e){var t,n;if(e&&e.timingCategory&&e.timingVar&&e.timingValue){if("undefined"!=typeof ga){ga("send","timing",e);try{for(var a=A.__values(this.angulartics2.settings.ga.additionalAccountNames),i=a.next();!i.done;i=a.next()){var r=i.value;ga(r+".send","timing",e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a["return"])&&n.call(a)}finally{if(t)throw t.error}}}}else console.error("Properties timingCategory, timingVar, and timingValue are required to be set.")},e.prototype.setUsername=function(e){this.angulartics2.settings.ga.userId=e,"undefined"!=typeof ga&&ga("set","userId",e)},e.prototype.setUserProperties=function(e){this.setDimensionsAndMetrics(e)},e.prototype.setDimensionsAndMetrics=function(n){var e=this;"undefined"!=typeof ga&&(this.dimensionsAndMetrics.forEach(function(t){n.hasOwnProperty(t)||(ga("set",t,undefined),e.angulartics2.settings.ga.additionalAccountNames.forEach(function(e){ga(e+".set",t,undefined)}))}),this.dimensionsAndMetrics=[],Object.keys(n).forEach(function(t){0!==t.lastIndexOf("dimension",0)&&0!==t.lastIndexOf("metric",0)||(ga("set",t,n[t]),e.angulartics2.settings.ga.additionalAccountNames.forEach(function(e){ga(e+".set",t,n[t])}),e.dimensionsAndMetrics.push(t))}))},e}();i.decorators=[{type:t.Injectable}],i.ctorParameters=function(){return[{type:n.Angulartics2}]},e.GoogleAnalyticsDefaults=a,e.Angulartics2GoogleAnalytics=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angulartics2-ga.umd.min.js.map
