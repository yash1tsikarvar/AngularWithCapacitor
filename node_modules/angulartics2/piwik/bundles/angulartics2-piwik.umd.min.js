!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/piwik",["exports","@angular/core","angulartics2"],t):t((e.angulartics2=e.angulartics2||{},e.angulartics2.piwik={}),e.ng.core,e.angulartics2)}(this,function(e,t,r){"use strict";var a=function(){function e(e){var t=this;this.angulartics2=e,"undefined"==typeof _paq&&console.warn("Piwik not found"),this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.pageTrack(e.path)}),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe(function(e){return t.eventTrack(e.action,e.properties)}),this.angulartics2.setUsername.subscribe(function(e){return t.setUsername(e)}),this.angulartics2.setUserProperties.subscribe(function(e){return t.setUserProperties(e)})}return e.prototype.pageTrack=function(e,t){try{_paq.push(["setDocumentTitle",window.document.title]),_paq.push(["setCustomUrl",e]),_paq.push(["trackPageView"])}catch(r){if(!(r instanceof ReferenceError))throw r}},e.prototype.eventTrack=function(e,t){void 0===t&&(t={});var r=[];switch(e){case"setEcommerceView":r=["setEcommerceView",t.productSKU,t.productName,t.categoryName,t.price];break;case"addEcommerceItem":r=["addEcommerceItem",t.productSKU,t.productName,t.productCategory,t.price,t.quantity];break;case"trackEcommerceCartUpdate":r=["trackEcommerceCartUpdate",t.grandTotal];break;case"trackEcommerceOrder":r=["trackEcommerceOrder",t.orderId,t.grandTotal,t.subTotal,t.tax,t.shipping,t.discount];break;case"trackGoal":r=["trackGoal",t.goalId,t.value];break;default:if(t.value){var a=parseInt(t.value,10);t.value=isNaN(a)?0:a}r=["trackEvent",t.category,e,t.name||t.label,t.value]}try{_paq.push(r)}catch(c){if(!(c instanceof ReferenceError))throw c}},e.prototype.setUsername=function(e){try{_paq.push(["setUserId",e])}catch(t){if(!(t instanceof ReferenceError))throw t}},e.prototype.setUserProperties=function(e){var t=this.setCustomDimensions(e);try{0===t.length&&_paq.push(["setCustomVariable",e])}catch(r){if(!(r instanceof ReferenceError))throw r}},e.prototype.setCustomDimensions=function(r){var t=/dimension[1-9]\d*/,e=Object.keys(r).filter(function(e){return t.exec(e)});return e.forEach(function(e){var t=Number(e.substr(9));_paq.push(["setCustomDimension",t,r[e]])}),e},e}();a.decorators=[{type:t.Injectable}],a.ctorParameters=function(){return[{type:r.Angulartics2}]},e.Angulartics2Piwik=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angulartics2-piwik.umd.min.js.map
