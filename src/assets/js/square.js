(()=>{"use strict";var e={844:(e,t,n)=>{n.d(t,{Rf:()=>o,DM:()=>a,en:()=>s,jH:()=>c,Cf:()=>l,Db:()=>u,EG:()=>d,l4:()=>p,JY:()=>h});var r=n(422),i={};function o(){return(0,r.KV)()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}function a(){var e=o(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function c(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function l(e){var t=o();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var i=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),i}function u(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function d(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}function p(){var e=o();try{return e.document.location.href}catch(e){return""}}function h(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}},422:(e,t,n)=>{function r(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function i(e,t){return e.require(t)}n.d(t,{KV:()=>r,l$:()=>i}),e=n.hmd(e)},170:(e,t,n)=>{n.d(t,{yW:()=>c,ph:()=>l});var r=n(844),i=n(422);e=n.hmd(e);var o={nowSeconds:function(){return Date.now()/1e3}},a=(0,i.KV)()?function(){try{return(0,i.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=(0,r.Rf)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),s=void 0===a?o:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},c=o.nowSeconds.bind(o),l=s.nowSeconds.bind(s);!function(){var e=(0,r.Rf)().performance;if(e&&e.now){var t=36e5,n=e.now(),i=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,a=o<t,s=e.timing&&e.timing.navigationStart,c="number"==typeof s?Math.abs(s+n-i):t;(a||c<t)&&(o<=c&&e.timeOrigin)}}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FunctionToString:()=>Ie,InboundFilters:()=>Rt});var t={};n.r(t),n.d(t,{Breadcrumbs:()=>Pn,Dedupe:()=>Nn,GlobalHandlers:()=>Cn,LinkedErrors:()=>Tn,TryCatch:()=>On,UserAgent:()=>wn});var r=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var a,s,c,l,u,d,p,h,f,m,g={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var n=new URL(e),r={};return t.forEach((e=>{var t=n.searchParams.get(e);t&&(r[e]=t)})),r},isAndroid:function(){return r.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};function y(e){return t=e,n=f.JAVASCRIPT,r=new Blob([t],{type:n}),URL.createObjectURL(r);var t,n,r}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(a||(a={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(s||(s={})),function(e){e.FULL="FULL",e.MIN="MIN"}(c||(c={})),function(e){e.CARD="CARD"}(l||(l={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(u||(u={})),function(e){e.SUCCESS="SUCCESS"}(d||(d={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(p||(p={})),function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(h||(h={})),function(e){e.JAVASCRIPT="text/javascript",e.HTML="text/html"}(f||(f={})),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(m||(m={}));class v extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;t.length>0&&(n=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(n),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,v.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}var E,_,A,I,C=Object.defineProperty,S=Object.defineProperties,O=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,w=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))T.call(t,n)&&w(e,n,t[n]);if(P)for(var n of P(t))R.call(t,n)&&w(e,n,t[n]);return e},b=(e,t)=>S(e,O(t)),L=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{s(n.next(e))}catch(e){i(e)}},a=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);s((n=n.apply(e,t)).next())})),D=class extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,D.prototype)}},U=class extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,U.prototype)}},x=class extends Error{constructor(e,t,n){if(n){let r=document.getElementById(n);super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${n} which ${void 0!==(null==r?void 0:r.src)?"exists":"does not exist"}`)}else super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`);this.type=e,this.id=t,this.iframeID=n,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,x.prototype)}},M="channel:connected",k="channel:connecting",H="channel:close",F="channel:error";(_=E||(E={})).ACK="ack",_.OK="ok",_.ERROR="error",(I=A||(A={}))[I.BAD_REQUEST=400]="BAD_REQUEST",I[I.OK=200]="OK",I[I.NO_CONTENT=204]="NO_CONTENT",I[I.NOT_FOUND=404]="NOT_FOUND",I[I.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",I[I.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",I[I.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",I[I.UNAUTHORIZED=401]="UNAUTHORIZED";var B,j,q={get BACKOFF_FACTOR(){return 1.66},get REQUEST_DURATION_MAX_MS(){return 6e4},get REQUEST_TIMEOUT_MS(){return[1e4,2e4,3e4]},get RETRY_DELAY_MS(){return 200},STATUS_CODE:A},G=class extends Error{constructor(e,t){super(`The listener provided for event type ${e} timed out after ${t} milliseconds. If you've returned a promise, ensure it is resolving`),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,G.prototype)}},V=class extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,V.prototype)}},Y=class extends Error{constructor(e,t,n){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${n})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,Y.prototype)}},z=class extends Error{constructor(e,t){super(`Invalid JSON received (status=${t}; url=${e})`),this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,z.prototype)}},K=class extends Error{constructor(e,t,n){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${n})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,K.prototype)}},W={timeout:function(e,t){return L(this,arguments,(function*(e,t,n=new Error("Promise timeout exceeded")){let r=-1,i=new Promise(((e,i)=>{r=window.setTimeout((()=>{i(n)}),t)})),o=yield Promise.race([i,e()]);return window.clearTimeout(r),o}))}};(j=B||(B={})).POST="POST",j.GET="GET";var Q="include",Z="cors";function J(e,t){let n=function(e,t){return Math.floor(e*Math.pow(q.BACKOFF_FACTOR,t))}(q.RETRY_DELAY_MS,e-1),r=Date.now()-t,i=q.REQUEST_DURATION_MAX_MS-r,o=q.REQUEST_TIMEOUT_MS[e-1];return i<=n?i-o:n}function X(e,t){return{body:e,status:t.status,statusText:t.statusText}}function $(e){let t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);if(e)for(let n in e)e[n]&&t.set(n,e[n]);return t}function ee(e,t){return L(this,null,(function*(){if(!(e.status<q.STATUS_CODE.INTERNAL_SERVER_ERROR))return X({},e);try{let t={};return e.status!==q.STATUS_CODE.NO_CONTENT&&(t=yield e.json()),X(t,e)}catch(n){throw new z(t,e.status)}}))}function te(e,t,n){return L(this,arguments,(function*(e,t,n,r=1,i=Date.now()){let o=Date.now()-i,a=q.REQUEST_DURATION_MAX_MS-o,s=null==n?void 0:n.retryOnTimeout;void 0===s&&(s=!0);let c=Math.min((null==n?void 0:n.timeout)||q.REQUEST_TIMEOUT_MS[r-1],a),l=null;void 0!==window.AbortController&&null!==window.AbortController&&(l=new window.AbortController);let u=b(N({credentials:Q,mode:Z},t),{signal:l?l.signal:null});try{let t=yield W.timeout(window.fetch.bind(null,e,u),c,new Y(r,o,e));return yield ee(t,e)}catch(a){let c=0;if(a instanceof Y)l&&l.abort();else{if(a instanceof z)throw a;if(c=J(r,i),!s||c<=0)throw new K(r,o,e)}if(!s||r===q.REQUEST_TIMEOUT_MS.length)throw a;return new Promise((o=>{setTimeout((()=>{o(te(e,t,n,r+1,i))}),c)}))}}))}var ne,re=function(e,t){let n=$(t&&t.headers);return te(e,{body:JSON.stringify(t.body),headers:n,method:B.POST},t)};!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(ne||(ne={}));var ie={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},oe={message:"The requested resource was not found.",type:"NOT_FOUND"},ae={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},se={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},ce={message:"Request not authorized.",type:"UNAUTHORIZED"},le={message:"An unknown error has occurred",type:"UNKNOWN"};class ue extends v{constructor(e,t){var n=e;void 0!==t&&(n+=" (payment_method=".concat(t,")")),super(n),this.name="InternalError",Object.setPrototypeOf(this,ue.prototype)}}class de extends v{constructor(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){var{STATUS_CODE:t}=q;switch(e){case t.UNAUTHORIZED:return ce;case t.NOT_FOUND:return oe;case t.TOO_MANY_REQUESTS:return se;case t.INTERNAL_SERVER_ERROR:return ie;case t.SERVICE_UNAVAILABLE:return ae;default:return le}}(t);super("".concat(i.message," (message=").concat(n,"; url=").concat(e,")"),r),this.name="InternalHttpError",Object.setPrototypeOf(this,de.prototype)}}var pe=null!=="sandbox"?"sandbox":"development",he="".length>0?"-".concat(""):"",fe={get AFTERPAY_SCRIPT_URL(){switch(pe){case h.test:return y("window.AfterPay = {};");case h.production:return"https://portal.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID);default:return"https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID)}},get AFTERPAY_MESSAGING_SCRIPT_URL(){return pe===h.test?y("window.Afterpay = {};"):"https://js.afterpay.com/afterpay-1.x.js"},get AFTERPAY_CREATE_CHECKOUT(){return"".concat(this.API_URL,"/bnpl/afterpay/create-checkout")},get AFTERPAY_MERCHANT_ID(){return"b8a38183b2e5959390488e48f9b109f6a73fd53c"},get AFTERPAY_STYLES(){return"".concat(this.ASSET_URL,"/afterpay.css")},get ALIPAY_PAY_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/alipay/pay")},get ANALYTICS_PUBLIC_ENDPOINT(){return pe===h.test?y("window.Square.Analytics = {};"):"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js")},get API_HOST(){switch(pe){case h.production:return"pci-connect.squareup.com";case h.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(pe){case h.production:return"squareup.com";case h.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get APPENDED_FILE_NAME(){return he},get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT(){return"".concat(this.API_URL,"/v2/apple-pay/validate-merchant")},get ASSET_BASE_URL(){return function(e){switch(e){case h.production:return"https://web.squarecdn.com";case h.sandbox:return"https://sandbox.web.squarecdn.com";case h.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(h[pe])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){return pe===h.production?"https://api.cash.app":"https://api.cashstaging.app"},get CASH_APP_API_CUSTOMER(){return"".concat(this.CASH_APP_API,"/customer")},get CASH_APP_AUTH_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/cash-app/auth")},get CASH_APP_PAY_CLIENT_ID(){if(pe===h.production)throw new ue("Not yet implemented for production");return"CAS-CI_SQUAREWEB"},get CASH_APP_STYLES(){return"".concat(this.ASSET_URL,"/cash.css")},get CASH_APP_PAY_SCRIPT_URL(){switch(pe){case h.production:return"https://kit.cash.app/v1/pay.js";case h.test:return y("window.CashApp = {};");default:return"https://sandbox.kit.cash.app/v1/pay.js"}},get CREATE_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/link-session")},get PLAID_OAUTH_REDIRECT_URI(){return""},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return pe!==h.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe").concat(he,".html")},get GOOGLE_PAY_ENV(){return pe===h.production?p.PRODUCTION:p.TEST},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get GOOGLE_PAY_MERCHANT_ID(){return"05498866192997955200"},get GOOGLE_PAY_SCRIPT_URL(){return pe===h.test?y("window.google = {};"):"https://pay.google.com/gp/p/js/pay.js"},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe").concat(he,".html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get MASTERPASS_CALLBACK_ENDPOINT(){return"".concat(this.API_URL,"/v2/masterpass/callback")},get MASTERPASS_LIBRARY_URL(){return"".concat(this.API_URL,"/v2/masterpass/frame")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PAYMENTS_UI_STYLES(){return pe===h.test?y(""):"".concat(this.ASSET_URL,"/payments-ui.css")},get PLAID_LINK_ENV(){return pe===h.production?"production":"sandbox"},get PLAID_LINK_SCRIPT_URL(){return pe===h.test?y("window.Plaid = {};"):"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},get SENTRY_DSN(){switch(pe){case h.test:case h.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe").concat(he,".html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.31.0"},get WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/wallet-nonce")},env:pe},me=function(e,t){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},me(e,t)};function ge(e,t){function n(){this.constructor=e}me(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ye,ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)};function Ee(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _e(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ae(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_e(arguments[t]));return e}var Ie=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){ye=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return ye.apply(n,e)}},e.id="FunctionToString",e}(),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ce.apply(this,arguments)};function Se(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Oe(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Se(arguments[t]));return e}var Pe=function(){return Pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pe.apply(this,arguments)};function Te(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Re(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Te(arguments[t]));return e}function we(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return He(e,Error)}}function Ne(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function be(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function Le(e){return"[object String]"===Object.prototype.toString.call(e)}function De(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function Ue(e){return"[object Object]"===Object.prototype.toString.call(e)}function xe(e){return"undefined"!=typeof Event&&He(e,Event)}function Me(e){return"undefined"!=typeof Element&&He(e,Element)}function ke(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function He(e,t){try{return e instanceof t}catch(e){return!1}}var Fe,Be=n(170);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(Fe||(Fe={}));var je,qe,Ge=function(){function e(e){var t=this;this._state=Fe.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(Fe.RESOLVED,e)},this._reject=function(e){t._setResult(Fe.REJECTED,e)},this._setResult=function(e,n){t._state===Fe.PENDING&&(ke(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==Fe.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===Fe.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===Fe.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var i=t.length,o=[];t.forEach((function(t,a){e.resolve(t).then((function(e){o[a]=e,0==(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,i){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void i(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void i(e)}else i(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),Ve=n(844),Ye=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=Re(t._breadcrumbs),n._tags=Pe({},t._tags),n._extra=Pe({},t._extra),n._contexts=Pe({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=Re(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=Pe(Pe({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=Pe(Pe({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=Pe(Pe({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=Pe(Pe({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=Pe(Pe({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,i=this.getSpan();return(null===(e=i)||void 0===e?void 0:e.transaction)?null===(t=i)||void 0===t?void 0:t.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=Pe(Pe({},this._tags),t._tags),this._extra=Pe(Pe({},this._extra),t._extra),this._contexts=Pe(Pe({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):Ue(t)&&(t=t,this._tags=Pe(Pe({},this._tags),t.tags),this._extra=Pe(Pe({},this._extra),t.extra),this._contexts=Pe(Pe({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var r=Pe({timestamp:(0,Be.yW)()},e);return this._breadcrumbs=Re(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=Pe(Pe({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=Pe(Pe({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=Pe(Pe({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=Pe(Pe({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=Pe({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=Pe({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Re(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Re(ze(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return void 0===r&&(r=0),new Ge((function(o,a){var s=e[r];if(null===t||"function"!=typeof s)o(t);else{var c=s(Pe({},t),n);ke(c)?c.then((function(t){return i._notifyEventProcessors(e,t,n,r+1).then(o)})).then(null,a):i._notifyEventProcessors(e,c,n,r+1).then(o).then(null,a)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function ze(){var e=(0,Ve.Rf)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function Ke(e){ze().push(e)}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(je||(je={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(qe||(qe={}));var We=(0,Ve.Rf)(),Qe="Sentry Logger ",Ze=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Ve.Cf)((function(){We.console.log("")}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Ve.Cf)((function(){We.console.warn(Qe+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,Ve.Cf)((function(){We.console.error(Qe+"[Error]: "+e.join(" "))}))},e}();We.__SENTRY__=We.__SENTRY__||{};var Je=We.__SENTRY__.logger||(We.__SENTRY__.logger=new Ze),Xe=n(422),$e=function(e,t){return $e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$e(e,t)},et=function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},et.apply(this,arguments)};function tt(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(e,t){try{for(var n=e,r=[],i=0,o=0,a=" > ".length,s=void 0;n&&i++<5&&!("html"===(s=rt(n,t))||i>1&&o+r.length*a+s.length>=80);)r.push(s),o+=s.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function rt(e,t){var n,r,i,o,a,s,c,l=e,u=[];if(!l||!l.tagName)return"";u.push(l.tagName.toLowerCase());var d=(null===(n=t)||void 0===n?void 0:n.length)?t.filter((function(e){return l.getAttribute(e)})).map((function(e){return[e,l.getAttribute(e)]})):null;if(null===(r=d)||void 0===r?void 0:r.length)d.forEach((function(e){u.push("["+e[0]+'="'+e[1]+'"]')}));else if(l.id&&u.push("#"+l.id),(i=l.className)&&Le(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)u.push("."+o[c]);var p=["type","name","title","alt"];for(c=0;c<p.length;c++)a=p[c],(s=l.getAttribute(a))&&u.push("["+a+'="'+s+'"]');return u.join("")}var it=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}(),ot="<anonymous>";function at(e){try{return e&&"function"==typeof e&&e.name||ot}catch(e){return ot}}function st(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function ct(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function lt(e,t){return!!Le(e)&&(n=t,"[object RegExp]"===Object.prototype.toString.call(n)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var n}function ut(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=i}}function dt(e){if(we(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(xe(e)){var i=e,o={};o.type=i.type;try{o.target=Me(i.target)?nt(i.target):Object.prototype.toString.call(i.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=Me(i.currentTarget)?nt(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var a in"undefined"!=typeof CustomEvent&&He(e,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a]);return o}return e}function pt(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r,i=mt(e,t);return r=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?pt(e,t-1,n):i}function ht(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==n.g&&e===n.g?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":Ue(r=e)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+at(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e;var r}function ft(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new it),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=ht(e);return De(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var i=ht(t,e);if(De(i))return i;var o=dt(t),a=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=ft(s,o[s],n-1,r));return r.unmemoize(t),a}function mt(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return ft(e,n,t)})))}catch(e){return"**non-serializable**"}}function gt(e,t){void 0===t&&(t=40);var n=Object.keys(dt(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return st(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:st(i,t)}return""}function yt(e){var t,n;if(Ue(e)){var r=e,i={};try{for(var o=tt(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=yt(r[s]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(yt):e}var vt=function(){function e(e){this.errors=0,this.sid=(0,Ve.DM)(),this.duration=0,this.status=je.Ok,this.init=!0,this.ignoreDuration=!1;var t=(0,Be.ph)();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||(0,Be.ph)(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,Ve.DM)()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===je.Ok?this.update({status:je.Exited}):this.update()},e.prototype.toJSON=function(){return yt({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:yt({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),Et=function(){function e(e,t,n){void 0===t&&(t=new Ye),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=Ye.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=(0,Ve.DM)(),r=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,Pe(Pe({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=(0,Ve.DM)(),i=n;if(!n){var o=void 0;try{throw new Error(e)}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,Pe(Pe({},i),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=(0,Ve.DM)();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,Pe(Pe({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,c=o.maxBreadcrumbs,l=void 0===c?100:c;if(!(l<=0)){var u=(0,Be.yW)(),d=Pe({timestamp:u},e),p=s?(0,Ve.Cf)((function(){return s(d,t)})):d;null!==p&&r.addBreadcrumb(p,l)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=At(this);try{e(this)}finally{At(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Je.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,r,i;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(i=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===i||i.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},o=i.release,a=i.environment,s=((0,Ve.Rf)().navigator||{}).userAgent,c=new vt(Pe(Pe(Pe({release:o,environment:a},n&&{user:n.getUser()}),s&&{userAgent:s}),e));if(n){var l=n.getSession&&n.getSession();l&&l.status===je.Ok&&l.update({status:je.Exited}),this.endSession(),n.setSession(c)}return c},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,a=i.client;a&&a[e]&&(t=a)[e].apply(t,Re(n,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=_t(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);Je.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function _t(){var e=(0,Ve.Rf)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function At(e){var t=_t(),n=St(t);return Ot(t,e),n}function It(){var e=_t();return Ct(e)&&!St(e).isOlderThan(4)||Ot(e,new Et),(0,Xe.KV)()?function(e){var t,n,r;try{var i=null===(r=null===(n=null===(t=_t().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!i)return St(e);if(!Ct(i)||St(i).isOlderThan(4)){var o=St(e).getStackTop();Ot(i,new Et(o.client,Ye.clone(o.scope)))}return St(i)}catch(t){return St(e)}}(e):St(e)}function Ct(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function St(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new Et),e.__SENTRY__.hub}function Ot(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}var Pt,Tt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Rt=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){Ke((function(t){var n=It();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),o=i?i.getOptions():{},a="function"==typeof r._mergeOptions?r._mergeOptions(o):{};return"function"!=typeof r._shouldDropEvent?t:r._shouldDropEvent(t,a)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(Je.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,Ve.jH)(e)),!0):this._isIgnoredError(e,t)?(Je.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,Ve.jH)(e)),!0):this._isDeniedUrl(e,t)?(Je.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,Ve.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(Je.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,Ve.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return lt(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return lt(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return lt(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:Oe(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Oe(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Oe(this._options.ignoreErrors||[],e.ignoreErrors||[],Tt),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return Je.error("Cannot extract message for event "+(0,Ve.jH)(e)),[]}return[]},e.prototype._getLastValidUrl=function(e){var t,n;void 0===e&&(e=[]);for(var r=e.length-1;r>=0;r--){var i=e[r];if("<anonymous>"!==(null===(t=i)||void 0===t?void 0:t.filename)&&"[native code]"!==(null===(n=i)||void 0===n?void 0:n.filename))return i.filename||null}return null},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){return Je.error("Cannot extract url for event "+(0,Ve.jH)(e)),null}},e.id="InboundFilters",e}();function wt(){if(!("fetch"in(0,Ve.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function Nt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bt(){if(!wt())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(Pt||(Pt={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;default:return e.Log}}}(Pt||(Pt={}));var Lt,Dt,Ut,xt=(0,Ve.Rf)(),Mt={},kt={};function Ht(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(Mt[e.type]=Mt[e.type]||[],Mt[e.type].push(e.callback),function(e){if(!kt[e])switch(kt[e]=!0,e){case"console":"console"in xt&&["debug","info","warn","error","log","assert"].forEach((function(e){e in xt.console&&ut(xt.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Ft("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,xt.console,n)}}))}));break;case"dom":!function(){if("document"in xt){var e=Ft.bind(null,"dom"),t=qt(e,!0);xt.document.addEventListener("click",t,!1),xt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=xt[t]&&xt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ut(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var s=qt(e);a.handler=s,t.call(this,n,s,i)}a.refCount+=1}catch(e){}return t.call(this,n,r,i)}})),ut(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in xt){var e=[],t=[],n=XMLHttpRequest.prototype;ut(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,a=r[1];o.__sentry_xhr__={method:Le(r[0])?r[0].toUpperCase():r[0],url:r[1]},Le(a)&&"POST"===o.__sentry_xhr__.method&&a.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var s=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(e){}try{var n=e.indexOf(o);if(-1!==n){e.splice(n);var i=t.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(e){}Ft("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?ut(o,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(),e.apply(o,t)}})):o.addEventListener("readystatechange",s),n.apply(o,r)}})),ut(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.push(this),t.push(r),Ft("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}}();break;case"fetch":(function(){if(!wt())return!1;var e=(0,Ve.Rf)();if(Nt(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=Nt(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){Je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t})()&&ut(xt,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:Bt(t),url:jt(t)},startTimestamp:Date.now()};return Ft("fetch",et({},r)),e.apply(xt,t).then((function(e){return Ft("fetch",et(et({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw Ft("fetch",et(et({},r),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if(function(){var e=(0,Ve.Rf)(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}()){var e=xt.onpopstate;xt.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=xt.location.href,i=Lt;if(Lt=r,Ft("history",{from:i,to:r}),e)try{return e.apply(this,t)}catch(e){}},ut(xt.history,"pushState",t),ut(xt.history,"replaceState",t)}function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var i=Lt,o=String(r);Lt=o,Ft("history",{from:i,to:o})}return e.apply(this,t)}}}();break;case"error":Gt=xt.onerror,xt.onerror=function(e,t,n,r,i){return Ft("error",{column:r,error:i,line:n,msg:e,url:t}),!!Gt&&Gt.apply(this,arguments)};break;case"unhandledrejection":Vt=xt.onunhandledrejection,xt.onunhandledrejection=function(e){return Ft("unhandledrejection",e),!Vt||Vt.apply(this,arguments)};break;default:Je.warn("unknown instrumentation type:",e)}}(e.type))}function Ft(e,t){var n,r;if(e&&Mt[e])try{for(var i=tt(Mt[e]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t)}catch(t){Je.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+at(a)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Bt(e){return void 0===e&&(e=[]),"Request"in xt&&He(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function jt(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in xt&&He(e[0],Request)?e[0].url:String(e[0])}function qt(e,t){return void 0===t&&(t=!1),function(n){if(n&&Ut!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===Dt||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Ut,n))&&(e({event:n,name:r,global:t}),Ut=n),clearTimeout(Dt),Dt=xt.setTimeout((function(){Dt=void 0}),1e3)}}}var Gt=null,Vt=null,Yt="?",zt=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Kt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Wt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Qt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Zt=/\((\S*)(?::(\d+))(?::(\d+))\)/,Jt=/Minified React error #\d+;/i;function Xt(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:Jt.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=e.stacktrace.split("\n"),o=[],a=0;a<i.length;a+=2){var s=null;(t=n.exec(i[a]))?s={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=r.exec(i[a]))&&(s={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),s&&(!s.func&&s.line&&(s.func=Yt),o.push(s))}return o.length?{message:tn(e),name:e.name,stack:o}:null}(e),t)return en(t,n)}catch(e){}try{if(t=function(e){var t,n;if(!e||!e.stack)return null;for(var r,i,o,a=[],s=e.stack.split("\n"),c=0;c<s.length;++c){if(i=zt.exec(s[c])){var l=i[2]&&0===i[2].indexOf("native");i[2]&&0===i[2].indexOf("eval")&&(r=Zt.exec(i[2]))&&(i[2]=r[1],i[3]=r[2],i[4]=r[3]);var u=i[2]&&0===i[2].indexOf("address at ")?i[2].substr("address at ".length):i[2],d=i[1]||Yt;d=(t=_e($t(d,u),2))[0],o={url:u=t[1],func:d,args:l?[i[2]]:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}else if(i=Wt.exec(s[c]))o={url:i[2],func:i[1]||Yt,args:[],line:+i[3],column:i[4]?+i[4]:null};else{if(!(i=Kt.exec(s[c])))continue;i[3]&&i[3].indexOf(" > eval")>-1&&(r=Qt.exec(i[3]))?(i[1]=i[1]||"eval",i[3]=r[1],i[4]=r[2],i[5]=""):0!==c||i[5]||void 0===e.columnNumber||(a[0].column=e.columnNumber+1),u=i[3],d=i[1]||Yt,d=(n=_e($t(d,u),2))[0],o={url:u=n[1],func:d,args:i[2]?i[2].split(","):[],line:i[4]?+i[4]:null,column:i[5]?+i[5]:null}}!o.func&&o.line&&(o.func=Yt),a.push(o)}return a.length?{message:tn(e),name:e.name,stack:a}:null}(e),t)return en(t,n)}catch(e){}return{message:tn(e),name:e&&e.name,stack:[],failed:!0}}var $t=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Yt,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function en(e,t){try{return ve(ve({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function tn(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function nn(e){var t=on(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function rn(e){return{exception:{values:[nn(e)]}}}function on(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function an(e,t,n){var r,i;if(void 0===n&&(n={}),Ne(e)&&e.error)return rn(Xt(e=e.error));if(be(e)||(i=e,"[object DOMException]"===Object.prototype.toString.call(i))){var o=e,a=o.name||(be(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return r=sn(s,t,n),(0,Ve.Db)(r,s),"code"in o&&(r.tags=ve(ve({},r.tags),{"DOMException.code":""+o.code})),r}return we(e)?r=rn(Xt(e)):Ue(e)||xe(e)?(r=function(e,t,n){var r={exception:{values:[{type:xe(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+gt(e)}]},extra:{__serialized__:pt(e)}};if(t){var i=on(Xt(t).stack);r.stacktrace={frames:i}}return r}(e,t,n.rejection),(0,Ve.EG)(r,{synthetic:!0}),r):(r=sn(e,t,n),(0,Ve.Db)(r,""+e,void 0),(0,Ve.EG)(r,{synthetic:!0}),r)}function sn(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var i=on(Xt(t).stack);r.stacktrace={frames:i}}return r}function cn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ln(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(cn(arguments[t]));return e}function un(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=It();if(r&&r[e])return r[e].apply(r,ln(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function dn(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return un("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function pn(e){un("withScope",e)}var hn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}),fn=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,hn(r,n.prototype),r}return function(e,t){function n(){this.constructor=e}$e(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),mn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,gn=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,i=t.pass,o=t.port,a=t.projectId;return t.protocol+"://"+t.publicKey+(e&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},e.prototype._fromString=function(e){var t=mn.exec(e);if(!t)throw new fn("Invalid Dsn");var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],c=n[4],l=void 0===c?"":c,u="",d=n[5],p=d.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),d=p.pop()),d){var h=d.match(/^\d+/);h&&(d=h[0])}this._fromComponents({host:s,pass:a,path:u,projectId:d,port:l,protocol:r,publicKey:i})},e.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new fn("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new fn("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new fn("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new fn("Invalid Dsn: Invalid port "+this.port)},e}(),yn=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new gn(e),this.metadata=t,this._tunnel=n}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+t.toString()),e)if("dsn"!==i)if("user"===i){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e,t={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return e=t,Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}(),vn=(0,Ve.Rf)(),En=0;function _n(){return En>0}function An(){En+=1,setTimeout((function(){En-=1}))}function In(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(e){return In(e,t)}));return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw An(),pn((function(n){n.addEventProcessor((function(e){var n=ve({},e);return t.mechanism&&((0,Ve.Db)(n,void 0,void 0),(0,Ve.EG)(n,t.mechanism)),n.extra=ve(ve({},n.extra),{arguments:r}),n})),dn(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch(e){}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return e.name}})}catch(e){}return r}var Cn=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=ve({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(Je.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(Je.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(Ht({callback:function(n){var r=n.error,i=It(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(o&&!_n()&&!a){var s=i.getClient(),c=void 0===r&&Le(n.msg)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(an(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);(0,Ve.EG)(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(Ht({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var i=It(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(!o||_n()||a)return!0;var s=i.getClient(),c=De(r)?t._eventFromRejectionWithPrimitive(r):an(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});c.level=Pt.Error,(0,Ve.EG)(c,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var i,o=Ne(e)?e.message:e,a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2]);var s={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(s,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=Le(t)&&t.length>0?t:(0,Ve.l4)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}(),Sn=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],On=function(){function e(t){this.name=e.id,this._options=ve({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=(0,Ve.Rf)();this._options.setTimeout&&ut(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&ut(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&ut(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&ut(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Sn).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=In(r,{mechanism:{data:{function:at(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,In(t,{mechanism:{data:{function:"requestAnimationFrame",handler:at(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=(0,Ve.Rf)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ut(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=In(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:at(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,In(r,{mechanism:{data:{function:"addEventListener",handler:at(r),target:e},handled:!0,type:"instrument"}}),i)}})),ut(n,"removeEventListener",(function(e){return function(t,n,r){var i,o=n;try{var a=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(e){}return e.call(this,t,o,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in r&&"function"==typeof r[e]&&ut(r,e,(function(t){var n={mechanism:{data:{function:e,handler:at(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=at(t.__sentry_original__)),In(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),Pn=function(){function e(t){this.name=e.id,this._options=ve({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&It().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,Ve.jH)(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&Ht({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,Ae(t))},type:"console"}),this._options.dom&&Ht({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,Ae(t))},type:"dom"}),this._options.xhr&&Ht({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,Ae(t))},type:"xhr"}),this._options.fetch&&Ht({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,Ae(t))},type:"fetch"}),this._options.history&&Ht({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,Ae(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:Pt.fromString(e.level),message:ct(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(ct(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}It().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?nt(e.event.target,n):nt(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&It().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,o=t.body;It().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:o})}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?It().addBreadcrumb({category:"fetch",data:e.fetchData,level:Pt.Error,type:"http"},{data:e.error,input:e.args}):It().addBreadcrumb({category:"fetch",data:ve(ve({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=(0,Ve.Rf)(),n=e.from,r=e.to,i=(0,Ve.en)(t.location.href),o=(0,Ve.en)(n),a=(0,Ve.en)(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),It().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),Tn=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){Ke((function(t,n){var r=It().getIntegration(e);if(r){var i=r._handler&&r._handler.bind(r);return"function"==typeof i?i(t,n):t}return t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&He(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=Ae(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!He(e[t],Error)||n.length+1>=this._limit)return n;var r=nn(Xt(e[t]));return this._walkErrorTree(e[t],t,Ae([r],n))},e.id="LinkedErrors",e}(),Rn=(0,Ve.Rf)(),wn=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Ke((function(t){var n,r,i;if(It().getIntegration(e)){if(!Rn.navigator&&!Rn.location&&!Rn.document)return t;var o=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(r=Rn.location)||void 0===r?void 0:r.href),a=(Rn.document||{}).referrer,s=(Rn.navigator||{}).userAgent,c=ve(ve(ve({},null===(i=t.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),l=ve(ve({},o&&{url:o}),{headers:c});return ve(ve({},t),{request:l})}return t}))},e.id="UserAgent",e}(),Nn=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var r=n().getIntegration(e);if(r){try{if(r._shouldDropEvent(t,r._previousEvent))return Je.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return r._previousEvent=t}return r._previousEvent=t}return t}))},e.prototype._shouldDropEvent=function(e,t){return!(!t||!this._isSameMessageEvent(e,t)&&!this._isSameExceptionEvent(e,t))},e.prototype._isSameMessageEvent=function(e,t){var n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!this._isSameFingerprint(e,t)||!this._isSameStacktrace(e,t))},e.prototype._getFramesFromEvent=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},e.prototype._isSameStacktrace=function(e,t){var n=this._getFramesFromEvent(e),r=this._getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=n[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0},e.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},e.prototype._isSameExceptionEvent=function(e,t){var n=this._getExceptionFromEvent(t),r=this._getExceptionFromEvent(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&this._isSameFingerprint(e,t)&&this._isSameStacktrace(e,t))},e.prototype._isSameFingerprint=function(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}},e.id="Dedupe",e}(),bn={},Ln=(0,Ve.Rf)();Ln.Sentry&&Ln.Sentry.Integrations&&(bn=Ln.Sentry.Integrations);var Dn,Un=ve(ve(ve({},bn),e),t),xn="6.13.3";!function(e){e.BeforeSend="before_send",e.EventProcessor="event_processor",e.NetworkError="network_error",e.QueueOverflow="queue_overflow",e.RateLimitBackoff="ratelimit_backoff",e.SampleRate="sample_rate"}(Dn||(Dn={}));var Mn=[];function kn(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}var Hn,Fn=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new gn(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,a=De(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(a.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?Je.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):Je.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getTransport=function(){return this._getBackend().getTransport()},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){var e,t;this._isEnabled()&&!this._integrations.initialized&&(this._integrations=(e=this._options,t={},function(e){var t=e.defaultIntegrations&&Oe(e.defaultIntegrations)||[],n=e.integrations,r=Oe(kn(t));Array.isArray(n)?r=Oe(r.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),kn(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map((function(e){return e.name})),o="Debug";return-1!==i.indexOf(o)&&r.push.apply(r,Oe(r.splice(i.indexOf(o),1))),r}(e).forEach((function(e){t[e.name]=e,function(e){-1===Mn.indexOf(e.name)&&(e.setupOnce(Ke,It),Mn.push(e.name),Je.log("Integration installed: "+e.name))}(e)})),Object.defineProperty(t,"initialized",{value:!0}),t))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return Je.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i=!1,o=!1,a=t.exception&&t.exception.values;if(a){o=!0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=s.next();!c.done;c=s.next()){var l=c.value.mechanism;if(l&&!1===l.handled){i=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var u=e.status===je.Ok;(u&&0===e.errors||u&&i)&&(e.update(Ce(Ce({},i&&{status:je.Crashed}),{errors:e.errors||Number(o||i)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new Ge((function(n){var r=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,a=Ce(Ce({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:(0,Ve.DM)()),timestamp:e.timestamp||(0,Be.yW)()});this._applyClientOptions(a),this._applyIntegrationsMetadata(a);var s=t;n&&n.captureContext&&(s=Ye.clone(s).update(n.captureContext));var c=Ge.resolve(a);return s&&(c=s.applyToEvent(a,n)),c.then((function(e){return"number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=Ce(Ce(Ce(Ce(Ce({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return Ce(Ce({},e),e.data&&{data:mt(e.data,t)})}))}),e.user&&{user:mt(e.user,t)}),e.contexts&&{contexts:mt(e.contexts,t)}),e.extra&&{extra:mt(e.extra,t)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var r=this.getOptions()._experiments;return(void 0===r?{}:r).ensureNoCircularStructures?mt(n):n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=st(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=st(s.value,a));var c=e.request;c&&c.url&&(c.url=st(c.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=Oe(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){Je.error(e)}))},e.prototype._processEvent=function(e,t,n){var r,i,o=this,a=this.getOptions(),s=a.beforeSend,c=a.sampleRate,l=this.getTransport();if(!this._isEnabled())return Ge.reject(new fn("SDK not enabled, will not capture event."));var u="transaction"===e.type;return!u&&"number"==typeof c&&Math.random()>c?(null===(i=(r=l).recordLostEvent)||void 0===i||i.call(r,Dn.SampleRate,"event"),Ge.reject(new fn("Discarding event because it's not included in the random sample (sampling rate = "+c+")"))):this._prepareEvent(e,n,t).then((function(n){var r,i;if(null===n)throw null===(i=(r=l).recordLostEvent)||void 0===i||i.call(r,Dn.EventProcessor,e.type||"event"),new fn("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||u||!s)return n;var a=s(n,t);return o._ensureBeforeSendRv(a)})).then((function(t){var r,i;if(null===t)throw null===(i=(r=l).recordLostEvent)||void 0===i||i.call(r,Dn.BeforeSend,e.type||"event"),new fn("`beforeSend` returned `null`, will not send event.");var a=n&&n.getSession&&n.getSession();return!u&&a&&o._updateSessionFromEvent(a,t),o._sendEvent(t),t})).then(null,(function(e){if(e instanceof fn)throw e;throw o.captureException(e,{data:{__sentry__:!0},originalException:e}),new fn("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(ke(e))return e.then((function(e){if(!Ue(e)&&null!==e)throw new fn(t);return e}),(function(e){throw new fn("beforeSend rejected with "+e)}));if(!Ue(e)&&null!==e)throw new fn(t);return e},e}();!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(Hn||(Hn={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(Hn||(Hn={}));var Bn=function(){function e(){}return e.prototype.sendEvent=function(e){return Ge.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Hn.Skipped})},e.prototype.close=function(e){return Ge.resolve(!0)},e}(),jn=function(){function e(e){this._options=e,this._options.dsn||Je.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new fn("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new fn("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){Je.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){Je.error("Error while sending session: "+e)})):Je.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new Bn},e}();function qn(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function Gn(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=Oe(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=Oe(e.sdk.packages||[],t.packages||[]),e):e}function Vn(e,t){var n=qn(t),r="aggregates"in e?"sessions":"session";return{body:JSON.stringify(Ce(Ce({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(e),type:r,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function Yn(e,t){var n=qn(t),r=e.type||"event",i="transaction"===r||t.forceEnvelope(),o=e.debug_meta||{},a=o.transactionSampling,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(o,["transactionSampling"]),c=a||{},l=c.method,u=c.rate;0===Object.keys(s).length?delete e.debug_meta:e.debug_meta=s;var d={body:JSON.stringify(n?Gn(e,t.metadata.sdk):e),type:r,url:i?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(i){var p=JSON.stringify(Ce(Ce({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:l,rate:u}]})+"\n"+d.body;d.body=p}return d}var zn,Kn=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;if(!this.isReady())return Ge.reject(new fn("Not adding Promise due to buffer limit reached."));var n=e();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))})),n},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new Ge((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);Ge.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}(),Wn=(0,Ve.Rf)();function Qn(){var e,t;if(zn)return zn;if(Nt(Wn.fetch))return zn=Wn.fetch.bind(Wn);var n=Wn.document,r=Wn.fetch;if("function"==typeof(null===(e=n)||void 0===e?void 0:e.createElement))try{var i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i),(null===(t=i.contentWindow)||void 0===t?void 0:t.fetch)&&(r=i.contentWindow.fetch),n.head.removeChild(i)}catch(e){Je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return zn=r.bind(Wn)}var Zn={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Jn=(0,Ve.Rf)(),Xn=function(){function e(e){var t=this;this.options=e,this._buffer=new Kn(30),this._rateLimits={},this._outcomes={},this._api=new yn(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&Jn.document&&Jn.document.addEventListener("visibilitychange",(function(){"hidden"===Jn.document.visibilityState&&t._flushOutcomes()}))}return e.prototype.sendEvent=function(e){throw new fn("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var r=Zn[t]+":"+e;Je.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},e.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){Je.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),n=JSON.stringify({})+"\n"+JSON.stringify({type:"client_report"})+"\n"+JSON.stringify({timestamp:(0,Be.yW)(),discarded_events:Object.keys(e).map((function(t){var n=_e(t.split(":"),2),r=n[0];return{reason:n[1],category:r,quantity:e[t]}}))});try{!function(e,t){if("[object Navigator]"===Object.prototype.toString.call(Wn&&Wn.navigator)&&"function"==typeof Wn.navigator.sendBeacon)return Wn.navigator.sendBeacon.bind(Wn.navigator)(e,t);wt()&&Qn()(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}).then(null,(function(e){console.error(e)}))}(t,n)}catch(e){Je.error(e)}}else Je.log("No outcomes to flush")}},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,o=e.reject,a=Hn.fromHttpCode(n.status);this._handleRateLimit(r)&&Je.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),a!==Hn.Success?o(n):i({status:a})},e.prototype._disabledUntil=function(e){var t=Zn[e];return this._rateLimits[t]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,i,o=Date.now(),a=e["x-sentry-rate-limits"],s=e["retry-after"];if(a){try{for(var c=Ee(a.trim().split(",")),l=c.next();!l.done;l=c.next()){var u=l.value.split(":",2),d=parseInt(u[0],10),p=1e3*(isNaN(d)?60:d);try{for(var h=(r=void 0,Ee(u[1].split(";"))),f=h.next();!f.done;f=h.next()){var m=f.value;this._rateLimits[m||"all"]=new Date(o+p)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!s&&(this._rateLimits.all=new Date(o+(0,Ve.JY)(o,s)),!0)},e}(),$n=function(e){function t(t,n){void 0===n&&(n=Qn());var r=e.call(this,t)||this;return r._fetch=n,r}return ge(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(Yn(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(Vn(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return this.recordLostEvent(Dn.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:bt()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new Ge((function(t,i){n._fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)}))})).then(void 0,(function(t){throw t instanceof fn?n.recordLostEvent(Dn.QueueOverflow,e.type):n.recordLostEvent(Dn.NetworkError,e.type),t}))},t}(Xn),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(Yn(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(Vn(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?(this.recordLostEvent(Dn.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new Ge((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)}))})).then(void 0,(function(t){throw t instanceof fn?n.recordLostEvent(Dn.QueueOverflow,e.type):n.recordLostEvent(Dn.NetworkError,e.type),t}))},t}(Xn),tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,n){var r=an(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return(0,Ve.EG)(r,{handled:!0,type:"generic"}),r.level=Pt.Error,n&&n.event_id&&(r.event_id=n.event_id),Ge.resolve(r)}(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=Pt.Info),function(e,t,n,r){void 0===n&&(n=Pt.Info);var i=sn(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Ge.resolve(i)}(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=ve(ve({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):wt()?new $n(t):new er(t)},t}(jn),nr=function(e){function t(t){return void 0===t&&(t={}),t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:xn}],version:xn},e.call(this,tr,t)||this}return ge(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),(0,Ve.Rf)().document&&(this._isEnabled()?function(e){if(void 0===e&&(e={}),vn.document)if(e.eventId)if(e.dsn){var t=vn.document.createElement("script");t.async=!0,t.src=new yn(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad);var n=vn.document.head||vn.document.body;n&&n.appendChild(t)}else Je.error("Missing dsn option in showReportDialog call");else Je.error("Missing eventId option in showReportDialog call")}(ve(ve({},e),{dsn:e.dsn||this.getDsn()})):Je.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(Pn);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(Fn);class rr extends v{constructor(){super("Web Payments SDK is not enabled for this application"),this.name="WebSdkDisabledError",Object.setPrototypeOf(this,rr.prototype)}}class ir extends v{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,ir.prototype)}}class or extends v{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,or.prototype)}}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.entries(t).map((e=>{var[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))})).join("&");return encodeURI(e)+(n.length>0?"?".concat(n):"")}function sr(e){return e.hostname.endsWith("localhost")||"https:"===e.protocol}var cr=new RegExp(/^[\w.-]+$/i),lr=new RegExp(/sq0at/i);function ur(e){return fe.env===e}function dr(){return ur(h.production)}function pr(e){if(!function(e){return!(e.length<22||e.length>37)&&cr.test(e)&&!lr.test(e)}(e))throw new ir;var t=e.match(/^[\w-]{22}$/),n=e.startsWith("sq0idp-"),r=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||n||r||i))throw new ir;if(n&&!dr())throw new or(h.production,fe.env);if(r&&!ur(h.sandbox))throw new or(h.sandbox,fe.env)}var hr=mr(60),fr=gr(60);function mr(e){return 1e3*e}function gr(e){return e*hr}var yr={hoursToMs:function(e){return e*fr},minutesToMs:gr,msToSeconds:function(e){return e/1e3},secondsToMs:mr},vr=/^_/g,Er=/(?!^)([A-Z])/g,_r=/[\s_]+(?=[A-Za-z])/g,Ar=new Set(["BIF","DJF","GNF","JPY","KMF","KRW","PYG","RWF","UGX","UYI","VND","VUV","XAF","XOF","XPF"]),Ir=new Set(["JOD","KWD","LYD","OMR","TND"]);function Cr(e){var t=e.toUpperCase();return Ar.has(t)?0:Ir.has(t)?3:2}var Sr={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(vr,"-").replace(Er," $1").replace(_r,"-").toLowerCase()},delay:function(e){return new Promise((t=>setTimeout(t,e)))},formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},fromEntries:function(e){return e.reduce(((e,t)=>{var[n,r]=t;return Object.assign({},e,{[n]:r})}),{})},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isStaging:function(){return ur(h.staging)},isProduction:dr,isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:ar,versionedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ar(e,t)},paymentRequestAmountToMoneyAmount:function(e,t){var n=Math.pow(10,Cr(t));return Math.trunc(Math.round(Number(e)*n))},moneyAmountToPaymentRequestAmount:function(e,t){var n=Cr(t);return(e/Math.pow(10,n)).toFixed(n)},moneyAmountToInternationalizedCurrency:function(e,t,n){var r=Cr(t),i=e/Math.pow(10,r);return new Intl.NumberFormat(n,{currency:t,style:"currency"}).format(i)}},Or=Sr;class Pr extends v{constructor(e,t,n){if(n){var r=document.getElementById(n);super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(t," from iframe id=").concat(n," which ").concat(void 0!==(null==r?void 0:r.src)?"exists":"does not exist"))}else super("Messenger has not received an acknowledgement of message ".concat(e," with id ").concat(t,", no iframeID was set"));this.name="InternalMessengerTimeoutError",Object.setPrototypeOf(this,Pr.prototype)}}function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nr,br,Lr=fe.SENTRY_DSN;class Dr{constructor(e){var t,n={beforeSend:(t,n)=>{if(!e.enableErrorLogging)return console.error(t.exception),null;if(!n)return t;var r=n.originalException;return r instanceof v?Rr(Rr({},t),{},{fingerprint:[r.name]}):t},dsn:Lr,environment:e.environment,release:"web-payments-sdk@".concat(fe.VERSION),transport:e.transport};t=e.useGlobalHandlers?new Un.GlobalHandlers:new Un.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new Rt,new Ie,new Un.TryCatch,new Un.Breadcrumbs,t,new Un.LinkedErrors,new Un.UserAgent];n.integrations=r;var i=new nr(n);this.hub=new Et(i),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",e.version),e.sessionId&&t.setTag("sessionId",e.sessionId)})),e.useGlobalHandlers&&At(this.hub)}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e,t,n,r){Or.isInstanceOf(e,[K,Y,Pr])||this.hub.withScope((i=>{n&&i.setTag("sessionId",n),t&&i.setTag("instanceId",t),r&&Object.entries(r).forEach((e=>{var[t,n]=e;i.setTag(t,n)})),this.hub.captureException(e)}))}wrap(e){if(Object.prototype.hasOwnProperty.call(e,"__inner__"))return e;var t=this.captureException.bind(this);function n(n){try{for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(n,i)}catch(e){throw t(e),e}}return n.__inner__=e,n}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(Nr||(Nr={})),function(e){e.UNKNOWN="UNKNOWN"}(br||(br={}));var Ur,xr={[br.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Ur||(Ur={}));var Mr,kr,Hr,Fr,Br,jr,qr,Gr,Vr,Yr,zr,Kr,Wr,Qr,Zr,Jr,Xr,$r,ei,ti,ni,ri,ii,oi,ai,si={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},ci={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Mr||(Mr={}));class li extends v{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,li.prototype)}}class ui extends v{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,ui.prototype)}}class di extends v{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,di.prototype)}}class pi extends v{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,pi.prototype)}}class hi extends v{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,hi.prototype)}}class fi extends v{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,fi.prototype)}}class mi extends v{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,mi.prototype)}}class gi extends v{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,gi.prototype)}}class yi extends v{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,n]=e;return'expected property: "'.concat(t,'" of type "').concat(n,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,yi.prototype)}}class vi extends v{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,n]=e;return'expected property: "'.concat(t,'" of type "').concat(n,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,vi.prototype)}}class Ei extends v{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,Ei.prototype)}}class _i extends v{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,_i.prototype)}}class Ai extends v{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,Ai.prototype)}}class Ii extends v{constructor(){super("Something went wrong and Plaid was not properly initialized"),this.name="PlaidUninitializedError",Object.setPrototypeOf(this,Ii.prototype)}}class Ci extends v{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,Ci.prototype)}}(oi=kr||(kr={})).FOCUS_CLASS_ADDED="focusClassAdded",oi.FOCUS_CLASS_REMOVED="focusClassRemoved",oi.ERROR_CLASS_ADDED="errorClassAdded",oi.ERROR_CLASS_REMOVED="errorClassRemoved",oi.CARD_BRAND_CHANGED="cardBrandChanged",oi.POSTAL_CODE_CHANGED="postalCodeChanged",oi.ESCAPE="escape",oi.SUBMIT="submit",(ii=Hr||(Hr={})).CARD_NUMBER="cardNumber",ii.CVV="cvv",ii.EXPIRATION_DATE="expirationDate",ii.POSTAL_CODE="postalCode",(ri=Fr||(Fr={})).CARD_INPUT="input",ri.CARD_INPUT_FOCUS="input.is-focus",ri.CARD_INPUT_PLACEHOLDER="input::placeholder",ri.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",ri.CARD_INPUT_ERROR="input.is-error",ri.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",ri.CARD_COMPONENT=".input-container",ri.CARD_COMPONENT_FOCUS=".input-container.is-focus",ri.CARD_COMPONENT_ERROR=".input-container.is-error",ri.CARD_INPUT_HELPER_TEXT=".message-text",ri.CARD_INPUT_HELPER_ICON=".message-icon",ri.CARD_INPUT_ERROR_TEXT=".message-text.is-error",ri.CARD_INPUT_ERROR_ICON=".message-icon.is-error",(Br||(Br={})).GIFT_CARD_NUMBER="giftCardNumber",(ni=jr||(jr={})).FOCUS_CLASS_ADDED="focusClassAdded",ni.FOCUS_CLASS_REMOVED="focusClassRemoved",ni.ERROR_CLASS_ADDED="errorClassAdded",ni.ERROR_CLASS_REMOVED="errorClassRemoved",ni.CARD_BRAND_CHANGED="cardBrandChanged",ni.ESCAPE="escape",ni.SUBMIT="submit",function(e){e.UNKNOWN="Unknown"}(qr||(qr={})),function(e){e.GIFT="Gift"}(Gr||(Gr={}));class Si extends v{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(Hr),...Object.values(Br)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,Si.prototype)}}class Oi extends v{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,Oi.prototype)}}class Pi extends v{constructor(e,t,n){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(n?" ".concat(n,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,Pi.prototype)}}class Ti extends v{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Ti.prototype)}}class Ri extends v{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,Ri.prototype)}}class wi extends v{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,wi.prototype)}}class Ni extends v{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before a payment method can be tokenized")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Ni.prototype)}}class bi extends v{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,bi.prototype)}}class Li extends v{constructor(e,t){var n=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(n," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Li.prototype)}}class Di extends v{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Di.prototype)}}class Ui extends v{constructor(e,t){var n=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(n?" (field=".concat(n,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,Ui.prototype)}}class xi extends v{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,xi.prototype)}}class Mi extends v{constructor(e,t){super("".concat(e," is undefined after loading script ").concat(t,")")),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Mi.prototype)}}class ki extends v{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,ki.prototype)}}class Hi extends v{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Hi.prototype)}}class Fi extends v{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Fi.prototype)}}class Bi extends v{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Bi.prototype)}}class ji extends v{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,ji.prototype)}}class qi extends v{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,qi.prototype)}}(ai=Vr||(Vr={})).APPLE_PAY="Apple Pay",ai.AFTERPAY_CLEARPAY="AfterpayClearpay",ai.CARD="Card",ai.CASH_APP="Cash App",ai.GOOGLE_PAY="Google Pay",ai.GIFT_CARD="Gift Card",ai.ACH="ACH",function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(Yr||(Yr={}));class Gi{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(zr||(zr={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(Kr||(Kr={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Wr||(Wr={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Qr||(Qr={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(Zr||(Zr={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Jr||(Jr={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(Xr||(Xr={})),function(e){e.MINT="mint",e.WHITE="white"}($r||($r={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(ei||(ei={})),function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(ti||(ti={}));var Vi,Yi,zi,Ki,Wi,Qi,Zi,Ji,Xi,$i,eo=["borderColor","borderRadius","borderWidth"],to=["borderColor","borderWidth"],no=["color"],ro=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Vi||(Vi={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(Yi||(Yi={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(zi||(zi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(Ki||(Ki={})),function(e){e.STATIC="static",e.FILL="fill"}(Wi||(Wi={})),function(e){e.LONG="long",e.SHORT="short"}(Qi||(Qi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Zi||(Zi={})),function(e){e.LIGHT="light",e.DARK="dark"}(Ji||(Ji={})),function(e){e.SQUARED="Squared",e.SEMIROUNDED="Semirounded",e.ROUNDED="Rounded"}(Xi||(Xi={})),function(e){e.GBP="GBP",e.USD="USD"}($i||($i={}));class io extends v{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,io.prototype)}}function oo(){return new ji([ci.UNKNOWN])}class ao extends v{constructor(e,t,n){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(n,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,ao.prototype)}}class so extends v{constructor(e,t){super("Invalid JSON received (status=".concat(t,"; url=").concat(e,")")),this.name="InternalInvalidJsonError",Object.setPrototypeOf(this,so.prototype)}}class co extends v{constructor(e,t,n){super("Network error during request (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(n,")")),this.name="InternalNetworkError",Object.setPrototypeOf(this,co.prototype)}}function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var po,ho,fo,mo,go,yo,vo,Eo,_o,Ao,Io,Co,So=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({AfterpayAmountOutsideLimitsError:pi,AfterpayInvalidPaymentRequestError:mi,AfterpayMerchantError:fi,AfterpayRequestError:di,AfterpayOnTokenizeListenerError:li,AfterpayUnsupportedCurrencyError:hi,BrowserNotSupportedError:Ti,ElementNotFoundError:gi,InvalidApplicationIdError:ir,InvalidEventListenerCallbackError:Ei,InvalidInputStylePropertyError:ki,InvalidInputStyleValueError:Hi,InvalidOptionError:_i,InvalidPaymentRequestError:yi,InvalidPaymentRequestUpdateError:vi,InvalidStylesError:Bi,PaymentMethodAlreadyAttachedError:wi,PaymentMethodAlreadyDestroyedError:bi,PaymentMethodMissingListener:ui,PaymentMethodNotAttachedError:Ni,PaymentMethodUnsupportedError:Ui,PlaidMissingNameError:Ai,PlaidUninitializedError:Ii,ScriptLoaderError:Mi,SqError:v,TokenizationError:ji,UnexpectedError:qi,VerifyBuyerError:Ci,WebSdkDisabledError:rr,WebSdkEmbedError:Ri},{InternalError:ue,InternalHttpError:de,InternalInvalidJsonError:so,InternalMessengerTimeoutError:Pr,InternalNetworkError:co,InternalTimeoutError:ao,InternalValidationError:io}),Oo={AfterpayAmountOutsideLimitsError:pi,AfterpayMerchantError:fi,AfterpayRequestError:di,AfterpayUnsupportedCurrencyError:hi,BrowserNotSupportedError:Ti,ElementNotFoundError:gi,InvalidElementTypeError:Li,InvalidEventListenerCallbackError:Ei,InvalidOptionError:_i,InvalidPaymentRequestError:yi,InvalidPaymentRequestUpdateError:vi,PaymentMethodUnsupportedError:Ui,PlaidMissingNameError:Ai,PlaidUninitializedError:Ii,ScriptLoaderError:Mi,TokenizationError:ji,UnexpectedError:qi,VerifyBuyerError:Ci,WebSdkEmbedError:Ri};(Co=po||(po={})).AlipayPayStart="ALIPAY_PAY:START",Co.AlipayPayOK="ALIPAY_PAY:OK",Co.AlipayPayError="ALIPAY_PAY:ERROR",Co.AttachStart="ATTACH:START",Co.AttachOK="ATTACH:OK",Co.AttachError="ATTACH:ERROR",Co.BuildStart="BUILD:START",Co.BuildOK="BUILD:OK",Co.BuildError="BUILD:ERROR",Co.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",Co.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",Co.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",Co.CashAppAuthStart="CASH_APP_AUTH:START",Co.CashAppAuthOK="CASH_APP_AUTH:OK",Co.CashAppAuthError="CASH_APP_AUTH:ERROR",Co.FirstInteraction="FIRST_INTERACTION:OK",Co.PaymentsUILoadFirstScreenStart="LOAD_FIRST_SCREEN:START",Co.PaymentsUILoadFirstScreenOK="LOAD_FIRST_SCREEN:OK",Co.PaymentsUITransitionToStart="TRANSITION_TO:START",Co.PaymentsUITransitionToOK="TRANSITION_TO:OK",Co.PaymentsUITransitionBackStart="TRANSITION_BACK:START",Co.PaymentsUITransitionBackOK="TRANSITION_BACK:OK",Co.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",Co.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",Co.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",Co.InitializeStart="INITIALIZATION:START",Co.InitializeOK="INITIALIZATION:OK",Co.InitializeError="INITIALIZATION:ERROR",Co.LoadOK="LOAD:OK",Co.MainIframeOK="MAIN_IFRAME:OK",Co.NonceStart="NONCE:START",Co.NonceOK="NONCE:OK",Co.NonceError="NONCE:ERROR",Co.VerificationStart="VERIFICATION:START",Co.VerificationOK="VERIFICATION:OK",Co.VerificationError="VERIFICATION:ERROR",Co.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS",(Io=ho||(ho={})).ExternalSessionStart="EXTERNAL_SESSION:START",Io.ExternalSessionOK="EXTERNAL_SESSION:OK",Io.ExternalSessionError="EXTERNAL_SESSION:ERROR",Io.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",Io.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",Io.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",Io.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",Io.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",Io.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR",function(e){e.Clear="CLEAR",e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.PaymentsUIConfigured="PAYMENTS_UI_CONFIGURED",e.Destroyed="DESTROYED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE",e.SetError="SET_ERROR"}(fo||(fo={})),function(e){e.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR"}(mo||(mo={})),(go||(go={})).ExperimentInteraction="EXPERIMENT_INTERACTION",function(e){e.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",e.CASH_APP_AUTH="CASH_APP_AUTH",e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(yo||(yo={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(vo||(vo={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(Eo||(Eo={})),(Ao=_o||(_o={})).Ach="ACH",Ao.Afterpay="Afterpay",Ao.Alipay="Alipay",Ao.App="WebSDK",Ao.ApplePay="Apple Pay",Ao.Card="Card",Ao.CashApp="Cash App",Ao.CashAppPayV1="Cash App Pay V1",Ao.GooglePay="Google Pay",Ao.Masterpass="Masterpass",Ao.GiftCard="Gift Card",Ao.Fields="Fields",Ao.PaymentRequest="Payment Request",Ao.PaymentsUI="Payments UI";var Po,To={CARD_NONCE_ENDPOINT:new RegExp(fe.CARD_NONCE_ENDPOINT),CASH_APP_API_CUSTOMER:new RegExp(fe.CASH_APP_API_CUSTOMER),CASH_APP_AUTH_ENDPOINT:new RegExp(fe.CASH_APP_AUTH_ENDPOINT),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(fe.GET_PRODUCT_INFORMATION_ENDPOINT),LIBRARY_RESOURCE:new RegExp("".concat(fe.ASSET_BASE_URL,"/([\\w\\d.-]*/)?square").concat(fe.APPENDED_FILE_NAME,"\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(fe.ASSET_URL,"/main-iframe").concat(fe.APPENDED_FILE_NAME))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(Po||(Po={}));var Ro,wo,No,bo,Lo,Do,Uo,xo,Mo,ko=new Set(Object.values(fo)),Ho=new Set([po.InitializeOK,go.ExperimentInteraction,mo.IframeMessengerTimeoutError]),Fo={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function Bo(){if(g.windowLocation===g.windowParentLocation)return g.windowLocation;var e=g.documentReferrer;return e&&0!==e.length?(Ro||(Ro=document.createElement("a")),Ro.href="".concat(e),{hash:Ro.hash,host:Ro.host,hostname:Ro.hostname,href:Ro.href,origin:Ro.origin,pathname:Ro.pathname,port:Ro.port,protocol:Ro.protocol,search:Ro.search,toString(){return this.href}}):Fo}function jo(e,t){var n={};return Object.keys(e).forEach((r=>{"object"==typeof e[r]&&!Array.isArray(e[r])&&t[r]?n[r]=jo(e[r],t[r]):n[r]=t[r]||e[r]})),n}!function(e){e.ROUND="round",e.SEMIROUND="semiround"}(wo||(wo={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(No||(No={})),function(e){e.DARK="dark",e.LIGHT="light"}(bo||(bo={})),function(e){e.FULL="full",e.STATIC="static"}(Lo||(Lo={})),(Mo=Do||(Do={})).CA="CA",Mo.GB="GB",Mo.US="US",function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(Uo||(Uo={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(xo||(xo={}));var qo={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Go={en:xo.enUS,es:xo.esES,fr:xo.frFR,ja:xo.jaJP},Vo=Go[Uo.en];class Yo{constructor(e){this.currentLocale=Vo,this.currentTranslations=qo[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),n=this.getRegionFromLocale(e),r=this.currentLocale;if(qo[e])this.currentLocale=e;else{if(!Uo[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(n," are both unsupported."),newLocale:this.currentLocale,previousLocale:r};this.currentLocale=Go[t]}this.currentTranslations=qo[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return n&&i&&n.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(n," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:r}:{newLocale:this.currentLocale,previousLocale:r}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?jo(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var zo="INVALID_VALUE",Ko="SANITIZED",Wo=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Qo=new Set(["includeInputLabels","postalCode","style"]),Zo=new Set(["includeInputLabels","style"]),Jo=new Set(["lineItems","total","shippingOptions","shippingContact"]),Xo=new Set(["buttonColor","buttonSizeMode","buttonType"]),$o=new Set(["paymentRequestOptions","enableMethods","disableMethods","redirectURI","transactionId"]),ea=new Set(["redirectURI","transactionId"]),ta=new Set(["shape","size","values","width"]),na=ya(ti),ra=ya(kr),ia=ya(jr),oa=ya(Yr),aa=ya(Hr),sa=ya(Br),ca=ya(xo),la=ya(Ki),ua=ya(Wi),da=ya(Qi),pa=ya($i),ha=ya(No),fa=ya(wo),ma=ya(bo),ga=ya(Lo);function ya(e){return new Set(Object.values(e))}function va(e){return JSON.stringify({value:e})}function Ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,a]=e;if(t.has(o)){var s=a;n.has(o)?s=Ko:r[o]&&(s=r[o].has(a)?a:zo),i[o]=s}})),JSON.stringify(i)}function _a(e){return Ea(e,$o,ea)}function Aa(e){return Ea(e,ta,void 0,{shape:fa,size:ha,values:ma,width:ga})}var Ia=function(e,t,n){switch(e){case fo.Configured:case fo.ConfigUpdated:return function(e,t){switch(e){case _o.Card:case _o.GiftCard:return function(e,t){return Ea(t,e===_o.Card?Qo:Zo)}(e,t);case _o.GooglePay:return function(e){return Ea(e,Xo,void 0,{buttonColor:la,buttonSizeMode:ua,buttonType:da})}(t);case _o.PaymentRequest:return function(e){return Ea(e,Wo,Jo,{currencyCode:pa})}(t);case _o.PaymentsUI:return _a(t);case _o.CashAppPayV1:return Aa(t)}return zo}(t,n);case fo.PaymentsUIConfigured:return _a(n);case fo.Focused:return va(function(e,t){if("string"!=typeof t)return zo;switch(e){case _o.Card:if(aa.has(t))return t;break;case _o.GiftCard:if(sa.has(t))return t}return zo}(t,n));case fo.SetLocale:return va(function(e){return"string"!=typeof e?zo:ca.has(e)?e:zo}(n));case fo.EventListenerAdded:return va(function(e,t){if("string"!=typeof t)return zo;switch(e){case _o.Ach:if(na.has(t))return t;break;case _o.Card:if(ra.has(t))return t;break;case _o.GiftCard:if(ia.has(t))return t;break;case _o.PaymentRequest:if(oa.has(t))return t}return zo}(t,n));case fo.Destroyed:case fo.RecalculatedSize:default:return""}};function Ca(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function Sa(e,t){return Boolean(e.querySelector(t))}function Oa(e,t){return void 0!==e[t]}var Pa=function(e){var t,n=Oa(e,"angular"),r=Sa(e.document,"[ng-version]")||Oa(e,"getAllAngularRootElements")||Oa(e,"getAngularVersion"),i=Oa(e,"bootstrap"),o=Oa(e,"Ember"),a=Oa(e,"jQuery"),s=Sa(e.document,'form[action*="paypal.com"]'),c=function(e){return Ca(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=Sa(e.document,"*[data-reactroot]");if(t)return t;return Ca(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=Oa(e,"__NUXT__")||Oa(e,"$nuxt"),n=Oa(e,"__VUE__");if(n||t)return n||t;return Ca(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:r,angularJS:n,bootstrap:i,ember:o,jquery:a,nextJS:Oa(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:s,preact:c,react:l,vue:u};return Or.fromEntries(Object.entries(d).filter((e=>{var[t,n]=e;return!0===n})))};function Ta(e,t){var n=g.windowPerformance;if(!n||"function"!=typeof n.getEntriesByType)return null;var r=function(e,t,n){var r=e.filter((e=>e.initiatorType===t&&n.test(e.name)));return r[r.length-1]}([...n.getEntriesByType("resource"),...n.getEntriesByType("navigation")],e,t);return r?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(r)):null}var Ra=function(e){switch(e){case yo.CASH_APP_AUTH:return Ta(Po.fetch,To.CASH_APP_AUTH_ENDPOINT);case yo.CASH_APP_API_CUSTOMER:return Ta(Po.fetch,To.CASH_APP_API_CUSTOMER);case yo.GET_PRODUCT_INFORMATION:return Ta(Po.fetch,To.GET_PRODUCT_INFORMATION_ENDPOINT);case yo.MAIN_IFRAME:return Ta(Po.navigation,To.MAIN_IFRAME_RESOURCE);case yo.LOAD:return Ta(Po.script,To.LIBRARY_RESOURCE);case yo.NONCE:return Ta(Po.fetch,To.CARD_NONCE_ENDPOINT);default:return null}};function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){ba(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var La,Da=fe.METRICS_URL,Ua=fe.METRICS_V2_URL;class xa{constructor(e,t){this.sdkVersion=fe.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,t,n,r,i){try{var o={origin:Bo().origin},a={innerHeight:g.windowInnerHeight,innerWidth:g.windowInnerWidth,language:g.windowNavigationLanguage},s=this.eventDuration(e,r),{event:c,eventSource:l,eventConfigurationValues:u,internalConfigurationValues:d}=e,p=this.sdkVersion,h=this.metricsSession(t,n,i),f={appLocation:o,avt:this.avt,browserData:a,event:c,eventSource:l,paymentMethodTrackingId:r,sdkVersion:p,session:h};void 0!==u&&(y=c,ko.has(y))&&(f.eventConfigurationValues=Ia(c,l,u)),void 0!==d&&function(e){return Ho.has(e)}(c)&&(f.internalConfigurationValues=JSON.stringify(d)),s&&(f.duration=s),c===po.InitializeOK&&(f.jsFramework=this.getJSFrameworkValue());var m=!1;c!==po.NonceOK&&c!==fo.Destroyed||(m=!0),this.postMetricsEvent(f,m)}catch(e){this.errorLogger.captureException(e)}var y}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(Pa(window))),this.jsFramework}eventDuration(e,t){var[n,r]=e.event.split(":");if(n in vo){var i;if(n===vo.INITIALIZATION?i=n:t&&(i="".concat(n,":").concat(t)),!i)return null;if(r===Eo.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(r===Eo.OK||r===Eo.ERROR){var a=this.manualTelemetryStarts[i];return void 0===a?null:(delete this.manualTelemetryStarts[i],Date.now()-a)}}return r!==Eo.START&&n in yo?Ra(n):null}postMetricsEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&g.windowNavigationBeacon&&g.documentVisibilityState?(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===g.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))):re(Da,{body:e}).catch((e=>{this.errorLogger.captureException(e)}))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Ua,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),re(Ua,{body:{metrics:this.metricsBuffer}}).catch((e=>{e instanceof Y||this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,n){return Na(Na({},this.applicationData),{},{instanceId:e,sessionId:t,paymentsUIInstanceId:n})}}!function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.ALIPAY="ALIPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP="CASH_APP",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(La||(La={})),fe.HYDRATION_ENDPOINT;var Ma,ka,Ha,Fa,Ba="INITIALIZE",ja="UPDATE_SESSION";(Fa=Ma||(Ma={})).CanUseOverrideStrings="can_use_override_strings",Fa.CanUseWebSDK="can_use_websdk",Fa.CanUseInterac="can_use_interac",Fa.CanUsePaymentsUI="can_use_payments_ui",Fa.PostalCodeLeadingSpaceExperiment="postal_code_leading_space_experiment",Fa.PaymentsUICanUseCard="payments_ui_can_use_card",Fa.PaymentsUICanUseCashApp="payments_ui_can_use_cash_app",Fa.PaymentsUICanUseApplePay="payments_ui_can_use_apple_pay",Fa.PaymentsUICanUseGooglePay="payments_ui_can_use_google_pay",Fa.PaymentsUICanUseAchPlaid="payments_ui_can_use_ach_plaid",Fa.PaymentsUICanUseBnplA="payments_ui_can_use_bnpl_a",Fa.PaymentsUICanUseGiftCard="payments_ui_can_use_gift_card",Fa.CanUseBNPLA="can_use_bnpl_a",Fa.CanUsePlaidOAuth="can_use_plaid_oauth",function(e){e.Control="C",e.TreatmentA="T1"}(ka||(ka={})),function(e){e.LEGACY_IMPLEMENTATION="LEGACY_IMPLEMENTATION",e.PREFER_OAUTH_FLOW="PREFER_OAUTH_FLOW",e.ENFORCE_OAUTH_FLOW="ENFORCE_OAUTH_FLOW"}(Ha||(Ha={}));var qa,Ga,Va={[Ma.CanUseWebSDK]:{false:ka.Control,true:ka.TreatmentA},[Ma.CanUseInterac]:{false:ka.Control,true:ka.TreatmentA},[Ma.CanUseOverrideStrings]:{false:ka.Control,true:ka.TreatmentA},[Ma.PostalCodeLeadingSpaceExperiment]:{[ka.Control]:ka.Control,[ka.TreatmentA]:ka.TreatmentA},[Ma.CanUsePlaidOAuth]:{[Ha.LEGACY_IMPLEMENTATION]:Ha.LEGACY_IMPLEMENTATION,[Ha.PREFER_OAUTH_FLOW]:Ha.PREFER_OAUTH_FLOW,[Ha.ENFORCE_OAUTH_FLOW]:Ha.ENFORCE_OAUTH_FLOW},[Ma.CanUsePaymentsUI]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseCard]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseAchPlaid]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseApplePay]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseGooglePay]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseCashApp]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseBnplA]:{false:ka.Control,true:ka.TreatmentA},[Ma.PaymentsUICanUseGiftCard]:{false:ka.Control,true:ka.TreatmentA},[Ma.CanUseBNPLA]:{false:ka.Control,true:ka.TreatmentA}};class Ya{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==ka.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Va[e][t]||ka.Control}}!function(e){e.AFTERPAY="window.AfterPay",e.AFTERPAY_MESSAGING="window.Afterpay",e.ANALYTICS="window.Square.Analytics",e.GOOGLE="window.google.payments",e.PLAID="window.Plaid",e.CASH_APP_PAY="window.CashApp"}(qa||(qa={})),function(e){e.AFTERPAY="square-payments-afterpay-script",e.AFTERPAY_MESSAGING="square-payments-afterpay-messaging-script",e.ANALYTICS="square-payments-analytics-link-script",e.GOOGLE="square-payments-google-link-script",e.PLAID="square-payments-plaid-link-script",e.CASH_APP_PAY="square-payments-cash-app-pay-script"}(Ga||(Ga={}));var za={};function Ka(e,t,n,r,i){var o=r();if(o)return Promise.resolve(o);if(za[t])return za[t];var a=document.createElement("script");return a.id=e,a.src=n,void 0!==i&&(a.type=i),za[t]=new Promise(((e,i)=>{a.onload=()=>{var o=r();o?e(o):i(new Mi(t,n))},a.onerror=()=>{i(new Mi(t,n))}})),document.body.appendChild(a),za[t]}var Wa,Qa=function(){return Ka(Ga.AFTERPAY,qa.AFTERPAY,fe.AFTERPAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.AfterPay}))},Za=function(){return Ka(Ga.AFTERPAY_MESSAGING,qa.AFTERPAY_MESSAGING,fe.AFTERPAY_MESSAGING_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Afterpay}))},Ja=function(){return Ka(Ga.ANALYTICS,qa.ANALYTICS,fe.ANALYTICS_PUBLIC_ENDPOINT,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.Square)||void 0===t?void 0:t.Analytics}))},Xa=function(){return Ka(Ga.CASH_APP_PAY,qa.CASH_APP_PAY,fe.CASH_APP_PAY_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.CashApp}),"module")},$a=function(){return Ka(Ga.GOOGLE,qa.GOOGLE,fe.GOOGLE_PAY_SCRIPT_URL,(()=>{var e,t;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t?void 0:t.payments}))},es=function(){return Ka(Ga.PLAID,qa.PLAID,fe.PLAID_LINK_SCRIPT_URL,(()=>{var e;return null===(e=window)||void 0===e?void 0:e.Plaid}))};function ts(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ns(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ts(o,r,i,a,s,"next",e)}function s(e){ts(o,r,i,a,s,"throw",e)}a(void 0)}))}}var rs=yr.hoursToMs(2);function is(e){var{applicationId:t,locationId:n}=e;return Wa||(Wa=Ja().then((e=>new e(t,{locationId:n}))))}function os(){return os=ns((function*(e){var t=yield is(e);return new Promise((e=>{t.getToken(e)}))})),os.apply(this,arguments)}function as(){return as=ns((function*(e,t,n){var r=yield is(e);return new Promise(((e,i)=>{r.verifyBuyer(t,n,((t,n)=>{t?i(t):e(n)}))}))})),as.apply(this,arguments)}var ss={getToken:function(e){return os.apply(this,arguments)},resetLibraryCache:function(){Wa=void 0},verifyBuyer:function(e,t,n){return as.apply(this,arguments)}};function cs(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var ls,us="LOCALE_CHANGED_EVENT";class ds extends class{constructor(e,t){this.errorLogger=e,this.messenger=t}}{constructor(e,t,n,r,i,o,a,s){super(e,t),this.session=r,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=n,this.eventTarget=a,this.featureFlagHandler=new Ya(s),this.featureFlagValues=s}addLocaleChangedListener(e){this.eventTarget.addEventListener(us,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(us,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(us,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(ja,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var n=this.localeStrings.getCurrentLocale();return this.session.setLocale(n),this.eventTarget.dispatchEvent(us,n),this.messenger.sendOneWayMessage(ja,{session:this.session.serialize()}),t}updateSession(e){var t,n=this;return(t=function*(){n.session.setSessionId(e);try{var t=yield ss.getToken({applicationId:n.session.applicationId,locationId:n.session.locationId,websiteUrl:n.session.sourceUrl});n.session.setAnalyticsToken(t)}catch(e){n.session.locationId&&n.errorLogger.captureException(e,n.session.instanceId,n.session.sessionId)}yield n.messenger.sendOneWayMessage(ja,{session:n.session.serialize()})},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){cs(o,r,i,a,s,"next",e)}function s(e){cs(o,r,i,a,s,"throw",e)}a(void 0)}))})()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}setPaymentsUIInstanceId(e){this.session.setPaymentsUIInstanceId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}getPaymentsUIInstanceId(){return this.session.paymentsUIInstanceId}}function ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/api/paymentform".concat(e)}function hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/apple-pay".concat(e)}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.WALLET_NOT_REQUESTED="WALLET_NOT_REQUESTED"}(ls||(ls={}));var fs,ms={APPLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},APPLE_PAY_DEVICE_NOT_SUPPORTED:{message:"Device does not support Apple Pay.\nSee:".concat(hs("#prerequisites-and-assumptions"),"."),type:"DEVICE_NOT_SUPPORTED"},APPLE_PAY_NOT_REGISTERED:{message:"No active card available in the Apple Wallet or domain not registered.",type:"NOT_REGISTERED"},GOOGLE_PAY_BROWSER_NOT_SUPPORTED:{message:"Browser does not support Google Pay. \nSee: ".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://developer.squareup.com/docs/payment-form/add-digital-wallets/google-pay".concat(e)}("#prerequsites-and-assumptions")),type:"BROWSER_NOT_SUPPORTED"},INVALID_CONFIG:{message:"Configuration is invalid.",type:"INVALID_CONFIG"},UNKNOWN:{message:"An unknown error has occurred.",type:"UNKNOWN"},WALLET_NOT_REQUESTED:{message:"Wallet is not specified in the payment request config.\nSee:".concat(ps("#paymentform-configurationfields")),type:"WALLET_NOT_REQUESTED"}};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(fs||(fs={}));var gs={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: ".concat(ps("#paymentform-configurationfields")),type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's Apple Pay status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: ".concat(hs("#production-configuration")),type:"DOMAIN_NOT_REGISTERED"}};class ys extends v{constructor(e,t,n){var r="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");n&&(r+=" and must be a(n) ".concat(n)),super("".concat(r,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,ys.prototype)}}class vs extends v{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,vs.prototype)}}class Es{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0;r<n.length;r++)n[r]===t&&(n.splice(r,1),r--)}dispatchEvent(e,t){if(e in this.listeners)for(var n=new Gi(e,t),r=[...this.listeners[e]],i=0,o=r.length;i<o;i++)try{r[i](n)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var _s,As=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(_s||(_s={}));class Is{constructor(e){this.eventTarget=new Es,this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,t){this.eventTarget.addEventListener(e,t)}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve()}detach(){return Promise.resolve()}dispatchEvent(e,t){this.eventTarget.dispatchEvent(e,t)}}var Cs,Ss,Os={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};!function(e){e.CREATE_PLAID_LINK_SESSION="CREATE_PLAID_LINK_SESSION",e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(Cs||(Cs={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(Ss||(Ss={}));class Ps{constructor(e){this.id=As(),this.context=e}request(e,t){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:t})}initializeMessageBus(e){var t=this,n=function(e,n){t.context.messenger.onMessage({listener(e){n(e)},messageType:"".concat(e,":").concat(t.id)})};for(var[r,i]of Object.entries(e))n(r,i)}}function Ts(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.redirectURI)throw new _i("redirectURI missing");if(!e.transactionId)throw new _i("transactionId missing");if(t){if(!e.totalTransactionAmount)throw new _i("totalTransactionAmount required");if(!Number.isInteger(e.totalTransactionAmount.amount)||e.totalTransactionAmount.amount<=0)throw new _i("totalTransactionAmount.amount must be a positive integer")}}function Rs(e,t){var n=e;return e instanceof v||(n=new v,t.captureException(e)),{errors:[n],status:zr.ERROR}}function ws(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ns(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ws(o,r,i,a,s,"next",e)}function s(e){ws(o,r,i,a,s,"throw",e)}a(void 0)}))}}var bs,Ls,Ds,Us,xs,Ms,ks,Hs,Fs=["US"],Bs=["auth"],js=new Set(["en","es"]),qs=new Set(["ITEM_ERROR"]);class Gs extends Is{constructor(e,t,n){super(t),this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.Plaid=e,this.paymentMessenger=new Ps(this.context);try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new Pi("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new Pi("redirectURI",e,"URI must not contain query parameters");return!0}throw new Pi("redirectURI","".concat(e),"Must be a valid URI")}(null==n?void 0:n.redirectURI)}catch(e){if(this.mustUseOAuth)throw e;console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new Pi("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new Pi("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==n?void 0:n.transactionId)}catch(e){if(this.mustUseOAuth)throw e;console.warn(e.message)}}tokenize(e){var t=this;return Ns((function*(){try{if(t.isDestroyed)throw new bi(Vr.ACH);if(t.tokenizeInProgress)throw new ji([Os]);if(!e||!e.accountHolderName)throw new Ai;if(!t.hasEventListener(ti.ON_TOKENIZATION)){var n="Add event listener for '".concat(ti.ON_TOKENIZATION,"' before calling tokenize.");if(t.mustUseOAuth)throw new ji([{message:n,type:"INVALID_CONFIGURATION"}]);console.warn("".concat(n," This will result in an error when using the Plaid OAuth flow."))}var r;t.tokenizeInProgress=!0,t.preferOAuth||t.mustUseOAuth?r=yield t.createOAuthPlaidLinkSession():(console.warn("Using deprecated Plaid Link session without OAuth, please initialize ACH with 'redirectURI' and 'transactionId', and provide an event listener for \"".concat(ti.ON_TOKENIZATION,'".')),r=yield t.createPlaidLinkSession());var i=yield t.openPlaidLink(r.plaidLinkToken);if(i.status===Ss.SUCCESS&&i.publicToken&&i.selectedBankAccountId){var o=yield t.requestAchBankNonce(e.accountHolderName,i.publicToken,i.selectedBankAccountId,r.gringottsSessionToken);return t.dispatchEvent(ti.ON_TOKENIZATION,{tokenResult:o}),o}var a={status:zr.CANCEL};return t.dispatchEvent(ti.ON_TOKENIZATION,{tokenResult:a}),a}catch(e){throw t.dispatchEvent(ti.ON_TOKENIZATION,{error:e}),e}}))()}destroy(){return this.isDestroyed=!0,this.metricsHandler.logEvent(fo.Destroyed),this.handler&&(this.handler.exit({force:!0}),this.handler.destroy(),this.deleteHandler()),Promise.resolve()}addEventListener(e,t){this.metricsHandler.logEvent(fo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}get preferOAuth(){return Boolean(Ha.PREFER_OAUTH_FLOW===this.featureFlagHandler.experimentGroup(Ma.CanUsePlaidOAuth))}get mustUseOAuth(){return Ha.ENFORCE_OAUTH_FLOW===this.featureFlagHandler.experimentGroup(Ma.CanUsePlaidOAuth)}openPlaidLink(e){var t=this.errorLogger,n=this.session,r=this.metricsHandler;this.handleFirstInteraction();var i=new Promise(((i,o)=>{var a=g.windowNavigationLanguage.split("-")[0];js.has(a)||(a="en"),this.plaidHandler=this.Plaid.create({clientName:"Square, Inc.",countryCodes:Fs,env:fe.PLAID_LINK_ENV,language:a,onEvent:(e,r)=>{e!==ti.ERROR||qs.has(r.error_type)||t.captureException(new ue("PlaidErrorEvent: ".concat(JSON.stringify(r)),Vr.ACH),n.instanceId,n.sessionId),super.dispatchEvent(e,r)},onExit:(e,o)=>{e&&(r.logEvent(ho.ExternalSessionError),qs.has(e.error_type)||t.captureException(new ue("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(o)),n.instanceId,n.sessionId)),this.tokenizeInProgress=!1,this.deleteHandler(),i({status:Ss.CANCEL})},onSuccess(e,a){if(!a||!a.accounts||!a.accounts[0]){r.logEvent(ho.ExternalSessionError);var s=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(a)));return t.captureException(s,n.instanceId,n.sessionId),void o(s)}r.logEvent(ho.ExternalSessionOK),i({publicToken:e,selectedBankAccountId:a.accounts[0].id,status:Ss.SUCCESS})},product:Bs,token:e})}));return r.logEvent(ho.ExternalSessionStart),this.plaidHandler.open(),i}createPlaidLinkSession(){var e=this;return Ns((function*(){var t={createPlaidLinkSessionRequest:{clientId:e.session.applicationId}};try{return yield e.paymentMessenger.request(Cs.CREATE_PLAID_LINK_SESSION,t)}catch(t){throw e.tokenizeInProgress=!1,t}}))()}createOAuthPlaidLinkSession(){var e=this;return Ns((function*(){var t=e.session;if(!t.locationId)throw new qi("locationId not defined when creating OAuth Plaid Link Session");var n=fe.PLAID_OAUTH_REDIRECT_URI,r=g.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:t.applicationId,locationId:t.locationId,redirectUri:n,languageCode:r}};try{return yield e.paymentMessenger.request(Cs.CREATE_OAUTH_PLAID_LINK_SESSION,i)}catch(t){throw e.tokenizeInProgress=!1,t}}))()}requestAchBankNonce(e,t,n,r){var i=this;return Ns((function*(){var o={accountHolderName:e,gringottsSessionToken:r,plaidPublicToken:t,selectedPlaidBankAccountId:n},a=i.session,s={bankNonceRequest:{clientId:a.applicationId,paymentMethodTrackingId:i.context.getPaymentMethodTrackingId(),plaidLinkData:o,sessionId:a.sessionId,websdkVersion:fe.VERSION,websiteUrl:a.sourceUrl}};try{var c=yield i.paymentMessenger.request(Cs.REQUEST_ACH_BANK_NONCE,s);return i.deleteHandler(),i.tokenizeInProgress=!1,yield i.context.updateSession(c.sessionId),i.context.setPaymentMethodTrackingId(c.paymentMethodTrackingId),i.wasFirstInteractionCalled=!1,{details:{bankAccount:c.accountDetails,method:Vr.ACH},status:zr.OK,token:c.bankNonce}}catch(e){throw i.deleteHandler(),i.tokenizeInProgress=!1,e instanceof ji?e:new ji([si.UNKNOWN])}}))()}get plaidHandler(){if(!this.handler){var e=new ue("The plaid handler was not properly created.",Vr.ACH);throw this.errorLogger.captureException(e,this.session.instanceId,this.session.sessionId),new Ii}return this.handler}set plaidHandler(e){this.handler=e}deleteHandler(){delete this.handler}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(po.FirstInteraction))}}function Vs(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}!function(e){e.REQUEST_ALIPAY_PAY="REQUEST_ALIPAY_PAY"}(bs||(bs={}));class Ys extends Is{constructor(e,t){if(super(e),this.paymentMethodMessenger=new Ps(this.context),!this.session.locationId)throw new _i("locationId must be provided for Alipay");if(this.locationId=this.session.locationId,Ts(t,!0),this.redirectUri=t.redirectURI,this.totalTransactionAmount=t.totalTransactionAmount,t.transactionId.length>64)throw new _i("transactionId too long. Should be less than ".concat(64," characters."));this.transactionId=t.transactionId}tokenize(){var e,t=this;return(e=function*(){try{var e=yield t.fetchRedirectActionForm();return t.redirect(e),new Promise((()=>{}))}catch(e){return Rs(e,t.context.errorLogger)}},function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Vs(o,r,i,a,s,"next",e)}function s(e){Vs(o,r,i,a,s,"throw",e)}a(void 0)}))})()}fetchRedirectActionForm(){return this.paymentMethodMessenger.request(bs.REQUEST_ALIPAY_PAY,{client_id:this.session.applicationId,location_id:this.locationId,redirect_uri:this.redirectUri,total_transaction_amount:{amount:this.totalTransactionAmount.amount,currency_code:this.totalTransactionAmount.currencyCode},transaction_id:this.transactionId})}redirect(e){var t="alipay_".concat(this.transactionId),n=document.createElement("form");if(n.setAttribute("id",t),n.setAttribute("action",e.redirect_url),n.setAttribute("method",e.method),n.setAttribute("style","display:none"),e.parameters.length>0){var r=JSON.parse(e.parameters);Object.keys(r).forEach((e=>{var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name",e),t.setAttribute("value",r[e]),n.appendChild(t)}))}g.documentBody.appendChild(n),g.submitForm(n)}}(Ds=Ls||(Ls={})).UNKNOWN="unknown",Ds.AMERICAN_EXPRESS="americanExpress",Ds.DISCOVER="discover",Ds.DISCOVER_DINERS="discoverDiners",Ds.JCB="JCB",Ds.MASTER_CARD="masterCard",Ds.UNION_PAY="unionPay",Ds.VISA="visa",Ds.SQUARE_GIFT_CARD_V2="squareGiftCardV2",Ds.INTERAC="interac",Ds.SQUARE_CAPITAL_CARD="squareCapitalCard",Ds.EFTPOS="eftpos",Hr.CARD_NUMBER,Hr.CVV,Hr.EXPIRATION_DATE,Hr.POSTAL_CODE,(ks=Us||(Us={})).CARD_BRAND_CHANGED="cardBrandChanged",ks.ERROR_CLASS_ADDED="errorClassAdded",ks.ERROR_CLASS_REMOVED="errorClassRemoved",ks.FOCUS_CLASS_ADDED="focusClassAdded",ks.FOCUS_CLASS_REMOVED="focusClassRemoved",ks.POSTAL_CODE_CHANGED="postalCodeChanged",ks.SET_POSTAL_COUNTRY="setPostalCountry",ks.ESCAPE="escape",ks.SUBMIT="submit",(Ms=xs||(xs={})).ERROR="error",Ms.FOCUS="focus",Ms.UNKNOWN="unknown",(Hs||(Hs={})).THIRD_PARTY_GIFT_CARD="thirdPartyGiftCard";class zs{constructor(e){this.options=e}format(e){for(var t=e.split(""),n="",r=0;t.length>0;)n+=this.options.delimiterPositions.includes(r)?this.options.delimiter:t.shift(),r+=1;return n}}class Ks{constructor(e){this.options=e}format(e){var t=e;return void 0!==this.options.regexp&&void 0!==this.options.replacement&&(this.options.replacement,t=e.replace(this.options.regexp,this.options.replacement)),t.slice(0,this.options.maxLength)}}class Ws{getName(){return"LuhnValdator"}isValid(e){var t=String(e).replace(/\D/g,"");if(!t)return!1;for(var n=0,r=!1,i=t.length-1;i>=0;i--){var o=Number.parseInt(t.charAt(i),10);n+=r?Ws.luhnDigits[o]:o,r=!r}return n%10==0}}Ws.luhnDigits=[0,2,4,6,8,1,3,5,7,9];var Qs=new RegExp(/\D/g);new Ks({maxLength:15,regexp:Qs,replacement:""}),new Ks({maxLength:19,regexp:Qs,replacement:""}),new Ks({maxLength:14,regexp:Qs,replacement:""}),new Ks({maxLength:16,regexp:Qs,replacement:""}),new Ks({maxLength:16,regexp:Qs,replacement:""}),new Ks({maxLength:16,regexp:Qs,replacement:""}),new Ks({maxLength:16,regexp:Qs,replacement:""}),new Ks({maxLength:19,regexp:Qs,replacement:""}),new Ks({maxLength:16,regexp:Qs,replacement:""}),new Ks({maxLength:255,regexp:new RegExp(/[^\dA-Za-z]/g),replacement:""}),new zs({delimiter:" ",delimiterPositions:[4,11]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,11]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),new zs({delimiter:" ",delimiterPositions:[4,9,14]}),fe.GET_PRODUCT_INFORMATION_ENDPOINT;var Zs="sq-focus",Js="sq-error",Xs=".".concat(Zs),$s=".".concat(Js),ec="::placeholder";new ue("IFrame does not exist");var tc=["top","right","bottom","left"],nc=/^\d+\/\d+$/,rc=/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,ic=/^-\d*\.?\d+em$/,oc=/^-\d*\.?\d+pt$/,ac=/^-\d*\.?\d+px$/,sc=/^\d*\.?\d+em$/,cc=/^\d*\.?\d+%$/,lc=/^\d*\.?\d+pt$/,uc=/^\d*\.?\d+px$/,dc=/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,pc=/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,hc=/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/,fc=/\s(?![^(]*\))/,mc=new Set(["screen","all","print","speech"]),gc=new Set(["and"]),yc=new Set(["not","only"]),vc=new Set(["portrait","landscape"]),Ec=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),_c=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),Ac=new Set([100,200,300,400,500,600,700,800,900]),Ic=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Cc=new Set(["normal"]),Sc=new Set(["smaller","larger"]),Oc=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Pc=new Set(["none","antialiased","subpixel-antialiased"]),Tc=new Set(["grayscale","auto"]),Rc=new Set(["none"]);function wc(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),n=0;if("inset"===t[0]&&(t.shift(),n++),"inset"===t[t.length-1]){if(n>0)return!1;t.pop()}for(var r=0;r<2;r++){var i=t.shift();if(void 0===i||!xc(i))return!1}switch(t.length){case 0:return!0;case 1:return Hc(t[0])||kc(t[0]);case 2:return kc(t[0])&&(Hc(t[1])||Mc(t[1]));case 3:return kc(t[0])&&Mc(t[1])&&Hc(t[2]);default:return!1}}(e)))}function Nc(e){return["border-box","content-box"].includes(e)}function bc(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||Zc(e)||$c(e)}(e)))}function Lc(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(Dc)}function Dc(e){return 0===Number(e)||Zc(e)||$c(e)}function Uc(e){return 0===Number(e)||Zc(e)||$c(e)||Jc(e)||el(e)}function xc(e){return 0===Number(e)||Qc(e)||Xc(e)}function Mc(e){return 0===Number(e)||Qc(e)||Xc(e)}function kc(e){return 0===Number(e)||Zc(e)||$c(e)}function Hc(e){return null!=e&&(function(e){return _c.has(e.toLowerCase())}(e)||function(e){return rc.test(e)}(e)||function(e){return pc.test(e)}(e)||function(e){return hc.test(e)}(e))}function Fc(e){return null!=e&&(function(e){return Ec.has(e.toLowerCase())}(e)||function(e){return Sc.has(e.toLowerCase())}(e)||Zc(e)||tl(e)||$c(e)||nl(e))}function Bc(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Oc.has(t);var t}))}function jc(e){var t=Number(e);return Number.isNaN(t)?Ic.has(e.toLowerCase()):Ac.has(t)}function qc(e){return"normal"===e||Xc(e)||function(e){return tl(e)||function(e){return oc.test(e)}(e)}(e)||Qc(e)}function Gc(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Cc.has(e)||$c(e)||Zc(e)||tl(e)||nl(e)}function Vc(e){return Pc.has(e)}function Yc(e){return Tc.has(e)}function zc(e){return Rc.has(e)}function Kc(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return Zc(e)||$c(e)||nl(e)||0===Number(e)}(e)))}function Wc(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[n,r]=t.split(/: */);switch(n){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return Zc(r)||$c(r)||nl(r);case"resolution":case"min-resolution":case"max-resolution":return function(e){return dc.test(e)}(r);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return nc.test(e)}(r);case"color":case"color-index":case"monochrome":return void 0===r;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(r);case"orientation":return function(e){return vc.has(e)}(r);default:return!1}}function Qc(e){return Zc(e)||Jc(e)}function Zc(e){return uc.test(e)}function Jc(e){return ac.test(e)}function Xc(e){return $c(e)||el(e)}function $c(e){return sc.test(e)}function el(e){return ic.test(e)}function tl(e){return lc.test(e)}function nl(e){return cc.test(e)}var rl=function(e,t){var n=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Hc;case"-webkit-box-shadow":case"box-shadow":return wc;case"box-sizing":return Nc;case"font-family":return Bc;case"font-size":return Fc;case"font-weight":return jc;case"letter-spacing":return qc;case"line-height":return Gc;case"padding":return Kc;case"-webkit-font-smoothing":return Vc;case"-moz-osx-font-smoothing":return Yc;case"display":return zc;case"border-radius":return bc;case"border-width":return Lc;case"top":case"bottom":case"left":case"right":return Uc;case"width":return function(e){return e};default:return}})(e),r=n&&n(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t);return r?t:""},il=function(e){return!!(t=e).startsWith("@media")&&t.slice("@media".length+1,t.length).split(/, */).every((e=>{var t=e.split(fc);if(0===t.length)return!1;var n=0;if(!t[0].startsWith("(")){var r=0;if(yc.has(t[0])&&(r=1),t.length===r+1)return mc.has(t[r]);if(!mc.has(t[r])||!gc.has(t[r+1]))return!1;n=2+r}if((t.length-n)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(n)))if(!(Number(i)%2==0?Wc(o):gc.has(o)))return!1;return!0}));var t};function ol(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n.length>0){var i=n.includes(e);if(!i)throw new ki(e)}var o=Or.cssProperty(e),a=rl(o,t);if(0===a.length)throw new Hi(e,t);return r&&(a+=" !important"),Or.formatCSSKeyValuePair(o,a)}function al(e,t,n){var r=[],i=[],o=new Set(e.excludeProperties||[]);for(var[a,s]of Object.entries(t))if(!o.has(a)){var c=s||"";try{r.push(ol(a,c,n))}catch(e){i.push(e)}}if(i.length>0)throw new Bi(i);return e.toSelectors.reduce((function(e,t){return Object.assign({},e,{[t]:r})}),{})}function sl(e,t,n){var r={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:a,toProperty:s,toSelectors:c,transformPropertyValue:l}=e,u=t[o];if(u){var d=l?l(u):u;try{var p=ol(s||o,d,s?[...n,s]:n,a);c.forEach((e=>{r[e]||(r[e]=[]),r[e].push(p)}))}catch(e){i.push(e)}}})),i.length>0)throw new Bi(i);return r}function cl(e){var t=[];for(var[n,r]of Object.entries(e))r&&r.length>0&&t.push("\n      ".concat(n," { ").concat(r.join(" ")," }\n      "));return t.join("")}function ll(e,t){return!t&&il(e)}var ul=function(e,t){var n=t.split(" ");switch(n.length){case 1:return n[0];case 2:switch(e){case"top":case"bottom":return n[0];default:return n[1]}case 3:switch(e){case"top":return n[0];case"bottom":return n[2];default:return n[1]}case 4:switch(e){case"top":return n[0];case"right":return n[1];case"bottom":return n[2];case"left":return n[3];default:return""}default:return""}},dl=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],a=[...Object.keys(n.selectorMappings),...Object.keys(n.selectorPropertyMappings||{})],s=new Set(a),c=new Set(Object.values(r));Object.keys(t).forEach((e=>{c.has(e)||ll(e,i)||o.push(new Fi(e))}));var l={};function u(e){for(var[t,n]of Object.entries(e))l[t]||(l[t]=[]),l[t].push(...n)}for(var d of[...s]){var p,h=t[d],f=n.allowedAttributes[d]||[],m=n.selectorMappings[d]||[],g=(null==n||null===(p=n.selectorPropertyMappings)||void 0===p?void 0:p[d])||[];if(h){try{var y=al(m,h,f);u(y)}catch(e){e instanceof Bi&&o.push(...e.errors)}try{var v=sl(g,h,f);u(v)}catch(e){e instanceof Bi&&o.push(...e.errors)}}}var E=Object.keys(t).filter((e=>!s.has(e)&&il(e)));if(E.forEach((i=>{try{var a=e(t[i],n,r,!0);l[i]=[a]}catch(e){o.push(...e.errors)}})),o.length>0)throw new Bi(o);return cl(l)},pl="sq-card-iframe-container",hl="sq-card-wrapper",fl="sq-card-component",ml="sq-card-message",gl="sq-card-message-error",yl="sq-card-message-no-error",vl="sq-visible",El=".".concat(hl),_l=".".concat(fl),Al=".".concat(pl),Il="".concat(El).concat(Xs),Cl="".concat(El).concat($s),Sl="".concat(El," ").concat(_l),Ol="".concat(El," ").concat(Al),Pl="".concat(Il," ").concat(Al),Tl="".concat(Cl," ").concat(Al),Rl="input",wl="form",Nl="label",bl=".sq-background-text",Ll=".sq-visible-background-text",Dl=".sq-card-message-error::before",Ul=".sq-card-message-no-error::before",xl="".concat(Al).concat("::before"),Ml="".concat(wl).concat(Xs),kl="".concat(wl).concat($s),Hl=("".concat(Ml," ").concat(Rl),"".concat(Rl).concat($s),"".concat(Ml," ").concat(Rl).concat(ec),"".concat(kl," ").concat(Rl).concat($s).concat(ec),"".concat(wl," ").concat(Rl).concat(ec),"".concat(wl," ").concat(bl)),Fl=("".concat(Hl," ").concat(Ll),"".concat(Ml," ").concat(Nl),"".concat(kl," ").concat(Rl).concat($s," ~ ").concat(Nl),"".concat(Ml," ").concat(bl," ").concat(Ll),"".concat(kl," ").concat(Rl).concat($s," ~ ").concat(bl," ").concat(Ll),"".concat(wl," ").concat("#card-number-wrapper"),["borderWidth"]);function Bl(e){var t=["".concat(e).concat($s," ").concat(xl),"".concat(e).concat(Xs," ").concat(xl)];return tc.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(n=e,function(e){var t=ul(n,e);return"0"===t[0]?t:"-".concat(t)})};var n}))}function jl(e,t){return dl(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Fr.CARD_COMPONENT]:eo,[Fr.CARD_COMPONENT_FOCUS]:to,[Fr.CARD_COMPONENT_ERROR]:to,[Fr.CARD_INPUT_HELPER_TEXT]:no,[Fr.CARD_INPUT_HELPER_ICON]:ro,[Fr.CARD_INPUT_ERROR_TEXT]:no,[Fr.CARD_INPUT_ERROR_ICON]:ro},selectorMappings:{[Fr.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(Ol)]},[Fr.CARD_COMPONENT_FOCUS]:{excludeProperties:Fl,toSelectors:["".concat(t).concat(Pl)]},[Fr.CARD_COMPONENT_ERROR]:{excludeProperties:Fl,toSelectors:["".concat(t).concat(Tl)]},[Fr.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-no-error")]},[Fr.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Ul)]},[Fr.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(".sq-card-message-error")]},[Fr.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Dl)]}},selectorPropertyMappings:{[Fr.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(Ol)]}],[Fr.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(xl),"".concat(t).concat(Sl)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(Ol)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var n=ul(t,e);return"0"===n&&(n="0px"),n})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Bl(t)],[Fr.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat($s," ").concat(xl)]},{property:"borderWidth",toSelectors:["".concat(t).concat($s," ").concat(xl)]}],[Fr.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(Xs," ").concat(xl)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Xs," ").concat(xl)]}],[Fr.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Dl)]}],[Fr.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Ul)]}]}}}(t),Fr)}Fr.CARD_INPUT,Fr.CARD_INPUT_FOCUS,Fr.CARD_INPUT_ERROR,Fr.CARD_INPUT_PLACEHOLDER,Fr.CARD_INPUT_FOCUS_PLACEHOLDER,Fr.CARD_INPUT_ERROR_PLACEHOLDER,Fr.CARD_INPUT,Fr.CARD_INPUT_FOCUS,Fr.CARD_INPUT_ERROR,Fr.CARD_INPUT_FOCUS_PLACEHOLDER,Fr.CARD_INPUT_ERROR_PLACEHOLDER,Fr.CARD_INPUT_PLACEHOLDER,Fr.CARD_COMPONENT,Fr.CARD_INPUT,Fr.CARD_INPUT_PLACEHOLDER,Fr.CARD_INPUT_FOCUS_PLACEHOLDER,Fr.CARD_INPUT_ERROR_PLACEHOLDER;var ql="background-text";"sq-".concat(ql),"sq-hidden-".concat(ql),"sq-visible-".concat(ql),Hr.CARD_NUMBER,"0".repeat(24),Hr.EXPIRATION_DATE,"0".repeat(4),Hr.CVV,"0".repeat(4),Hr.POSTAL_CODE;var Gl,Vl=[ki,Hi,Fi,Bi,wi,qi],Yl=[Ni,Fi,ki,Hi,Bi];!function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides",e.PAYMENTS_UI_INSTANCE_ID="_paymentsUIInstanceId"}(Gl||(Gl={}));class zl{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:n,applicationId:r,avt:i,hostname:o,locationId:a,instanceId:s,sessionId:c,sourceUrl:l,locale:u,paymentsUIInstanceId:d}=e;this.applicationId=r,this.locationId=a,this._sessionId=c,this.instanceId=s,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=n,this.hostname=o,this.sourceUrl=l,this._locale=u,this.avt=i,this._paymentsUIInstanceId=d}setSessionId(e){this.setAttribute(Gl.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Gl.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Gl.LOCALE,e)}setPaymentsUIInstanceId(e){this.setAttribute(Gl.PAYMENTS_UI_INSTANCE_ID,e)}get paymentsUIInstanceId(){return this._paymentsUIInstanceId}get sessionId(){return this._sessionId}setAnalyticsToken(e){this.setAttribute(Gl.ANALYTICS_TOKEN,e)}get analyticsToken(){return this._analyticsToken}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides),this._paymentsUIInstanceId&&(this.serialized.paymentsUIInstanceId=this._paymentsUIInstanceId)),this.serialized}setAttribute(e,t){(this.isValueString(t)||e===Gl.TRANSLATION_OVERRIDES)&&(this[e]=t),this.serialized=void 0}isValueString(e){return"string"==typeof e}}fe.CARD_NONCE_ENDPOINT;var Kl,Wl=[ji,Ni],Ql=function(e,t){var n=document.createElement("iframe");return new Promise(((r,i)=>{n.onerror=e=>{i(e)},n.onload=()=>{r(n)},Object.entries(e).forEach((e=>{var[t,r]=e;n.setAttribute(t,r)})),t?t.appendChild(n):document.body.appendChild(n)}))},Zl=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(Kl||(Kl={}));var Jl=new Set(["DIV","SPAN"]),Xl=new Set(["DIV","SPAN"]),$l=new Set(["DIV","SPAN","BUTTON"]);function eu(e,t){var n;if(function(e){return"string"==typeof e}(e)){var r=document.querySelector(e);if(!r)throw new gi(e);n=r}else{if(!(e instanceof HTMLElement))throw new Li(e,t);if(n=e,!document.contains(n))throw new gi(n)}if(!t.has(n.nodeName))throw new Li(n,t);return n}function tu(e){return eu(e,Jl)}function nu(e){return eu(e,$l)}var ru={addStyleElement:function(e,t,n,r){if(ru.hasExistingStyleElement(t))n&&n();else{var i=document.createElement("link");n&&(i.onload=n),r&&(i.onerror=t=>{r(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))}),i.href=e,i.rel="stylesheet",i.type="text/css",i.id=t,document.head.appendChild(i)}},hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}},iu=ru;function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(n),!0).forEach((function(t){su(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function lu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){cu(o,r,i,a,s,"next",e)}function s(e){cu(o,r,i,a,s,"throw",e)}a(void 0)}))}}var uu="emptyMessage",du=[Hr.CARD_NUMBER,Hr.EXPIRATION_DATE,Hr.CVV,Hr.POSTAL_CODE];function pu(e){return"".concat("single-card-wrapper","-").concat(e)}function hu(e,t){var n=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=jl(e,pu(t))}var fu=class extends Is{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.postalCountry=Do.US,this.attached=!1,this.destroyed=!1,this.id=As(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new Ps(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return lu((function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{};if(t.destroyed)throw new bi(Vr.CARD);if(!t.attached)throw new Ni(Vr.CARD);t.validateOptions(n),t.metricsHandler.logEvent(fo.ConfigUpdated,n),void 0!==n.includeInputLabels&&(t.inputLabelsIncluded=Boolean(n.includeInputLabels),t.onResize()),void 0!==n.style&&hu(n.style,t.id);try{return yield t.paymentMessenger.request(Kl.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:n.postalCode,style:n.style,type:Vr.CARD}),Promise.resolve()}catch(e){if(Or.isInstanceOf(e,Yl))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new qi("configuring the Card Element")}}))()}destroy(){var e=this;return lu((function*(){if(e.destroyed)throw new bi(Vr.CARD);if(e.attachPromise)try{yield e.attachPromise}catch(e){}e.destroyed=!0,e.attached=!1,e.context.removeLocaleChangedListener(e.updateCardDetailText),e.metricsHandler.logEvent(fo.Destroyed);var t=yield e.paymentMessenger.request(Kl.DESTROY);return e.element&&(Zl(e.element),window.removeEventListener("resize",e.onResize.bind(e))),t}))()}attach(e){var t=this;return lu((function*(){if(t.destroyed)throw new bi(Vr.CARD);if(t.attached)throw new wi(Vr.CARD);var n;t.attached=!0,t.metricsHandler.logEvent(po.AttachStart),t.metricsHandler.logEvent(fo.Configured,t.initialOptions);try{n=tu(e)}catch(e){throw t.metricsHandler.logEvent(po.AttachError),e}try{return t.attachPromise=t.buildElementOnIframe(n),yield t.attachPromise,t.attachPromise=void 0,t.destroyed?Promise.reject(new bi(Vr.CARD)):(t.element=n,window.addEventListener("resize",t.onResize.bind(t)),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(po.AttachOK),Promise.resolve())}catch(e){if(t.attached=!1,t.metricsHandler.logEvent(po.AttachError),Or.isInstanceOf(e,Vl))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new qi("attaching the Card Element")}}))()}focus(e){var t=this;return lu((function*(){if(t.destroyed)throw new bi(Vr.CARD);if(!t.attached)throw new Ni(Vr.CARD);if(!Object.values(Hr).includes(e))throw new Si(e);t.metricsHandler.logEvent(fo.Focused,e);try{return yield t.paymentMessenger.request(Kl.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}clear(){var e=this;return lu((function*(){if(e.destroyed)throw new bi(Vr.CARD);if(!e.attached)throw new Ni(Vr.CARD);try{return yield e.paymentMessenger.request(Kl.CLEAR)}catch(t){e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId)}return e.metricsHandler.logEvent(fo.Clear),!1}))()}addEventListener(e,t){if(this.destroyed)throw new bi(Vr.CARD);this.metricsHandler.logEvent(fo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){if(this.destroyed)throw new bi(Vr.CARD);super.removeEventListener(e,t)}tokenize(){var e=this;return lu((function*(){if(e.destroyed)throw new bi(Vr.CARD);if(!e.attached)throw new Ni(Vr.CARD);if(e.tokenizeInProcess)throw new ji([Os]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(Kl.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:Vr.CARD});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,billingContact:n,cardNonce:r}=e;return{details:{card:t,method:Vr.CARD,billing:n},status:zr.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof io)return{errors:t.errors,status:zr.INVALID};throw Or.isInstanceOf(t,Wl)?t:(e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId),oo())}}))()}recalculateSize(){if(this.destroyed)throw new bi(Vr.CARD);if(!this.attached)throw new Ni(Vr.CARD);this.metricsHandler.logEvent(fo.RecalculatedSize),this.onResize()}setError(e){var t=this;return lu((function*(){if(t.destroyed)throw new bi(Vr.CARD);if(!t.attached)throw new Ni(Vr.CARD);if(!Object.values(Hr).includes(e))throw new Si(e);t.metricsHandler.logEvent(fo.SetError,e);try{return yield t.paymentMessenger.request(Kl.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}buildElementOnIframe(e){var t=this;return lu((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Kl.LOAD_CARDS_FORM,{configuration:au(au({},t.initialOptions),{},{type:Vr.CARD}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[n,r]=e;if(void 0===t[n])throw new Oi(n);if(t[n]&&!t[n](r))throw new Pi(n,r)}))}buildErrorMessage(e){switch(e){case Hr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case Hr.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case Hr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case Hr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case Hr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case Hr.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case Hr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case Hr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(n=this.focusedInput)&&void 0!==n?n:uu,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(gl),this.cardDetail.classList.add(yl)):(e=du.find((e=>this.errorList.has(e)))||uu,t=this.buildErrorMessage(e),this.cardDetail.classList.add(gl),this.cardDetail.classList.remove(yl)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(vl):this.cardDetail.classList.remove(vl))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Zs)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Js))}handleInputEvent(e){var t,n,{data:r}=e,i=r.payload.body;switch(i.eventType){case kr.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(Js);break;case kr.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case kr.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Zs);break;case kr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),n={[Us.SET_POSTAL_COUNTRY]:t,[Us.FOCUS_CLASS_ADDED]:e,[Us.FOCUS_CLASS_REMOVED]:e,[Us.ERROR_CLASS_ADDED]:e,[Us.ERROR_CLASS_REMOVED]:e,[Us.CARD_BRAND_CHANGED]:e,[Us.POSTAL_CODE_CHANGED]:e,[Us.SUBMIT]:e,[Us.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(n)}buildCardIframe(e){return Ql({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:fe.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return lu((function*(){var n;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=pu(t.id),t.wrapperElement.classList.add(hl),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(ml),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(pl),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(fl),t.wrapperElement.appendChild(t.cardDetail),iu.addStyleElement(fe.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(n=t.initialOptions)&&void 0!==n&&n.style&&hu(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}};function mu(e){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(e),type:"UNKNOWN"}}var gu,yu=function(e){window.localStorage&&window.localStorage.removeItem(e)},vu=function(e){if(window.localStorage){var t,n=window.localStorage.getItem(e);if(!n)return null;try{t=JSON.parse(n)}catch(e){return null}return{key:e,value:t}}return null},Eu=function(e){window.localStorage&&window.localStorage.setItem(e.key,JSON.stringify(e.value))};!function(e){e.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",e.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(gu||(gu={}));var _u=["state","code","access_token"],Au=new Set(["iPhone Simulator","iPod Simulator","iPhone","iPod"]),Iu={CASH_APP_OAUTH_PARAMS:_u,extractCashAppParamsFromURI:function(e,t){var n=new URL(e),r=0,i=[];_u.forEach((e=>{n.searchParams.get(e)&&(r++,i.push(e),n.searchParams.delete(e))}));var o=n.searchParams.get("error");return o&&n.searchParams.delete("error"),!o&&r>0&&r!==_u.length&&t.captureException(new ue("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(_u.toString(),"]"))),n.toString()},findAndRemoveQueryParams:function(e,t){var n={};if(!window.URLSearchParams)return n;var r=new URLSearchParams(e),i=t.length,o=0;if(t.forEach((e=>{n[e]=r.get(e),n[e]&&o++})),i===o){var a=new URLSearchParams(e);t.forEach((e=>{a.delete(e)}));var s="?".concat(a.toString()),c=g.windowHash;c&&(s+="".concat(c)),g.replaceWindowState(s)}return n},isIOS:function(){return Au.has(window.navigator.platform)||/iPhone|iPod/.test(navigator.userAgent)&&"ontouchend"in document}};class Cu extends v{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,Cu.prototype)}}function Su(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ou(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Su(o,r,i,a,s,"next",e)}function s(e){Su(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Pu{constructor(){this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),iu.addStyleElement(fe.CASH_APP_STYLES,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var t=this;return Ou((function*(){yield t.stylesLoadedPromise;var n,r=document.createElement("button"),i=document.createElement("img");return i.setAttribute("src",(n=e.theme===Ji.DARK?"fff":"000","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(n,"'/%3E%3C/svg%3E"))),r.classList.add("sq-cash-button",function(e){switch(e){case Xi.ROUNDED:return"sq-cash-button-rounded";case Xi.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),function(e){return e===Ji.DARK?"sq-cash-button-dark":"sq-cash-button-light"}(e.theme)),r.appendChild(i),r}))()}createQrCodeContainer(e){var t=this;return Ou((function*(){if(yield t.stylesLoadedPromise,!Or.isValidUrl(e))throw new Cu;var n=new URL(e);n.searchParams.set("rounded","0");var r=document.createElement("div");r.classList.add("sq-cash-qr-container");var i=document.createElement("div");i.classList.add("col-left");var o=document.createElement("div");o.classList.add("col-right");var a=document.createElement("div");a.classList.add("sq-cash-qr-instruction"),a.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var s=document.createElement("div"),c=document.createElement("img");s.classList.add("sq-cash-qr-guide"),c.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),s.appendChild(c),i.appendChild(a),i.appendChild(s);var l=document.createElement("img");return l.classList.add("sq-cash-qr-code"),l.setAttribute("src",n.toString()),o.appendChild(l),r.appendChild(i),r.appendChild(o),r}))()}}function Tu(e,t,n){return{details:{cashApp:{cashtag:e,transactionId:t},method:Vr.CASH_APP},status:zr.OK,token:n}}function Ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(n),!0).forEach((function(t){Nu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Lu(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bu(o,r,i,a,s,"next",e)}function s(e){bu(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Du="sq-cash-app-redirect-payment-method-tracking-id";class Uu extends Is{constructor(e,t){if(super(e),this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=g.isAndroid()||Iu.isIOS(),this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new Ps(this.context),this.cashAppClient=new Pu,!this.session.locationId)throw new _i("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,Ts(t),t.transactionId.length>50)throw new _i("transactionId too long. Should be less than ".concat(50," characters."));var n=Iu.extractCashAppParamsFromURI(t.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,n,t.transactionId,t.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(fo.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve()}attachAll(e,t){var n=this;return Lu((function*(){n.metricsHandler.logEvent(po.AttachStart);try{if(e.button){var r=yield n.cashAppClient.createCashAppButton(Object.assign({shape:Xi.ROUNDED,theme:Ji.DARK},null==t?void 0:t.button));n.elements.button=n.validateAndQuerySelector(e.button),n.elements.button.appendChild(r)}return n.elements.qrCode=n.validateAndQuerySelector(e.qrCode),n.metricsHandler.logEvent(po.AttachOK),Promise.resolve()}catch(e){throw n.metricsHandler.logEvent(po.AttachError),e}}))()}tokenize(){var e=this;return Lu((function*(){e.handleFirstInteraction();var{qrCode:t}=e.elements;if(!t)throw new Ni(Vr.CASH_APP);try{var n,r=yield W.timeout((()=>e.fetchAuthURLsPromise),yr.minutesToMs(1),new ue("Precondition failed",Vr.CASH_APP));if(r.error)throw r.error;if(!e.transactionId)throw new ue("expected transactionId to exist at tokenization",Vr.CASH_APP);if(e.willRedirect){var i={paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId};return e.context.getSession().paymentsUIInstanceId&&(i=wu(wu({},i),{},{paymentsUIInstanceId:e.context.getPaymentsUIInstanceId()})),Eu({key:Du,value:i}),g.redirectTo(r.redirectURL),new Promise((()=>{}))}var o=yield e.cashAppClient.createQrCodeContainer(r.qrURL);t.appendChild(o);var{token:a,cashtag:s,paymentMethodTrackingId:c,sessionId:l}=yield e.paymentMethodMessenger.request(gu.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{expiresAt:Date.now()+yr.secondsToMs(r.expiresIn),requestBody:{analytics_token:null!==(n=e.session.analyticsToken)&&void 0!==n?n:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:fe.VERSION,website_url:e.session.sourceUrl}});return yield e.context.updateSession(l),e.context.setPaymentMethodTrackingId(c),Tu(s,e.transactionId,a)}catch(t){return t instanceof Cu&&e.errorLogger.captureException(t),Rs(t,e.errorLogger)}}))()}getRedirectResult(){var e=this;return Lu((function*(){var t,{error:n}=Iu.findAndRemoveQueryParams(window.location.search,["error"]);if(n){var r=new ji([mu(n)]);return e.errorLogger.captureException(r),Rs(r,e.errorLogger)}var i,o,a,s,c,{state:l,code:u,access_token:d}=Iu.findAndRemoveQueryParams(window.location.search,Iu.CASH_APP_OAUTH_PARAMS);if(!l||!u||!d)return null;try{o=function(e){var{transaction_id:t}=JSON.parse(e);if(void 0===t)throw new ue("Malformed state in redirect query params: ".concat(e));return t}(l);var p=function(e){var t=e.split(":");if(t.length<3)throw new ue("Invalid transaction ID: could not separate");return t}(o);i=p[0],a=p[1]}catch(t){return Rs(t,e.errorLogger)}var h=vu(Du);null!==h&&o===(null===(t=h.value)||void 0===t?void 0:t.transactionId)&&(s=h.value.paymentMethodTrackingId,c=h.value.paymentsUIInstanceId),yu(Du);var f=t=>{e.context.metricsHandler.metricsLogger.logEvent({event:t,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,i,s,c)};f(po.NonceStart);try{var m=yield e.messenger.request(gu.REQUEST_CASH_APP_CUSTOMER,{session:Object.assign({},e.session,{paymentMethodTrackingId:s,sessionId:i}),body:d}),g=e.generateWalletToken(i,u,o,s);return f(po.NonceOK),Tu(m,a,g)}catch(t){return f(po.NonceError),Rs(t,e.errorLogger)}}))()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var t=document.querySelector(e);if(null===t)throw new gi(e);return t}fetchAuthURLs(e,t,n,r){var i=this;this.fetchAuthURLsPromise=Lu((function*(){var o,a={expiresIn:-1,qrURL:"",redirectURL:""},s=1e3,c=i.willRedirect?t:void 0,l=r?{amount:r.amount,currency_code:r.currencyCode}:void 0,u={client_id:i.session.applicationId,location_id:e,redirect_uri:c,total_transaction_amount:l,transaction_id:n};try{var{expires_in:d,qr_url:p,redirect_url:h,transaction_id:f}=yield i.paymentMethodMessenger.request(gu.REQUEST_CASH_APP_AUTH,u);i.transactionId=f,a.expiresIn=d,a.qrURL=p,a.redirectURL=h,o=d,s=Math.max(yr.secondsToMs(o)-yr.minutesToMs(1),yr.minutesToMs(1)),i.willRedirect||(i.preloadedQRImage.src=p),a.expiresIn<2147483647?i.authTimeoutId=window.setTimeout((()=>{i.errorLogger.captureException(new ue("Cash App Auth URLS expired unexpectedly with expiry of ".concat(s,"ms")),i.session.instanceId,i.session.sessionId)}),s):i.errorLogger.captureException(new ue("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(a.expiresIn,"ms")),i.session.instanceId,i.session.sessionId)}catch(e){a.error=e}return a}))()}generateWalletToken(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:r,session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:t,transaction_id:n},websdk_version:fe.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(po.FirstInteraction))}}Br.GIFT_CARD_NUMBER,Br.GIFT_CARD_NUMBER,"0".repeat(24);var xu,Mu=[ki,Hi,Fi,Bi,wi,qi];function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(n),!0).forEach((function(t){Fu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bu(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ju(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Bu(o,r,i,a,s,"next",e)}function s(e){Bu(o,r,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(xu||(xu={}));var qu=[Br.GIFT_CARD_NUMBER];class Gu extends Is{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.attached=!1,this.destroyed=!1,this.id=As(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new Ps(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return ju((function*(){if(t.destroyed)throw new bi(Vr.GIFT_CARD);if(t.attached)throw new wi(Vr.GIFT_CARD);var n;t.attached=!0,t.metricsHandler.logEvent(po.AttachStart),t.metricsHandler.logEvent(fo.Configured,t.initialOptions);try{n=tu(e)}catch(e){throw t.metricsHandler.logEvent(po.AttachError),e}try{return t.attachPromise=t.buildElementOnIframe(n),yield t.attachPromise,t.attachPromise=void 0,t.destroyed?Promise.reject(new bi(Vr.GIFT_CARD)):(t.element=n,window.addEventListener("resize",t.onResize.bind(t)),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(po.AttachOK),Promise.resolve())}catch(e){if(t.attached=!1,t.metricsHandler.logEvent(po.AttachError),Or.isInstanceOf(e,Mu))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new qi("attaching the Gift Card Element")}}))()}configure(e){var t=this;return ju((function*(){if(t.destroyed)throw new bi(Vr.GIFT_CARD);if(!t.attached)throw new Ni(Vr.GIFT_CARD);t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&Yu(e.style,t.id),t.metricsHandler.logEvent(fo.ConfigUpdated,e);try{return void(yield t.paymentMessenger.request(xu.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:Vr.GIFT_CARD}))}catch(e){if(Or.isInstanceOf(e,Yl))throw e;throw t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),new qi("configuring the Gift Card Element")}}))()}destroy(){var e=this;return ju((function*(){if(e.destroyed)throw new bi(Vr.GIFT_CARD);if(e.attachPromise)try{yield e.attachPromise}catch(e){}e.destroyed=!0,e.attached=!1,e.metricsHandler.logEvent(fo.Destroyed);var t=yield e.paymentMessenger.request(xu.DESTROY);return e.element&&(Zl(e.element),window.removeEventListener("resize",e.onResize.bind(e))),t}))()}focus(e){var t=this;return ju((function*(){if(t.destroyed)throw new bi(Vr.GIFT_CARD);if(!t.attached)throw new Ni(Vr.GIFT_CARD);if(!Object.values(Br).includes(e))throw new Si(e);t.metricsHandler.logEvent(fo.Focused,e);try{return yield t.paymentMessenger.request(xu.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}clear(){var e=this;return ju((function*(){if(e.destroyed)throw new bi(Vr.GIFT_CARD);if(!e.attached)throw new Ni(Vr.GIFT_CARD);try{return yield e.paymentMessenger.request(xu.CLEAR)}catch(t){e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId)}return e.metricsHandler.logEvent(fo.Clear),!1}))()}addEventListener(e,t){if(this.destroyed)throw new bi(Vr.GIFT_CARD);this.metricsHandler.logEvent(fo.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){if(this.destroyed)throw new bi(Vr.GIFT_CARD);super.removeEventListener(e,t)}tokenize(){var e=this;return ju((function*(){if(e.destroyed)throw new bi(Vr.GIFT_CARD);if(!e.attached)throw new Ni(Vr.GIFT_CARD);if(e.tokenizeInProcess)throw new ji([Os]);e.tokenizeInProcess=!0;try{var t=yield e.paymentMessenger.request(xu.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:Vr.GIFT_CARD});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,cardNonce:n}=e;return{details:{giftCard:t,method:Vr.GIFT_CARD},status:zr.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof io)return{errors:t.errors,status:zr.INVALID};throw Or.isInstanceOf(t,Wl)?t:(e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId),oo())}}))()}setError(e){var t=this;return ju((function*(){if(t.destroyed)throw new bi(Vr.GIFT_CARD);if(!t.attached)throw new Ni(Vr.GIFT_CARD);if(!Object.values(Br).includes(e))throw new Si(e);t.metricsHandler.logEvent(fo.SetError,e);try{return yield t.paymentMessenger.request(xu.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId)}return!1}))()}buildElementOnIframe(e){var t=this;return ju((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(xu.LOAD_GIFT_CARDS_FORM,{configuration:Hu(Hu({},t.initialOptions),{},{type:Vr.GIFT_CARD}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[n,r]=e;if(void 0===t[n])throw new Oi(n);if(t[n]&&!t[n](r))throw new Pi(n,r)}))}buildCardElement(e){var t=this;return ju((function*(){var n;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Vu(t.id),t.wrapperElement.classList.add(hl),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(ml),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(pl),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(fl),t.wrapperElement.appendChild(t.cardDetail),iu.addStyleElement(fe.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(n=t.initialOptions)&&void 0!==n&&n.style&&Yu(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return Ql({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:fe.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,n;this.cardDetail&&(0===this.errorList.size?(e=null!==(n=this.focusedInput)&&void 0!==n?n:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(gl),this.cardDetail.classList.add(yl)):(e=qu.find((e=>this.errorList.has(e)))||qu[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(gl),this.cardDetail.classList.remove(yl)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(vl):this.cardDetail.classList.remove(vl))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var t,n,{data:r}=e,i=r.payload.body;switch(i.eventType){case jr.ERROR_CLASS_ADDED:this.addErrorMessage(i.field),null===(t=this.wrapperElement)||void 0===t||t.classList.add(Js);break;case jr.ERROR_CLASS_REMOVED:this.removeErrorMessage(i.field),this.removeErrorClass();break;case jr.FOCUS_CLASS_ADDED:this.addFocusMessage(i.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Zs);break;case jr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(i.field),this.removeFocusClass()}super.dispatchEvent(i.eventType,i)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Zs)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Js))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[Us.FOCUS_CLASS_ADDED]:e,[Us.FOCUS_CLASS_REMOVED]:e,[Us.ERROR_CLASS_ADDED]:e,[Us.ERROR_CLASS_REMOVED]:e,[Us.CARD_BRAND_CHANGED]:e,[Us.SUBMIT]:e,[Us.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===Br.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===Br.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}}function Vu(e){return"".concat("gift-card-wrapper","-").concat(e)}function Yu(e,t){var n=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),r=document.getElementById(n);null===r&&((r=document.createElement("style")).id=n,document.head.appendChild(r)),r.innerHTML=jl(e,Vu(t))}class zu extends v{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,zu.prototype)}}function Ku(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}class Wu extends Es{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,n){var r,i=this;return(r=function*(){if(e in i.listeners)for(var r=new Gi(e,t),o=[...i.listeners[e]],a=function*(t,i){var a=void 0;try{a=o[t](r)}catch(t){throw new Ei(e,t.message)}var s=void 0;if(a instanceof Promise)try{s=yield W.timeout((()=>a),3e4,new zu(e))}catch(t){if(t instanceof zu)throw t;throw new Ei(e,t.message)}else s=a;n&&n(s)},s=0,c=o.length;s<c;s++)yield*a(s)},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Ku(o,n,i,a,s,"next",e)}function s(e){Ku(o,n,i,a,s,"throw",e)}a(void 0)}))})()}}function Qu(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var n=[];return{isValid:Object.entries(t).map((r=>{var[i,o]=r;if("object"==typeof o){var{isValid:a,missingFields:s}=Qu("object"==typeof e[i]?e[i]:{},t[i]);return s.forEach((e=>{var[t,r]=e;n.push(["".concat(i,".").concat(t),r])})),a}return i in e&&typeof e[i]===o||(n.push([i,o]),!1)})).every((e=>e)),missingFields:n}}function Zu(e,t,n){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var r=e.reduce(((e,r)=>{var i=Qu({[t]:r},{[t]:n}),o=Or.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:r.isValid,missingFields:Object.entries(r.missingFieldsMap)}}var Ju,Xu,$u={amount:"string",label:"string"},ed={amount:"string",id:"string",label:"string"},td={amount:"string",label:"string"},nd={};function rd(e,t){var{lineItems:n,taxLineItems:r,discounts:i,shippingLineItems:o}=e,a=!1,s=[],c=n,l=r,u=o,d=id(i);return void 0===t||void 0===n&&void 0===r&&void 0===o&&void 0===d||(c||(c=t.lineItems),l||(l=t.taxLineItems),d||(d=id(t.discounts)),u||(u=t.shippingLineItems)),[c,l,d,u].forEach((e=>{void 0!==e&&(a=!0,s.push(...e))})),a?s:void 0}function id(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function od(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function ad(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){od(o,r,i,a,s,"next",e)}function s(e){od(o,r,i,a,s,"throw",e)}a(void 0)}))}}function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.UPDATE="update"}(Ju||(Ju={}));class ld{constructor(e,t,n){this.eventTarget=new Wu,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=n;var{isValid:r,missingFields:i}=dd(this);if(!r)throw new yi(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(n),!0).forEach((function(t){cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),n=new ld(t,this.localeStrings,this.updateLock),{isValid:r,missingFields:i}=dd(n);if(!r)throw new yi(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Ju.UPDATE,n),this.logMetrics(fo.ConfigUpdated,t),!0)}addEventListener(e,t){switch(Or.enumValues(Yr).includes(e)&&this.logMetrics(fo.EventListenerAdded,e),e){case Yr.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case Yr.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Ju.UPDATE:this.updateEventListener(t);break;case ei.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case ei.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new ys("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,n){return this.eventTarget.dispatchEvent(e,t,(t=>{if(Or.enumValues(ei).includes(e)){var r=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=Zu(e.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!t.isValid)return t;for(var n of e.shippingOptions){if(!(t=Qu({"shippingOptions.total":n.total},{"shippingOptions.total":td})).isValid)return t;if(void 0!==n.taxLineItems&&!(t=Zu(n.taxLineItems,"shippingOptions.taxLineItems",$u)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!r.isValid)throw new vi(r.missingFields);n(t)}else{var i=function(e){var{lineItems:t,discounts:n,taxLineItems:r,shippingLineItems:i,shippingErrors:o,shippingOptions:a,error:s,total:c}=e;if(t){var l=Zu(t,"lineItem",$u);if(!l.isValid)return l}if(n){var u=Zu(n,"discounts",$u);if(!u.isValid)return u}if(r){var d=Zu(r,"taxLineItems",$u);if(!d.isValid)return d}if(i){var p=Zu(i,"shippingLineItems",$u);if(!p.isValid)return p}if(a){var h=Zu(a,"shippingOption",ed);if(!h.isValid)return h}if(c){var f=Qu({total:c},{total:td});if(!f.isValid)return f}if(s&&"string"!=typeof s)return{isValid:!1,missingFields:[["error","string"]]};if(o){var m=Qu(o,nd);if(!m.isValid)return m}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new vi(i.missingFields);n(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setPaymentMetricsHandler(e){this.paymentMetricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[n,r]=t;e.logEvent(n,r)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Yr.SHIPPING_CONTACT_CHANGED,function(){var n=ad((function*(n){var{contactOrOption:r}=n.detail;try{return yield e(r)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return n.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(Yr.SHIPPING_OPTION_CHANGED,function(){var n=ad((function*(n){var{contactOrOption:r}=n.detail;try{return yield e(r)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return n.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(ei.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var n=ad((function*(n){var{contactOrOption:r}=n.detail;try{return yield e(r)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return n.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(ei.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(Ju.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){void 0!==this.paymentMetricsHandler?this.paymentMetricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function ud(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function dd(e){return Qu(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}class pd{constructor(){this.lockSet=new Set}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}get isLocked(){return this.lockSet.size>0}}class hd extends v{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,hd.prototype)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(Xu||(Xu={}));var fd=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(fe.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[n,r]=e;t.searchParams.set(n,r)})),t.toString()}(e);return Ql({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},md=function(e){var t=new(So[e.name]||v);return t.fromSerializedError(e),t},gd=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class yd extends class{constructor(e={}){this.logDevelopmentErrors=!1,this.messageListeners={},this.channel=new class{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(k):this.handleConnecting(e);break;case this.messageWithName(M):this.handleConnected();break;case this.messageWithName(H):this.close();break;case this.messageWithName(F):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=e?`:${e}`:""}close(){this.port&&(this.postMessage(this.messageWithName(H)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new D("message channel is already connected");if(e){if(void 0===e.origin)throw new D("message channel remote.origin must be defined");if(null===e.window)throw new D("message channel remote.window cannot be null");let t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(k),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}set onmessage(e){this.listeners.push(e)}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new D("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(M)),this.connectionEstablished()}handleConnected(){if(this.connected)throw new D("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(F)),this.errorHandler&&this.errorHandler(new D("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}(e.name),this.channel.onmessage=this.handleMessage.bind(this),this.payloadSerializer=e.payloadSerializer,this.errorSerializer=e.errorSerializer,void 0!==e.logDevelopmentErrors&&(this.logDevelopmentErrors=e.logDevelopmentErrors)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let n=t;return void 0!==t&&void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!1,mustRespond:!1,payload:n,type:e})}sendMessage(e,t){let n=t;return void 0!==t&&void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!1,payload:n,type:e})}request(e,t){let n=t;return void 0!==t&&void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.message({id:this.uniqueId(),mustAcknowledge:!0,mustRespond:!0,payload:n,type:e})}respond(e,t){let n=`${e.type}:${E.OK}`,r=t;return void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.postResponse(n,e,r)}reject(e,t){let n=`${e.type}:${E.ERROR}`,r=t;return void 0!==this.errorSerializer&&(r=this.errorSerializer.serialize(t)),this.postResponse(n,e,r)}onMessage(e,t){let n=t||this.uniqueId();return this.addMessageEventListener(e,n),n}connect(e,t){this.iframeID=t,this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){let t=this.messageListeners[e.data.type];e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),Object.values(t).forEach((t=>{t.forEach((t=>{t(e)}))}))):this.logDevelopmentErrors&&console.error(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `):void 0!==this.errorHandler&&this.errorHandler(new U("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){let t=new x(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){let t=this.errorSerializer,n=this.payloadSerializer;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let r,i=()=>{[E.ACK,E.OK,E.ERROR].forEach((t=>{delete this.messageListeners[`${e.type}:${t}`][r]}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((a,s)=>{r=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),a({}))},messageType:`${e.type}:${E.ACK}`}),this.onMessage({listener(e){i();let{payload:t}=e.data;if(void 0!==n){let e=n.deserialize(t);a(e)}else a(t)},messageType:`${e.type}:${E.OK}`},r),this.onMessage({listener(e){i();let{payload:n}=e.data;if(void 0!==t){let e=t.deserialize(n);s(e)}else s(n)},messageType:`${e.type}:${E.ERROR}`},r)}))}acknowledge(e){let t=`${e.type}:${E.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,type:t})}postResponse(e,t,n){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:n,type:e})}message(e){let t=this.handleMessageContract(e);return(!e.type||"undefined"===e.type)&&void 0!==this.errorHandler&&this.errorHandler(new U("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){let{messageType:n,listener:r}=e;this.messageListeners[n]=this.messageListeners[n]||{},this.messageListeners[n][t]=this.messageListeners[n][t]||[],this.messageListeners[n][t].push(r)}uniqueId(){return Date.now().toString()+Math.floor(8e3*Math.random())}}{constructor(e){super({name:e,errorSerializer:{serialize:e=>e instanceof v?gd(e):e,deserialize:e=>e instanceof Error?e:md(e)}})}setErrorLogger(e,t){this.setErrorHandler((function(n,r){var i,o,a,s,c,l;void 0!==r&&(i=null===(a=r.data.payload)||void 0===a||null===(s=a.session)||void 0===s?void 0:s.instanceId,o=null===(c=r.data.payload)||void 0===c||null===(l=c.session)||void 0===l?void 0:l.sessionId),n instanceof x?t.logEvent({event:mo.IframeMessengerTimeoutError,eventSource:_o.App,internalConfigurationValues:n.message},i,o):e.captureException(n,i,o)}))}}function vd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ed(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){vd(o,r,i,a,s,"next",e)}function s(e){vd(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _d(){return(_d=Ed((function*(e,t,n,r,i){var o=new yd(i);return o.setErrorLogger(t,n),o.connect({origin:fe.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage(Ba,r),o}))).apply(this,arguments)}var Ad={build:function(e,t,n,r,i){return _d.apply(this,arguments)}};function Id(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Cd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Id(o,r,i,a,s,"next",e)}function s(e){Id(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Sd(){return(Sd=Cd((function*(e,t,n,r){var{applicationId:i,locationId:o,hostname:a,sourceUrl:s}=e;t.logEvent({event:po.InitializeStart,eventSource:_o.App});var c,l,u=r.getCurrentLocale();try{c=yield fd({applicationId:i,hostname:a})}catch(e){if(t.logEvent({event:po.InitializeError,eventSource:_o.App}),n.captureException(e),e instanceof ue)throw new qi("initializing the payment method");throw e}try{l=yield Ad.build(c,n,t,{applicationId:i,hostname:a,locale:u,locationId:o})}catch(e){if(t.logEvent({event:po.InitializeError,eventSource:_o.App}),n.captureException(e),e instanceof ue)throw new qi("initializing the payment method");throw e}try{var{avt:d,sessionId:p,applePartnerInternalMerchantIdentifier:h,cashAppPayInternalMerchantIdentifier:f,instanceId:m,paymentMethodSupportDetail:g,featureFlagValues:y}=yield l.request(Xu.REQUEST_HYDRATION,{body:{applicationId:i,hostname:a,locationId:o}});t.setAvt(d);var v=new zl({applePayMerchantIdentifier:h,cashAppPayMerchantIdentifier:f,applicationId:i,avt:d,hostname:a,instanceId:m,locale:u,locationId:o,sessionId:p,sourceUrl:s});return t.logEvent({event:po.InitializeOK,eventSource:_o.App,internalConfigurationValues:y},m,p),{featureFlagValues:y,localeStrings:r,messenger:l,paymentMethodSupportDetail:g,session:v}}catch(e){if(t.logEvent({event:po.InitializeError,eventSource:_o.App}),e instanceof ue)throw new qi("initializing the payment method");throw e}}))).apply(this,arguments)}function Od(){return(Od=Cd((function*(e,t,n){var{applicationId:r,locationId:i,sourceUrl:o}=e.serialize();try{var a=yield ss.getToken({applicationId:r,locationId:i,websiteUrl:o});e.setAnalyticsToken(a)}catch(r){r instanceof Mi&&t.captureException(r,e.instanceId,e.sessionId),n&&window.clearInterval(n)}}))).apply(this,arguments)}var Pd,Td={initializeAnalytics:function(e,t,n){return Od.apply(this,arguments)},initializePayment:function(e,t,n,r){return Sd.apply(this,arguments)},validateVerificationDetails:function(e,t){var n=[];return e.billingContact&&"object"==typeof e.billingContact||n.push(new ys(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE"].includes(e.intent)||n.push(new ys(t,"details.intent","string")),"CHARGE"===e.intent&&(e.amount&&"string"==typeof e.amount||n.push(new ys(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||n.push(new ys(t,"details.currencyCode","string"))),n}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Pd||(Pd={}));var Rd,wd={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(n),!0).forEach((function(t){Ld(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ld(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.PENDING="pending",e.FINAL="final"}(Rd||(Rd={}));var Dd={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Ud=["visa","masterCard","jcb","discover","amex"];function xd(e){return{amount:e.amount,label:e.label,type:e.pending?Rd.PENDING:Rd.FINAL}}function Md(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function kd(e,t){return t?xd(t):e}function Hd(e,t){return t?t.map(xd):e}function Fd(e,t){return t?t.map(Md):e}function Bd(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function jd(e){var{addressLines:t,locality:n,administrativeArea:r,postalCode:i,countryCode:o,givenName:a,familyName:s,emailAddress:c,phoneNumber:l}=e;return{addressLines:t,city:n,countryCode:o&&o.toUpperCase(),email:c,familyName:s,givenName:a,phone:l,postalCode:i,state:r}}function qd(e){var{amount:t,identifier:n,label:r}=e;return{amount:t,id:n,label:r}}function Gd(e,t,n){return{errors:(r=e,i=[],r.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",r.error)),r.shippingErrors&&Object.entries(r.shippingErrors).forEach((e=>{var[t,n]=e,r=Dd[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",r,n))})),i),newLineItems:Hd(t.lineItems,rd(e,n)),newShippingMethods:Fd(t.shippingMethods,e.shippingOptions),newTotal:kd(t.total,e.total)};var r,i}function Vd(e,t,n){var r=Gd(e,t,n);return bd({status:window.ApplePaySession.STATUS_SUCCESS},r)}function Yd(e,t,n){return{newLineItems:Hd(t.lineItems,rd(e,n)),newTotal:kd(t.total,e.total)}}function zd(e,t,n){var r=Gd(e,t,n);return bd({status:window.ApplePaySession.STATUS_SUCCESS},r)}function Kd(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Wd(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Kd(o,r,i,a,s,"next",e)}function s(e){Kd(o,r,i,a,s,"throw",e)}a(void 0)}))}}class Qd extends Is{constructor(e,t,n){if(super(t),this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.paymentMethodMessenger=new Ps(this.context),this.paymentRequestLockController=n,this.req=e,void 0===window.ApplePaySession)throw new Ui(ms.APPLE_PAY_BROWSER_NOT_SUPPORTED);if(!window.ApplePaySession.canMakePayments())throw new Ui(ms.APPLE_PAY_DEVICE_NOT_SUPPORTED);this.validateConfiguration()}tokenize(){var e=this;return Wd((function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new bi(Vr.APPLE_PAY);if(e.sessionInProgress)throw new ji([Os]);e.applePayPaymentRequest=function(e,t){var n=[...Ud];null!=t&&t.isActive(Ma.CanUseInterac)&&n.push("interac");var r,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Hd([],rd(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:Fd([],e.shippingOptions),supportedNetworks:n,total:xd(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(r=e.shippingContact).addressLines,administrativeArea:r.state,country:wd[r.countryCode],countryCode:r.countryCode,emailAddress:r.email,familyName:r.familyName,givenName:r.givenName,locality:r.city,phoneNumber:r.phone,postalCode:r.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(Bd(),e.applePayPaymentRequest);var t=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=n=>{t(n.shippingContact,e.applePayPaymentRequest)};var n=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=t=>{n(t.shippingMethod,e.applePayPaymentRequest)};var r=new Promise((t=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(ho.ExternalSessionCancel),e.deleteApplePaySession(),t({status:Ss.CANCEL})}})),i=new Promise(((t,n)=>{e.applePaySession.onvalidatemerchant=function(){var r=Wd((function*(r){try{var i=yield e.requestApplePayMerchantValidity(r.validationURL,e.applePayPaymentRequest);t(i)}catch(e){n(e)}}));return function(e){return r.apply(this,arguments)}}()})),o=new Promise(((t,n)=>{e.applePaySession.onpaymentauthorized=function(){var r=Wd((function*(r){try{var i=yield e.requestApplePayCardNonce(r);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),n(t)}}));return function(e){return r.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(ho.ExternalSessionStart),e.applePaySession.begin();try{var a=yield i;e.applePaySession.completeMerchantValidation(a);var{status:s,token:c,details:l}=yield Promise.race([o,r]);return e.metricsHandler.logEvent(ho.ExternalSessionOK),s===Ss.SUCCESS?{details:l,status:zr.OK,token:c}:{status:zr.CANCEL}}catch(t){throw e.metricsHandler.logEvent(ho.ExternalSessionError),t}}))()}destroy(){return this.metricsHandler.logEvent(fo.Destroyed),this.isDestroyed=!0,this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),Promise.resolve()}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new Ui(ms.INVALID_CONFIG,"applePayMerchantIdentifier");if(!e.locationId)throw new Ui(ms.INVALID_CONFIG,"locationId")}requestApplePayCardNonce(e){var t=this;return Wd((function*(){var n={applepayData:e.payment},r=t.session,i=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var o=yield t.paymentMethodMessenger.request(Pd.REQUEST_APPLE_PAY_CARD_NONCE,n);return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(o.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,yield t.context.updateSession(o.sessionId),function(e,t){var{card:n,cardNonce:r,shippingContact:i,billingContact:o}=e,a={details:{card:n,method:Vr.APPLE_PAY},status:Ss.SUCCESS,token:r};if(i){var s={contact:i};t&&(s.option=qd(t)),a.details.shipping=s}return o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(o,i)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e instanceof ji||t.errorLogger.captureException(e,r.instanceId,r.sessionId),e}}))()}requestApplePayMerchantValidity(e,t){var n=this;return Wd((function*(){var r,i=t&&t.total?t.total.label:null,o=n.session,a={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{r=yield n.paymentMethodMessenger.request(Pd.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,a)}catch(e){throw n.applePaySession.abort(),n.deleteApplePaySession(),e}try{return JSON.parse(r.session)}catch(e){throw n.applePaySession.abort(),n.deleteApplePaySession(),n.errorLogger.captureException(new ue(e.message,Vr.APPLE_PAY),n.session.instanceId,n.session.sessionId),new qi("parsing Apple Pay merchant validity")}}))()}shippingContactChanged(e,t){var n=Bd()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(Yr.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(Yr.SHIPPING_CONTACT_CHANGED,{contactOrOption:jd(e)},(e=>{this.handleShippingContactUpdate(n,e)})):this.handleShippingContactUpdate(n)}handleShippingContactUpdate(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null===(t=n.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===r&&null!==i&&(r=qd(i)),void 0!==r&&this.req.hasEventListener(Yr.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Md(r),this.req.dispatchEvent(Yr.SHIPPING_OPTION_CHANGED,{contactOrOption:r},(t=>{e(Object.assign({},n,t))}))):e(n)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var n=Bd()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(Yr.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(Yr.SHIPPING_OPTION_CHANGED,{contactOrOption:qd(e)},n):n()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Gd(n,e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ho.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Vd(n,e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ho.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r.status,r.newShippingMethods,r.newTotal,r.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Yd(n,e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ho.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(r)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=zd(n,e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(ho.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(r.status,r.newTotal,r.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new ue(e,"Apple Pay"),this.session.instanceId,this.session.sessionId),new qi(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(po.FirstInteraction),this.wasFirstInteractionCalled=!0)}}function Zd(e,t){return Intl.NumberFormat(g.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}var Jd=["PAN_ONLY","CRYPTOGRAM_3DS"],Xd=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];function $d(e){return{label:e.label,price:e.amount,status:e.pending?a.Estimated:a.Final,type:"LINE_ITEM"}}function ep(e,t){var n=null!=t?t:e;return n?n.map((e=>$d(e))):[]}function tp(e,t){return t.map((t=>function(e,t){return{description:Zd(t.amount,e),id:t.id,label:t.label}}(e,t)))}function np(e,t,n,r){var i=null!=r?r:n;if(i&&i.length>0){var o={shippingOptions:tp(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function rp(e,t){return null==t?void 0:t.find((t=>t.id===e))}function ip(e,t,n,r,i,o){var{countryCode:a,currencyCode:s,total:c,lineItems:l,taxLineItems:u,discounts:d,requestBillingContact:p,requestShippingContact:h,shippingOptions:f}=t,m=ud(t),g=Boolean(h||m),y=Object.assign({},e,{emailRequired:Boolean(p),merchantInfo:i,shippingAddressRequired:g,shippingOptionRequired:m,transactionInfo:{countryCode:a,currencyCode:s,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:r}});if(l&&l.length>0&&(y.transactionInfo.displayItems=ep([],rd({lineItems:l,taxLineItems:u,discounts:d},t))),g&&(y.shippingAddressParameters={phoneNumberRequired:!0}),m){var v=np(s,o,[],f);v&&(y.shippingOptionParameters=v)}return n.length>0&&(y.callbackIntents=n),y}function op(e,t){var n=[];return e.error&&n.push({intent:t,message:e.error,reason:Zi.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[r,i]=e;n.push({intent:t,message:"".concat(r,": ").concat(i),reason:Zi.SHIPPING_ADDRESS_INVALID})})),n}function ap(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function sp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ap(o,r,i,a,s,"next",e)}function s(e){ap(o,r,i,a,s,"throw",e)}a(void 0)}))}}var cp,lp,up,dp,pp=["#google"];class hp extends Is{constructor(e,t,n,r,i){var o;super(n),this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.isDestroyed=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=r,this.element=null,this.paymentMethodMessenger=new Ps(n),ud(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var n=[],r=ud(e)&&t.includes(Yr.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(Yr.SHIPPING_CONTACT_CHANGED);return r?n.push(s.SHIPPING_ADDRESS,s.SHIPPING_OPTION):i&&n.push(s.SHIPPING_ADDRESS),(!g.isAndroid()||r||i)&&n.push(s.PAYMENT_AUTHORIZATION),n}(this.req,this.handlers);var a,p,h,f,m=function(e,t,n){var r={environment:fe.GOOGLE_PAY_ENV,merchantInfo:n},i=e.includes(s.SHIPPING_OPTION)||e.includes(s.SHIPPING_ADDRESS);if(!g.isAndroid()||i){var o={onPaymentAuthorized:()=>({transactionState:d.SUCCESS})};i&&(o.onPaymentDataChanged=t),r.paymentDataCallbacks=o}return r}(this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(m),this.isReadyToPayRequest=(a=this.session.applicationId,p=this.req.requestBillingContact,h=this.featureFlagHandler,f=[...Xd],null!=h&&h.isActive(Ma.CanUseInterac)&&f.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:Jd,allowedCardNetworks:f,billingAddressParameters:{format:p?c.FULL:c.MIN,phoneNumberRequired:Boolean(p)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:u.PAYMENT_GATEWAY},type:l.CARD}],apiVersion:2,apiVersionMinor:0})}attach(e,t){var n=this;return sp((function*(){var r,i,o;if(n.isDestroyed)throw new bi(Vr.GOOGLE_PAY);var a=null!==(r=null==t?void 0:t.buttonColor)&&void 0!==r?r:Ki.DEFAULT,s=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:Wi.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Qi.LONG;n.metricsHandler.logEvent(po.AttachStart),n.metricsHandler.logEvent(fo.Configured,t);try{n.element=nu(e)}catch(e){throw n.metricsHandler.logEvent(po.AttachError),e}n.isReadyToPay=yield n.checkIfReadyToPay(po.AttachError);try{var l=n.googlePayClient.createButton({buttonColor:a,buttonSizeMode:s,buttonType:c,onClick:()=>{}});return n.element.appendChild(l),n.metricsHandler.logEvent(po.AttachOK),Promise.resolve()}catch(e){throw n.errorLogger.captureException(e),n.metricsHandler.logEvent(po.AttachError),new Ui(ms.UNKNOWN,e)}}))()}destroy(){return this.metricsHandler.logEvent(fo.Destroyed),this.isDestroyed=!0,this.element&&(this.element.innerHTML=""),Promise.resolve()}tokenize(){var e=this;return sp((function*(){if(e.handleFirstInteraction(),e.isDestroyed)throw new bi(Vr.GOOGLE_PAY);var t;e.metricsHandler.logEvent(ho.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(ho.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(ho.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(ho.ExternalSessionCancel),{status:zr.CANCEL};if(e.metricsHandler.logEvent(ho.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new ue(JSON.stringify(t),Vr.GOOGLE_PAY)),new qi("tokenizing Google Pay.")}var{token:n,details:r}=yield e.requestGooglePayCardNonce(t);return{details:r,status:zr.OK,token:n}}))()}validateConfiguration(){var e=pp.join(", ");if(document.querySelectorAll(e).length>0)throw new Di(Vr.GOOGLE_PAY,e)}checkIfReadyToPay(e){var t=this;return sp((function*(){var n;try{n=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest)}catch(e){t.errorLogger.captureException(new ue('Calling googlePayClient.isReadyToPay threw "'.concat(e,'"'))),n={result:!1}}var r=Boolean(n.result);if(!r)throw e&&t.metricsHandler.logEvent(e),new Ui(ms.GOOGLE_PAY_BROWSER_NOT_SUPPORTED);var i=t.callbackIntents.length>0?a.Unknown:a.Final;return t.googlePayClient.prefetchPaymentData(ip(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}))()}get handlers(){var e=[];return this.req.hasEventListener(Yr.SHIPPING_OPTION_CHANGED)&&e.push(Yr.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(Yr.SHIPPING_CONTACT_CHANGED)&&e.push(Yr.SHIPPING_CONTACT_CHANGED),e}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(ip(this.isReadyToPayRequest,this.req,this.callbackIntents,a.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case s.INITIALIZE:case s.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case s.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new ue("Unknown callbackTrigger: ".concat(e.callbackTrigger))),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return sp((function*(){var n;t.selectedShippingOptionId=null===(n=e.shippingOptionData)||void 0===n?void 0:n.id;var{updatedOptionRequest:r,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(r,i)}))()}dispatchShippingOptionChanged(e,t){var n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(Yr.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var r=rp(e,t);return r?this.isDestroyed?Promise.resolve({optionErrors:[{intent:s.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Zi.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(Yr.SHIPPING_OPTION_CHANGED,{contactOrOption:r},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e({optionErrors:op(t,s.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return sp((function*(){var{updatedContactRequest:n,contactErrors:r}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(n,r);var i,o=t.shippingOptions;void 0!==n.shippingOptions?(o=n.shippingOptions,t.selectedShippingOptionId=n.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:a,optionErrors:s}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},n,a),l=[...r,...s];return t.paymentDataChangedComplete(c,l)}))()}dispatchShippingContactChanged(e){var t={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var r;void 0!==e.shippingAddress&&this.handlers.includes(Yr.SHIPPING_CONTACT_CHANGED)?this.isDestroyed?n({contactErrors:[{intent:s.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Zi.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):this.req.dispatchEvent(Yr.SHIPPING_CONTACT_CHANGED,{contactOrOption:(r=e.shippingAddress,{city:r.locality,countryCode:r.countryCode,postalCode:r.postalCode,state:r.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n({contactErrors:op(e,s.SHIPPING_ADDRESS),updatedContactRequest:e})})):n(t)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var n=function(e,t,n,r){var i,{total:o,countryCode:a,currencyCode:s}=t,c=n,l=$d(null!==(i=e.total)&&void 0!==i?i:o),u={totalPrice:l.price,totalPriceLabel:l.label,totalPriceStatus:l.status},d=Object.assign({},{countryCode:a,currencyCode:s},u),p=ep(rd(t),rd(e,t));p.length>0&&(d.displayItems=p);var h={newTransactionInfo:d},f=np(s,r,c,e.shippingOptions);return f&&(h.newShippingOptionParameters=f),h}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(n.error=t[0]),n}requestGooglePayCardNonce(e){var t=this;return sp((function*(){var n=t.session,r=rp(t.selectedShippingOptionId,t.shippingOptions);try{var i=yield t.paymentMethodMessenger.request(_s.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),yield t.context.updateSession(i.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:n,cardNonce:r,shippingContact:i,billingContact:o}=e,a={details:{card:n,method:Vr.GOOGLE_PAY},token:r};return i&&(a.details.shipping={contact:i},t&&(a.details.shipping.option=t)),o&&(a.details.card&&(a.details.card.billing=o),a.details.billing=o),a}(i,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof ji||t.errorLogger.captureException(e,n.instanceId,n.sessionId),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(po.FirstInteraction))}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(cp||(cp={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(lp||(lp={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(up||(up={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(dp||(dp={}));var fp="sq-afterpay-styles",mp={[Kr.BLACK]:{[Wr.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Wr.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Wr.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Kr.MINT]:{[Wr.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Wr.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Wr.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},gp={[Kr.BLACK]:{[Wr.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Wr.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Wr.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Kr.MINT]:{[Wr.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Wr.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Wr.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},yp=new Set(["US","CA","AU","NZ"]);function vp(e,t){var n=0;return e.forEach((e=>{n+=Or.paymentRequestAmountToMoneyAmount(e,t)})),Or.moneyAmountToPaymentRequestAmount(n,t)}function Ep(e,t){return vp(e.map((e=>e.amount)),t)}var _p=function(e,t){return e.map((e=>({name:e.label,quantity:1,sku:e.id,price:{amount:e.amount,currency:t},imageUrl:e.imageUrl,pageUrl:e.productUrl})))},Ap=function(e,t){return e.map((e=>({displayName:e.label,amount:{amount:e.amount,currency:t}})))},Ip=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Cp=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=Ep(e.lineItems,e.currencyCode);if(e.discounts)t=vp([t,(n=e.discounts,r=e.currencyCode,"-".concat(Ep(n,r)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var n,r;return{amount:e.total.amount,currency:e.currencyCode}},Sp=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,shippingAmount:{amount:e.amount,currency:t.currencyCode},orderAmount:{amount:e.total.amount,currency:t.currencyCode},taxAmount:{amount:Ep(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},Op=function(e){var t,n,r=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&r.push(e)})),e.name&&([t,n]=e.name.split(/\s(?=\S+$)/)),{givenName:t,familyName:n,city:e.suburb,state:e.state,postalCode:e.postcode,countryCode:e.countryCode,phone:e.phoneNumber,addressLines:r}},Pp=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function Tp(e,t){return Qu({[t]:e},{[t]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}var Rp=function(e){return Tp(e,"shippingContact")};function wp(e){var t=e.split("-")[1];return yp.has(t)}var Np,bp=function(e,t){return wp(t)?mp[e]:gp[e]},Lp=function(e){return wp(e)?"afterpay-brand.svg":"clearpay-brand.svg"},Dp=[ji];!function(e){e.UNKNOWN="UNKNOWN",e.UNAUTHORIZED="UNAUTHORIZED",e.TRANSACTION_LIMIT="TRANSACTION_LIMIT",e.UNSUPPORTED_CURRENCY="UNSUPPORTED_CURRENCY"}(Np||(Np={}));var Up=[di,pi];function xp(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var Mp=[25,50,75,100];class kp{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var n=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(n),"4 ".concat(n),"6 ".concat(n)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(Ju.UPDATE,(()=>{this.update()}))}attach(e,t){var n,r=this;return(n=function*(){r.element=e,iu.addStyleElement(fe.AFTERPAY_STYLES,fp,r.resolveStylePromise,r.rejectStylePromise);try{yield r.stylesLoadedPromise}catch(e){throw new qi("attaching the Afterpay Checkout Widget")}var n=r.buildAmounts().map((e=>Or.moneyAmountToInternationalizedCurrency(e,r.currencyCode,r.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=Lp(r.locale),a='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(fe.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(r.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(n.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,n=2*Math.PI*6,r=n*Mp[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(r," ").concat(n,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(r.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");r.element.insertAdjacentHTML("afterbegin",a),r.attached=!0},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){xp(o,r,i,a,s,"next",e)}function s(e){xp(o,r,i,a,s,"throw",e)}a(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=Lp(this.locale);e.src=fe.STATIC_ASSET(t)}this.buildAmounts().map((e=>Or.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var n,r=null===(n=this.element)||void 0===n?void 0:n.querySelector("#ap-payment-amount-".concat(t));r&&(r.innerHTML=e)}))}}buildAmounts(){var e=Or.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return Hp(t,0);case 1:return Hp(t,1);case 2:return Hp(t,-2);case 3:return Hp(t,-1);default:return[]}}}function Hp(e,t){var n=Array.from({length:3}).fill(Math.round(e));return n.push(e+t),n}function Fp(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Bp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Fp(o,r,i,a,s,"next",e)}function s(e){Fp(o,r,i,a,s,"throw",e)}a(void 0)}))}}var jp,qp,Gp=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),Vp=new Set(["AUD","GBP","USD","CAD","EUR"]),Yp={[Kr.BLACK]:"#000",[Kr.MINT]:"#b2fce4"};class zp extends Is{constructor(e,t,n,r,i){if(super(r),this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.isDestroyed=!1,this.isAttached=!1,this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=n,this.paymentRequestLockController=i,this.paymentMessenger=new Ps(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new Ui(ms.INVALID_CONFIG,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{this.checkoutToken=void 0,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()})),this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e,t){var n=this;return Bp((function*(){if(n.isDestroyed)throw new bi("Afterpay");if(n.element)throw new wi("Afterpay");var r,i;n.metricsHandler.logEvent(po.AttachStart),n.metricsHandler.logEvent(fo.Configured,t);try{r=nu(e)}catch(e){throw n.metricsHandler.logEvent(po.AttachError),e}if(!t||!t.useCustomButton){iu.addStyleElement(fe.AFTERPAY_STYLES,fp,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new qi("attaching Afterpay")}var o=(null==t?void 0:t.buttonColor)||Kr.BLACK,a=(null==t?void 0:t.buttonType)||Wr.BuyNowWithAfterpay,s=bp(o,n.session.locale);if(!s)throw new Pi("buttonColor",o);var c=s[a];if(!c)throw new Pi("buttonType",a);var l='\n        <button\n          type="button"\n          class="sq-ap__button"\n          style="\n            background-color: '.concat(Yp[o],";\n            background-image: url(").concat(fe.STATIC_ASSET(c),');\n          "\n        ></button>\n      ');r.insertAdjacentHTML("afterbegin",l)}return n.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Qr.BUY_NOW,n.initializeAfterpayPopup(r),n.metricsHandler.logEvent(po.AttachOK),n.element=r,n.isAttached=!0,n.onTokenizeHandlerAdded&&(null===(i=n.element)||void 0===i||i.addEventListener("click",Bp((function*(){yield n.openPaymentModal()})))),Promise.resolve()}))()}attachMessaging(e,t){if(this.isDestroyed)throw new bi("Afterpay");return function(e){eu(e,Xl)}(e),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size}}),Promise.resolve()}attachCheckoutWidget(e,t){var n=this;return Bp((function*(){if(!Vp.has(n.req.currencyCode))throw new mi("Currency is not supported by Afterpay. Valid currencies are: ".concat([...Vp].join(", ")));var r=new kp(n.req,n.context),i=nu(e);yield r.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Or.convertLocaleToUnderscore(this.session.locale);Gp.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,n=this;if(this.isDestroyed)throw new bi("Afterpay");this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:n}=e;this.emitTokenizationResult(t,n)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",Bp((function*(){yield n.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return Bp((function*(){if(!e.isAttached)throw new Ni("Afterpay");if(e.isDestroyed)throw new bi("Afterpay");if(e.onTokenizeHandlerAdded)throw new li;var t,n,r=new Promise(((e,r)=>{t=e,n=r}));return e.onTokenizeCallbacks=[function(e,r){void 0===r?void 0!==e?t(e):n(new ji([xr.UNKNOWN])):n(r)}],yield e.openPaymentModal(),r}))()}destroy(){return this.isDestroyed=!0,this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],Promise.resolve()}internalSetCheckoutToken(){var e=this;return Bp((function*(){try{var t=yield e.paymentMessenger.request(dp.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutToken=t.token,e.checkoutToken}catch(t){var n=t;throw Or.isInstanceOf(t,[...Up,yi,mi])||(e.errorLogger.captureException(t,e.session.instanceId,e.session.sessionId),n=new qi("tokenizing with Afterpay")),n}}))()}commenceCheckout(e){var t=this;return Bp((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent(po.FirstInteraction)),t.metricsHandler.logEvent(ho.ExternalSessionStart),t.paymentRequestLockController.lock(t),void 0===t.checkoutToken)try{var n=yield t.internalSetCheckoutToken();e.resolve(n)}catch(n){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent(ho.ExternalSessionError),t.emitTokenizationResult(void 0,n),e.reject(n.message)}else e.resolve(t.checkoutToken)}))()}completeCheckout(e){var t=this;return Bp((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var n,r=yield t.paymentMessenger.request(dp.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.context.updateSession(r.sessionID),t.metricsHandler.logEvent(ho.ExternalSessionOK);var i={details:{method:Vr.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==r||null===(n=r.afterpayData)||void 0===n?void 0:n.email}}},status:zr.OK,token:r.token};null!=r&&r.billingContact&&(i.details.billing=null==r?void 0:r.billingContact),null!=r&&r.shippingContact&&(i.details.shipping={contact:null==r?void 0:r.shippingContact}),t.emitTokenizationResult(i)}else t.metricsHandler.logEvent(ho.ExternalSessionCancel),t.emitTokenizationResult({status:zr.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent(ho.ExternalSessionError),Or.isInstanceOf(e,Dp)||(t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),o=new qi("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent(ho.ShippingOptionChangeOK),this.total.amount=Or.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(ei.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:Pp(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(ei.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new ui("PaymentRequest",ei.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(cp.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var n=this.req;this.metricsHandler.logEvent(ho.ShippingAddressChangeOK),this.req.dispatchEvent(ei.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Op(e)},(e=>{if(e.error)t.reject(cp.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(cp.SHIPPING_ADDRESS_UNRECOGNIZED);else{var r=Sp(e,n);t.resolve(r)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:t}):this.onTokenizeCallbacks.forEach((n=>{n(e,t)}))}buildInstantWalletTokenPayload(e,t){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:fe.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,t={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Cp(this.req)};if(this.req.lineItems&&(t.items=_p(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=Ap(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact)e=this.req.shippingContact;else{if(void 0===this.req.pickupContact)throw new mi("Pickup contact is required when not requesting the shipping contact");e=this.req.pickupContact}if(void 0!==e){var n=Rp(e);if(!n.isValid)throw new yi(n.missingFields);t.shipping=Ip(e)}return t}totalMoney(){return{amount:Or.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return Bp((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,n)=>{e.commenceCheckout({resolve:t,reject:n})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),n=this.completeCheckout.bind(this),r=document.createElement("div");r.id="sq-afterpay-dummy-element-".concat(As()),r.style.visibility="hidden",e.appendChild(r),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact};var i,o,a={countryCode:this.req.countryCode,onCommenceCheckout:(o=Bp((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=Bp((function*(e){var{data:t}=e;yield n(t)})),function(e){return i.apply(this,arguments)}),target:"#".concat(r.id),shippingOptionRequired:this.req.requestShippingContact};this.req.requestShippingContact?(a.onShippingAddressChange=this.onShippingAddressChange.bind(this),a.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.transferOptions.pickup=!0,this.afterpayLibrary.initializeForPopup(a),e.removeChild(r)}}class Kp extends v{constructor(e){var t=e.map((e=>{var[t,n]=e;return'expected property: "'.concat(t,'" of type "').concat(n,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,Kp.prototype)}}class Wp extends v{constructor(e){var t=e.map((e=>{var[t,n]=e;return'accepted property: "'.concat(t,'" values are "').concat(n,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,Wp.prototype)}}class Qp extends v{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Qp.prototype)}}!function(e){e.BEFORE_MOBILE_REDIRECT="BEFORE_MOBILE_REDIRECT",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.QR_CODE_SHOWN="QR_CODE_SHOWN"}(jp||(jp={}));class Zp extends v{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,Zp.prototype)}}class Jp extends v{constructor(){super("A redirect url is always required for requests. This must also be a secure link. See here: https://developers.cash.app/docs/pay-kit-technical-reference"),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,Jp.prototype)}}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eh(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function th(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){eh(o,r,i,a,s,"next",e)}function s(e){eh(o,r,i,a,s,"throw",e)}a(void 0)}))}}!function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(qp||(qp={}));var nh=new Set(["USD"]);class rh extends Is{constructor(e,t,n,r,i){if(super(r),this.attached=!1,this.destroyed=!1,this.cashAppPayElementId="cash_app_pay_v1_element",this.eventBuffer=[],this.CashAppPayInstance=e,this.req=t,this.context=r,this.paymentRequestLockController=i,this.element=void 0,this.options=n,this.paymentMessenger=new Ps(this.context),!this.session.locationId)throw new Ui(ms.INVALID_CONFIG,"locationId");if(this.locationId=this.session.locationId,!this.session.cashAppPayMerchantIdentifier)throw new Ui(ms.INVALID_CONFIG,"merchantId");if(this.merchantId=this.session.cashAppPayMerchantIdentifier,!nh.has(this.req.currencyCode))throw new Zp("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...nh].join(", ")));if(!n.redirectURL)throw new Jp;var o=this.createCustomerRequestDetails();this.customerRequestCreated=e.customerRequest(o),this.CashAppPayInstance.addEventListener(jp.CUSTOMER_REQUEST_APPROVED,(e=>this.customerRequestApprovedEvent(e))),this.CashAppPayInstance.addEventListener(jp.CUSTOMER_REQUEST_DECLINED,(e=>this.customerRequestDeclinedEvent(e))),this.CashAppPayInstance.addEventListener(jp.BEFORE_MOBILE_REDIRECT,(()=>this.registerExternalEventStart())),this.CashAppPayInstance.addEventListener(jp.QR_CODE_SHOWN,(()=>this.registerExternalEventStart()))}attach(e,t){var n=this;return th((function*(){if(n.destroyed)throw new bi("Cash App Pay");if(n.attached)throw new wi("Cash App Pay");var r=function(e){if(void 0===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){ta.has(e)&&(t[e]="string")})),Qu(e,t)}(t);if(!r.isValid)throw new Kp(r.missingFields);var i=function(e){var t=[],n=!0;if(void 0===e)return{isValid:n,missingFields:t};var r={shape:fa,size:ha,values:ma,width:ga},i=JSON.parse(Aa(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===zo&&(n=!1,t.push([i,[...r[i]].join(",")]))})),{isValid:n,missingFields:t}}(t);if(!i.isValid)throw new Wp(i.missingFields);n.metricsHandler.logEvent(po.AttachStart),t&&n.metricsHandler.logEvent(fo.Configured,t),n.attached=!0,n.element=tu(e);try{var o=document.createElement("div");o.id=n.cashAppPayElementId,n.element.appendChild(o);var a="#".concat(n.cashAppPayElementId);yield n.CashAppPayInstance.render(a,{button:t}),n.metricsHandler.logEvent(po.AttachOK)}catch(e){throw n.metricsHandler.logEvent(po.AttachError),n.attached=!1,e}return Promise.resolve()}))()}destroy(){if(this.destroyed)throw new bi("Cash App Pay");if(!this.attached)throw new Ni("Cash App Pay");return this.destroyed=!0,this.metricsHandler.logEvent(fo.Destroyed),this.element&&(this.element.innerHTML=""),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(fo.EventListenerAdded,e),super.addEventListener(e,t),this.eventBuffer.length>0&&(this.eventBuffer.forEach((e=>super.dispatchEvent(e.type,e.detail))),this.eventBuffer=[])}removeEventListener(e,t){super.removeEventListener(e,t)}createCustomerRequestDetails(){var{amount:e}=this.req.total,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){$p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({actions:{payment:{amount:{currency:this.req.currencyCode,value:Or.paymentRequestAmountToMoneyAmount(e,this.req.currencyCode)},currency:this.req.currencyCode,merchantId:this.merchantId}}},this.options);return t}customerRequestApprovedEvent(e){var t=()=>super.hasEventListener,n=()=>super.dispatchEvent,r=this;return th((function*(){var i=yield r.createNonce(e);t().call(r,"ontokenization")?n().call(r,"ontokenization",{tokenResult:i}):r.eventBuffer.push(new Gi("ontokenization",i))}))()}customerRequestDeclinedEvent(e){var t={status:zr.CANCEL};this.metricsHandler.logEvent(ho.ExternalSessionCancel),super.hasEventListener("ontokenization")?super.dispatchEvent("ontokenization",{tokenResult:t}):this.eventBuffer.push(new Gi("ontokenization",t))}createNonce(e){var t=this;return th((function*(){var{customerProfile:n,grants:r,referenceId:i}=e,o=n.cashtag,a=r.payment,s=t.req.total.amount,c=t.req.currencyCode;try{if(!a)throw new Qp;var l=yield t.paymentMessenger.request(qp.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload({amount:s,currency:c},o,a,i));return t.context.updateSession(l.sessionID),t.metricsHandler.logEvent(ho.ExternalSessionOK),{details:{method:"Cash App Pay"},status:zr.OK,token:l.token}}catch(e){var u=e;return t.metricsHandler.logEvent(ho.ExternalSessionError),Or.isInstanceOf(e,[ji])||(t.errorLogger.captureException(e,t.session.instanceId,t.session.sessionId),u=new qi("tokenizing CashAppPay")),{status:zr.ERROR,errors:[u]}}}))()}buildInstantWalletTokenPayload(e,t,n,r){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,clientID:this.session.applicationId,locationID:this.locationId,sessionID:this.session.sessionId,websdkVersion:fe.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,applicationId:this.session.applicationId,cashAppPayData:{referenceId:r,grantId:n.grantId,cashtag:t,totalAmount:{amount:e.amount,currency:e.currency}}}}registerExternalEventStart(){this.metricsHandler.logEvent(ho.ExternalSessionStart)}}var ih=function(e,t,n,r,i){return new zp(e,t,n,r,i)},oh=function(e,t,n){return new Qd(e,t,n)},ah=function(e,t,n,r,i){return new rh(e,t,n,r,i)},sh=function(e,t,n,r,i){return new hp(e,t,n,r,i)};function ch(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function lh(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ch(o,r,i,a,s,"next",e)}function s(e){ch(o,r,i,a,s,"throw",e)}a(void 0)}))}}function uh(e,t){var{paymentMethodSupportDetail:n,metricsHandler:r}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new Ui(ms.INVALID_CONFIG,"locationId");if(n&&n[e]&&!n[e].IsSupported){var{UnsupportedReasonType:o}=n[e],a=ms.UNKNOWN;throw o&&o in fs&&(a=gs[o]),r.logEvent(po.BuildError),new Ui(a)}}function dh(e,t){if(!(e instanceof ld))throw t.metricsHandler.logEvent(po.BuildError),new yi([["paymentRequest","PaymentRequest"]])}function ph(){return(ph=lh((function*(e,t){return{authJwt:(yield e.request(_s.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:fe.GOOGLE_PAY_MERCHANT_ID}}))).apply(this,arguments)}class hh{constructor(e,t,n){this.localeStrings=new Yo(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=n,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return lh((function*(){try{var n=yield t.getPaymentContext(_o.App);if(!n.featureFlagHandler.isActive(Ma.CanUseOverrideStrings))throw new xi("overrideStrings");n.metricsHandler.logEvent(fo.OverrideStrings,e),n.setTranslationOverrides(e)}catch(e){if(e instanceof ue)throw t.errorLogger.captureException(e),new qi("overriding the strings");throw e}}))()}setLocale(e){var t=this;return lh((function*(){try{var n=yield t.getPaymentContext(_o.App);return n.metricsHandler.logEvent(fo.SetLocale,e),n.setLocale(e)}catch(e){if(e instanceof ue)throw t.errorLogger.captureException(e),new qi("setting the locale");throw e}}))()}verifyBuyer(e,t){var n=this;return lh((function*(){var r=[];if(n.paymentOptions.locationId&&0!==n.paymentOptions.locationId.length||r.push(new ys("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||r.push(new ys("verifyBuyer","source","string")),t&&"object"==typeof t?r.push(...Td.validateVerificationDetails(t,"verifyBuyer")):r.push(new ys("verifyBuyer","details","object")),r.length>0)throw new vs(r);var i=yield n.getPaymentContext(_o.App);try{i.metricsHandler.logEvent(po.VerificationStart);var o=yield ss.verifyBuyer({applicationId:n.paymentOptions.applicationId,locationId:n.paymentOptions.locationId,websiteUrl:n.paymentOptions.sourceUrl},e,t);return i.metricsHandler.logEvent(po.VerificationOK),o}catch(e){if(i.metricsHandler.logEvent(po.VerificationError),e instanceof Mi)throw n.errorLogger.captureException(e),e;throw new Ci(e)}}))()}card(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.Card);n.metricsHandler.logEvent(po.BuildStart);try{var r=new fu(n,e);return n.metricsHandler.logEvent(po.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}paymentRequest(e){var t=new pd,n=new ld(e,this.localeStrings,t);return this.paymentRequestLockMap.set(n,t),this.getPaymentContext(_o.PaymentRequest).then((t=>{var{metricsHandler:r}=t;n.setPaymentMetricsHandler(r),r.logEvent(fo.Configured,e)})),n}googlePay(e){var t=this;return lh((function*(){var n,r,i=yield t.getPaymentContext(_o.GooglePay);i.metricsHandler.logEvent(po.BuildStart),uh(La.GOOGLE_PAY,i),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(po.BuildError),new Ui(ms.GOOGLE_PAY_BROWSER_NOT_SUPPORTED)}(i),dh(e,i);try{var o=function(e,t){return ph.apply(this,arguments)}(i.messenger,i.getSession()),a=$a();[n,r]=yield Promise.all([a,o])}catch(e){throw i.metricsHandler.logEvent(po.BuildError),e}try{var s=t.getPaymentRequestLock(e),c=sh(n,e,i,r,s);return i.metricsHandler.logEvent(po.BuildOK),c}catch(e){throw i.metricsHandler.logEvent(po.BuildError),e}}))()}applePay(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.ApplePay);n.metricsHandler.logEvent(po.BuildStart),uh(La.APPLE_PAY,n),dh(e,n);try{var r=t.getPaymentRequestLock(e),i=oh(e,n,r);return n.metricsHandler.logEvent(po.BuildOK),i}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}ach(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.Ach);n.metricsHandler.logEvent(po.BuildStart),uh(La.ACH,n),e&&e.redirectURI&&e.transactionId||(n.metricsHandler.logEvent(po.AchMissingRequiredOAuthParameters),console.warn("Missing required OAuth parameters: Chase, Wells Fargo, and Capital One will no longer be available after February 15th, 2022 if these parameters are not provided"));try{var r=yield es();return n.metricsHandler.logEvent(po.BuildOK),new Gs(r,n,e)}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}cashApp(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.CashApp);n.metricsHandler.logEvent(po.BuildStart),uh(La.CASH_APP,n);try{var r=new Uu(n,e);return n.metricsHandler.logEvent(po.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}alipay(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.Alipay);n.metricsHandler.logEvent(po.BuildStart),uh(La.ALIPAY,n);try{var r=new Ys(n,e);return n.metricsHandler.logEvent(po.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}giftCard(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.GiftCard);n.metricsHandler.logEvent(po.BuildStart);try{var r=new Gu(n,e);return n.metricsHandler.logEvent(po.BuildOK),r}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}afterpayClearpay(e){var t=this;return lh((function*(){var n=yield t.getPaymentContext(_o.Afterpay);if(n.metricsHandler.logEvent(po.BuildStart),!n.featureFlagHandler.isActive(Ma.CanUseBNPLA))throw n.metricsHandler.logEvent(po.BuildError),new hd;uh(La.AFTERPAY,n),dh(e,n);try{var r=t.getPaymentRequestLock(e),[i,o]=yield Promise.all([Qa(),Za()]),a=ih(i,o,e,n,r);return yield a.internalSetCheckoutToken(),n.metricsHandler.logEvent(po.BuildOK),a}catch(e){throw n.metricsHandler.logEvent(po.BuildError),e}}))()}cashAppPay(e,t){var n=this;return lh((function*(){var r=yield n.getPaymentContext(_o.CashAppPayV1);r.metricsHandler.logEvent(po.BuildStart),uh(La.CASH_APP_PAY_V1,r),dh(e,r);try{var i=n.getPaymentRequestLock(e),o=yield Xa(),a=fe.CASH_APP_PAY_CLIENT_ID,s=yield o.pay({clientId:a}),c=ah(s,e,t,r,i);return r.metricsHandler.logEvent(po.BuildOK),c}catch(e){throw r.metricsHandler.logEvent(po.BuildError),e}}))()}getPaymentContext(e){var t=this;return lh((function*(){var{featureFlagValues:n,messenger:r,session:i,paymentMethodSupportDetail:o}=yield t.initializePaymentMethod();i.avt&&t.errorLogger.setAvt(i.avt);var a=As(),s=new class{constructor(e,t,n,r){this.metricsLogger=e,this.eventSource=n,this.session=t,this.paymentMethodTrackingId=r}logEvent(e,t){var n={event:e,eventSource:this.eventSource};void 0!==t&&(n.eventConfigurationValues=t);var{instanceId:r,sessionId:i,paymentsUIInstanceId:o}=this.session.serialize();return this.metricsLogger.logEvent(n,r,i,this.paymentMethodTrackingId,o)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}(t.metrics,i,e,a);t.setAnalytics(i),t.contextEventTarget||(t.contextEventTarget=new Es);var c=new ds(t.errorLogger,r,s,i,o,t.localeStrings,t.contextEventTarget,n);if(!c.featureFlagHandler.isActive(Ma.CanUseWebSDK))throw new rr;return c}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Td.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var t=this.analyticsInterval=window.setInterval((()=>{Td.initializeAnalytics(e,this.errorLogger,t)}),rs);Td.initializeAnalytics(e,this.errorLogger,t)}}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var n=new qi("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(n),n}return t}}var fh=fe.ENABLE_ERROR_LOGGING,mh=fe.env,gh=new Map;window.Square={errors:Oo,payments:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,"-").concat(t);if(gh.has(n))return gh.get(n);if(!sr(g.windowLocation))throw new Ri;if(!g.isSupported())throw new Ti;pr(e);var r=new Dr({applicationId:e,applicationUrl:window.location.origin,enableErrorLogging:fh,environment:mh,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:fe.VERSION}),i=g.windowLocation.hostname,o=g.windowLocation.origin,a={applicationId:e,hostname:i,locationId:t,sourceUrl:o},s=new xa(r,{applicationId:e,hostname:i,locationId:t});s.logEvent({event:po.LoadOK,eventSource:_o.App});var c=new hh(a,s,r);return gh.set(n,c),c}}})()})();
