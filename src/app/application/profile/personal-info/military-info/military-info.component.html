
<div class="box-group form-box" [ngClass]="viewType">
  <form [formGroup]="childForm" (submit)="submit()">
    <div *ngFor="let question of formQuestions; let i = index">
      <div *ngIf="hasCoApplicant(); else applicantOnly">
            <div class="yes-no-question" data-cy="activeDutyMilitary">
              <label
                ><span class="txt tev-text">{{
                  question.question
                }}</span></label
              >
              <tev-yes-no-input
                [formControlName]="question.mainField"
                (change)="updateValidators(question.mainField)"
                #mainField
                style="color: #4D445A"
              ></tev-yes-no-input>
              <div class="invalid-feedback">
                {{ getError(question.mainField) }}
              </div>
        </div>
        <!-- ./py-4 px-5 -->

        <div *ngIf="mainField.value === 'yes'" class="box-group__row">
          <h4 class="text-uppercase txt-xs font-weight-bold mb-0">
            Which one of both?
          </h4>

          <div class="px-4">
            <div style="text-align: center;"
              class="form-group"
              formGroupName="{{ question.mainField }}Answers"
            >
              <div
                class="switch switch-sm"
                *ngFor="let answer of question.fields"
              >
                <mat-checkbox
                  [formControlName]="answer.key"
                  id="{{ question.mainField + '-' + answer.key }}"
                  >{{ answer.name }}</mat-checkbox
                >
              </div>
            </div>
            <div class="invalid-feedback">
              {{ getError(question.mainField + 'Answers') }}
            </div>
          </div>
        </div>
      </div>

      <ng-template #applicantOnly>
        <div class="form-group closed-question">
          <div class="closed-question__body" data-cy="activeDutyMilitary">
            <label
              ><span class="txt tev-text">{{ question.question }}</span></label
            >
            <tev-yes-no-input
              #mainOnlyValue
              [formControlName]="question.mainField"
              (change)="
                setGroupValues(
                  question.mainField,
                  mainOnlyValue.value === 'yes'
                )
              "
            ></tev-yes-no-input>
            <div class="invalid-feedback">
              {{ getError(question.mainField) }}
            </div>
          </div>
        </div>
      </ng-template>
    </div>
  </form>
</div>
