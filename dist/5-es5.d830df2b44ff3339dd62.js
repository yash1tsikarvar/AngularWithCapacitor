function _classCallCheck(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function _createClass(l,e,n){return e&&_defineProperties(l.prototype,e),n&&_defineProperties(l,n),l}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1GiJ":function(l,e,n){"use strict";var t=n("8Y7J");n("GkbY"),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u}));var i=t["\u0275crt"]({encapsulation:0,styles:[[".message-whit-icon[_ngcontent-%COMP%]   .gifimg[_ngcontent-%COMP%]{display:block;border-radius:50%;margin:10% auto;width:25%}.message-whit-icon[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:24px;text-align:center;font-weight:700;padding:5% 20%}.message-whit-icon[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{font-size:14px;text-align:center;padding:5% 15%}"]],data:{}});function u(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","message-whit-icon"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","gif-with-icon"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["class","img-responsive img-circle gifimg"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),(l()(),t["\u0275eld"](5,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](6,null,["",""])),(l()(),t["\u0275eld"](7,0,null,null,1,"div",[["class","small-text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](8,null,[""," "]))],null,(function(l,e){var n=e.component;l(e,2,0,n.img,n.altText),l(e,4,0,n.text),l(e,6,0,n.subError),l(e,8,0,n.smallText)}))}},"3KOM":function(l,e,n){"use strict";n.d(e,"a",(function(){return u}));var t=n("1G5W"),i=(n("5+vj"),n("XNiG")),u=function(){function l(e){_classCallCheck(this,l),this.uiService=e,this.destroyed$=new i.a,this.website=location.origin}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"listenToThemeValues",value:function(){var l=this;this.uiService.smallLogo$.pipe(Object(t.a)(this.destroyed$)).subscribe((function(e){l.smallLogo=e||"/assets/tenant-ev-logo-service.svg"}))}}]),l}()},"5ezu":function(l,e,n){"use strict";n.d(e,"a",(function(){return t})),n("MMCy"),n("3KOM");var t=function l(){_classCallCheck(this,l)}},"6Y63":function(l,e,n){"use strict";var t=n("8Y7J"),i=n("FiUn"),u=n("xYRW"),o=n("zIYY"),r=n("qmNA"),a=n("Dc3C"),s=n("XkoZ"),d=n("1GiJ"),c=n("GkbY"),h=n("0Wmm"),p=n("f2f4"),f=n("WBWa"),m=n("s7LF"),v=n("5+vj"),g=n("bUwk"),b=n("SVse"),w=n("VsP1"),k=n("QvIX"),y=n("MMCy"),x=n("iInd");n.d(e,"a",(function(){return B}));var R=t["\u0275crt"]({encapsulation:2,styles:[[".awesome-item{width:100%;top:5%!important;left:0}.small-text{font-size:14px}.mat-form-field{width:100%}.upload-white{background-color:#fff;color:#000!important}tev-uploading-message .uploading{padding:0!important}.mobile{height:100vh;padding:10%;color:#fff}.mobile h1{margin-bottom:10px}.mobile h1 img{width:25%;padding-bottom:20px;float:left}.mobile h2{float:left;text-align:left;padding-bottom:10%}.mobile .img-icon{display:block;margin-left:auto;margin-right:auto;width:60%;padding-top:5%;padding-bottom:10%}.mobile .highlighted-blue{color:#2196f3;font-weight:700}.mobile .btn-blue{width:100%;margin-left:auto;margin-right:auto}.mobile input[type=file]{display:none}.mobile mat-form-field{width:100%}"]],data:{}});function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","finish-upload"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-awesome-message",[],null,[[null,"closePopup"]],(function(l,e,n){var t=!0;return"closePopup"===e&&(t=!1!==l.component.closeUploadFinish()&&t),t}),i.b,i.a)),t["\u0275did"](2,49152,null,0,u.a,[],{auto_closeable:[0,"auto_closeable"],message:[1,"message"],additionalText:[2,"additionalText"],buttonText:[3,"buttonText"],autoCloseTime:[4,"autoCloseTime"]},{closePopup:"closePopup"})],(function(l,e){var n=e.component;l(e,2,0,!1,n.textFinal,n.additionalText,"",105)}),null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,4,"h2",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Take a picture of the "])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","highlighted-blue"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),(l()(),t["\u0275ted"](-1,null,[" of your ID"])),(l()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Make sure your document is readable and well lit. No photocopies."])),(l()(),t["\u0275eld"](10,0,null,null,1,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,0,"img",[["alt","upload image from mobile"],["class","img-icon"]],[[8,"src",4]],null,null,null,null))],null,(function(l,e){var n=e.component;l(e,5,0,n.type),l(e,11,0,n.getImage())}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-errors-id",[],null,null,null,o.b,o.a)),t["\u0275did"](2,114688,null,0,r.a,[],{error:[0,"error"],subError:[1,"subError"],smallText:[2,"smallText"]},null)],(function(l,e){var n=e.component;l(e,2,0,n.error,n.subError,n.textFinal)}),null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"label",[["class","btn btn-blue"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,[[1,0],["inputFile",1]],null,0,"input",[["accept","image/*"],["capture",""],["type","file"]],null,[[null,"change"]],(function(l,e,n){var t=!0;return"change"===e&&(t=!1!==l.component.onFileChanged(n)&&t),t}),null,null)),(l()(),t["\u0275ted"](3,null,[" "," "]))],null,(function(l,e){l(e,3,0,e.component.error?"Retry":"Open Camera")}))}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-xs-12 col-sm-6 offset-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"tev-uploading-message",[["init","60"]],null,null,null,a.b,a.a)),t["\u0275did"](3,49152,null,0,s.a,[],{init:[0,"init"]},null)],(function(l,e){l(e,3,0,"60")}),null)}function U(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-message-with-icon",[],null,null,null,d.b,d.a)),t["\u0275did"](2,114688,null,0,c.a,[],{img:[0,"img"],altText:[1,"altText"],text:[2,"text"],smallText:[3,"smallText"]},null)],(function(l,e){l(e,2,0,"assets/icon-green-check.svg","green check","You don\u2019t need to upload your document again!","Your document has already been submitted. Now you can close and continue on your computer.")}),null)}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"tev-update-id-applicant",[],null,[[null,"dataSent"]],(function(l,e,n){var t=!0;return"dataSent"===e&&(t=!1!==l.component.verificationSended(n)&&t),t}),h.b,h.a)),t["\u0275prd"](512,null,p.a,p.a,[]),t["\u0275did"](3,114688,null,0,f.a,[m.FormBuilder,v.a,g.a,p.a],{applicantFullName:[0,"applicantFullName"],checkFirstStep:[1,"checkFirstStep"],token:[2,"token"],info:[3,"info"]},{dataSent:"dataSent"})],(function(l,e){var n=e.component;l(e,3,0,"",!1,n.token,n.photoIdVerification)}),null)}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,15,"div",[["class","mobile"]],[[2,"upload-white",null]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"img",[["alt","Tenant Evaluation"],["src","/assets/icon-te.svg"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](5,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](7,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](9,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](11,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,U)),t["\u0275did"](13,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](15,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var n=e.component;l(e,5,0,n.showUploadFile()),l(e,7,0,n.error&&!n.uploading&&!n.showForm),l(e,9,0,n.showButtonUploadOrRetry()),l(e,11,0,n.uploading),l(e,13,0,n.notTask),l(e,15,0,n.showForm)}),(function(l,e){l(e,0,0,e.component.showUploadFile())}))}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-expired-dialog",[],null,[[null,"responseExpired"]],(function(l,e,n){var t=!0;return"responseExpired"===e&&(t=!1!==l.component.forceUploadExpiredId(n)&&t),t}),w.b,w.a)),t["\u0275did"](1,114688,null,0,k.a,[],{errorBackRetries:[0,"errorBackRetries"]},{responseExpired:"responseExpired"})],(function(l,e){l(e,1,0,e.component.errorRetriesBack)}),null)}function _(l){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{inputFile:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](2,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](4,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](6,16384,null,0,b.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var n=e.component;l(e,2,0,n.uploadedFinish),l(e,4,0,!n.uploadedFinish),l(e,6,0,n.requestExpired)}),null)}var B=t["\u0275ccf"]("tev-upload",y.a,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-upload",[],null,null,null,_,R)),t["\u0275did"](1,245760,null,0,y.a,[g.a,v.a,x.a],null,null)],(function(l,e){l(e,1,0)}),null)}),{},{},[])},GkbY:function(l,e,n){"use strict";n.d(e,"a",(function(){return t}));var t=function(){function l(){_classCallCheck(this,l)}return _createClass(l,[{key:"ngOnInit",value:function(){}}]),l}()},Grgp:function(l,e,n){"use strict";n.d(e,"a",(function(){return t}));var t=function l(){_classCallCheck(this,l)}},MMCy:function(l,e,n){"use strict";n.d(e,"a",(function(){return c}));var t=n("mrSG"),i=(n("bUwk"),n("IheW")),u=n("JIr8"),o=n("LRne"),r=(n("5+vj"),n("RuaF")),a=n("wd/R"),s=n("TEVI"),d=n.n(s),c=function(){function l(e,n,t){_classCallCheck(this,l),this.http=e,this.ui=n,this.activeRoute=t,this.type="FRONT",this.endProcess=Boolean(0),this.uploadedFinish=Boolean(0),this.additionalText="",this.showButtonUpload=Boolean(1),this.photoIdVerification={id:null,firstName:null,lastName:null,dob:null,documentId:null,step1Name:null,step1Lastname:null,step1dob:null},this.forceUpload=Boolean(0),this.requestExpired=Boolean(0),this.errorRetriesBack=0,this.blobToFile=function(l,e){var n=l;return n.lastModified=new Date,n.name=e,l},this.listenToUrlParams()}return _createClass(l,[{key:"listenToUrlParams",value:function(){var l=this;this.activeRoute.params.subscribe((function(e){l.token=e.token,l.http.checkTokenUpload(e.token).pipe(Object(u.a)((function(e){return l.uploadError(e,""),Object(o.a)(e)}))).subscribe((function(l){}))}))}},{key:"ngOnInit",value:function(){this.errorRetries=0}},{key:"ngOnDestroy",value:function(){this.errorRetries=0}},{key:"onFileChanged",value:function(l){var e=this;this.error=null,this.subError="",this.uploading=!0;var n=this.selectedFile=l.target.files[0];if(n.type.endsWith("pdf"))this.selectedFile=n,this.onUpload();else{var t=n;d()({blob:t,toType:"image/jpeg",quality:.8}).then((function(l){return e.selectedFile=e.blobToFile(l,n.name),e.onUpload(),Promise.resolve(!0)})).catch((function(l){return e.selectedFile=n,e.onUpload(),Promise.resolve(!0)}))}}},{key:"readFileData",value:function(l){return new Promise((function(e,n){var t=new FileReader;t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)},t.readAsDataURL(l)}))}},{key:"onUpload",value:function(){return t.a(this,void 0,void 0,regeneratorRuntime.mark((function l(){var e,n,t=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return this.textFinal=null,l.next=3,this.readFileData(this.selectedFile);case 3:e=l.sent,n={filename:this.selectedFile.name,fileMimeType:this.selectedFile.type,fileData:e,fileSize:this.selectedFile.size,token:this.token,checkExpired:this.checkExpired,forceUpload:this.forceUpload,backId:"BACK"===this.type,retries:this.errorRetries},this.http.uploadDocumentFromMobile(n).pipe(Object(u.a)((function(l){return t.uploadError(l,n.filename),Object(o.a)(l)}))).subscribe((function(l){!l||l instanceof i.f||("OK"===l.result?(t.uploadSuccess(),t.errorRetries=0):"NR"===l.result?t.uploadNeedReview():"NM"===l.result?(t.error="The information doesn't match with the application. Please make sure to upload the ID for correct applicant \n\n",t.uploading=!1,t.errorRetries++,t.forceUpload=2===t.errorRetries):"NB"===l.result?(t.type="BACK",t.errorRetries=0):"NF"===l.result&&(t.needForm(l.idInfoExtractDTO,l.documentId,l.applicantId),t.errorRetries=0),t.uploading=!1)}),(function(l){t.errorRetries++,t.uploading=!1,t.error="We are not able to read the document. Please try again!",t.forceUpload=2===t.errorRetries}));case 6:case"end":return l.stop()}}),l,this)})))}},{key:"uploadError",value:function(l,e){var n=this;if(this.forceUpload=!1,l.status===r.a.REQUEST_TIMEOUT)this.error="We are not able to read the document. Please try again!",this.forceUpload=this.errorRetries>1;else if(l.status===r.a.UNPROCESSABLE_ENTITY){if(this.error=l.error.detail,this.forceUpload=!0,this.error.includes("The session"))this.textFinal="Please go back to the computer and generate a new QR code by refreshing the page. Scan the code and try again.",this.endProcess=!0,this.forceUpload=!1;else if(this.error.includes("expiration date")||this.error.includes("has expired")||this.error.includes("Non-US Driver\u2019s License detected")){if("FRONT"!==this.type)return this.showButtonUpload=!1,0==2-this.errorRetriesBack?(this.forceUpload=!0,this.http.confirmExpiredMobile(this.token).subscribe((function(){n.uploadNeedReview()}))):(this.requestExpired=!0,this.errorRetriesBack++,this.forceUpload=!1),this.errorRetries++,void(this.uploading=!1);var t=2-this.errorRetries;1===t&&(this.checkExpired=!1,this.textFinal="We will upload and review this ID manually, if ID is expired the document may be rejected and a new non-expired ID will be requested."),this.subError=t+" tries left (then will upload document)",this.forceUpload=!1}else if("invalid.task.id"===this.error)return this.notTask=!0,this.error="",void(this.forceUpload=!1)}else l.status===r.a.NOT_ACCEPTABLE?(this.error=l.error.detail,this.forceUpload=this.errorRetries>1):this.ui.showError({message:"There was a problem uploading the file "+e});this.errorRetries++,this.forceUpload=this.errorRetries>1,this.uploading=!1}},{key:"uploadSuccess",value:function(){this.ui.showSuccess({message:"Documents Uploaded"}),this.selectedFile.progress=100,this.textFinal="",this.additionalText="You can now close and continue on to the computer.",this.uploading=!1,this.uploadedFinish=!0}},{key:"uploadNeedReview",value:function(){this.selectedFile.progress=100,this.textFinal="Thank you for your cooperation! There is some information that needs to be manually verified.  Please review your dashboard for any additional documentation/ information that may be needed. ",this.additionalText="You can now close and continue on to the computer.",this.uploading=!1,this.uploadedFinish=!0}},{key:"uploadNew",value:function(){this.inputFile.nativeElement.click()}},{key:"needForm",value:function(l,e,n){this.errorRetries=0;var t=l.firstNameExt&&l.matchFirstName?l.firstNameExt:"",i=l.lastNameExt&&l.matchLastName?l.lastNameExt:"",u=l.dobExt&&l.dobExt&&l.matchDob?a(l.dobExt).toDate():null;this.showForm=!0,this.photoIdVerification={id:n,firstName:t,lastName:i,dob:u,documentId:e,step1Name:null,step1Lastname:null,step1dob:null}}},{key:"closeUploadFinish",value:function(){}},{key:"verificationSended",value:function(l){if("retry"===l)return this.type="FRONT",this.showForm=!1,this.uploadedFinish=!1,this.errorRetries++,void(this.uploading=!1);this.uploadSuccess()}},{key:"showUploadFile",value:function(){return!(this.uploading||this.error||this.uploadedFinish||this.showForm||this.notTask)}},{key:"getImage",value:function(){return"FRONT"===this.type?"assets/upload_from_mobile.svg":"assets/upload_back_mobile.svg"}},{key:"showButtonUploadOrRetry",value:function(){return!!this.showButtonUpload&&!(this.uploading||this.endProcess||this.uploadedFinish||this.showForm||this.notTask)}},{key:"forceUploadExpiredId",value:function(l){var e=this;"retry"===l?(this.type="FRONT",this.errorRetries=0,this.error="",this.showButtonUpload=!0,this.requestExpired=!1):this.http.confirmExpiredMobile(this.token).subscribe((function(){e.uploadNeedReview()}))}}]),l}()},kBy6:function(l,e,n){"use strict";var t=n("8Y7J"),i=n("iInd"),u=n("3KOM"),o=n("5+vj");n.d(e,"a",(function(){return s}));var r=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function a(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","upload-id-mobile"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t["\u0275did"](2,212992,null,0,i.q,[i.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null)],(function(l,e){l(e,2,0)}),null)}var s=t["\u0275ccf"]("tev-mobile",u.a,(function(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-mobile",[],null,null,null,a,r)),t["\u0275did"](1,114688,null,0,u.a,[o.a],null,null)],(function(l,e){l(e,1,0)}),null)}),{},{},[])}}]);