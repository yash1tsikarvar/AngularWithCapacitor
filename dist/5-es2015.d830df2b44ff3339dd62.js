(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1GiJ":function(l,e,n){"use strict";var t=n("8Y7J");n("GkbY"),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=t["\u0275crt"]({encapsulation:0,styles:[[".message-whit-icon[_ngcontent-%COMP%]   .gifimg[_ngcontent-%COMP%]{display:block;border-radius:50%;margin:10% auto;width:25%}.message-whit-icon[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:24px;text-align:center;font-weight:700;padding:5% 20%}.message-whit-icon[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{font-size:14px;text-align:center;padding:5% 15%}"]],data:{}});function o(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","message-whit-icon"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[["class","gif-with-icon"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["class","img-responsive img-circle gifimg"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),(l()(),t["\u0275eld"](5,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](6,null,["",""])),(l()(),t["\u0275eld"](7,0,null,null,1,"div",[["class","small-text"]],null,null,null,null,null)),(l()(),t["\u0275ted"](8,null,[""," "]))],null,(function(l,e){var n=e.component;l(e,2,0,n.img,n.altText),l(e,4,0,n.text),l(e,6,0,n.subError),l(e,8,0,n.smallText)}))}},"3KOM":function(l,e,n){"use strict";n.d(e,"a",(function(){return o}));var t=n("1G5W"),i=(n("5+vj"),n("XNiG"));class o{constructor(l){this.uiService=l,this.destroyed$=new i.a,this.website=location.origin}ngOnInit(){}listenToThemeValues(){this.uiService.smallLogo$.pipe(Object(t.a)(this.destroyed$)).subscribe(l=>{this.smallLogo=l||"/assets/tenant-ev-logo-service.svg"})}}},"5ezu":function(l,e,n){"use strict";n.d(e,"a",(function(){return t})),n("MMCy"),n("3KOM");class t{}},"6Y63":function(l,e,n){"use strict";var t=n("8Y7J"),i=n("FiUn"),o=n("xYRW"),u=n("zIYY"),r=n("qmNA"),s=n("Dc3C"),a=n("XkoZ"),d=n("1GiJ"),c=n("GkbY"),h=n("0Wmm"),p=n("f2f4"),f=n("WBWa"),m=n("s7LF"),g=n("5+vj"),b=n("bUwk"),v=n("SVse"),w=n("VsP1"),x=n("QvIX"),R=n("MMCy"),F=n("iInd");n.d(e,"a",(function(){return S}));var T=t["\u0275crt"]({encapsulation:2,styles:[[".awesome-item{width:100%;top:5%!important;left:0}.small-text{font-size:14px}.mat-form-field{width:100%}.upload-white{background-color:#fff;color:#000!important}tev-uploading-message .uploading{padding:0!important}.mobile{height:100vh;padding:10%;color:#fff}.mobile h1{margin-bottom:10px}.mobile h1 img{width:25%;padding-bottom:20px;float:left}.mobile h2{float:left;text-align:left;padding-bottom:10%}.mobile .img-icon{display:block;margin-left:auto;margin-right:auto;width:60%;padding-top:5%;padding-bottom:10%}.mobile .highlighted-blue{color:#2196f3;font-weight:700}.mobile .btn-blue{width:100%;margin-left:auto;margin-right:auto}.mobile input[type=file]{display:none}.mobile mat-form-field{width:100%}"]],data:{}});function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","finish-upload"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-awesome-message",[],null,[[null,"closePopup"]],(function(l,e,n){var t=!0;return"closePopup"===e&&(t=!1!==l.component.closeUploadFinish()&&t),t}),i.b,i.a)),t["\u0275did"](2,49152,null,0,o.a,[],{auto_closeable:[0,"auto_closeable"],message:[1,"message"],additionalText:[2,"additionalText"],buttonText:[3,"buttonText"],autoCloseTime:[4,"autoCloseTime"]},{closePopup:"closePopup"})],(function(l,e){var n=e.component;l(e,2,0,!1,n.textFinal,n.additionalText,"",105)}),null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,4,"h2",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Take a picture of the "])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","highlighted-blue"]],null,null,null,null,null)),(l()(),t["\u0275ted"](5,null,["",""])),(l()(),t["\u0275ted"](-1,null,[" of your ID"])),(l()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,[" Make sure your document is readable and well lit. No photocopies."])),(l()(),t["\u0275eld"](10,0,null,null,1,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,0,"img",[["alt","upload image from mobile"],["class","img-icon"]],[[8,"src",4]],null,null,null,null))],null,(function(l,e){var n=e.component;l(e,5,0,n.type),l(e,11,0,n.getImage())}))}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-errors-id",[],null,null,null,u.b,u.a)),t["\u0275did"](2,114688,null,0,r.a,[],{error:[0,"error"],subError:[1,"subError"],smallText:[2,"smallText"]},null)],(function(l,e){var n=e.component;l(e,2,0,n.error,n.subError,n.textFinal)}),null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"label",[["class","btn btn-blue"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,[[1,0],["inputFile",1]],null,0,"input",[["accept","image/*"],["capture",""],["type","file"]],null,[[null,"change"]],(function(l,e,n){var t=!0;return"change"===e&&(t=!1!==l.component.onFileChanged(n)&&t),t}),null,null)),(l()(),t["\u0275ted"](3,null,[" "," "]))],null,(function(l,e){l(e,3,0,e.component.error?"Retry":"Open Camera")}))}function U(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-xs-12 col-sm-6 offset-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"tev-uploading-message",[["init","60"]],null,null,null,s.b,s.a)),t["\u0275did"](3,49152,null,0,a.a,[],{init:[0,"init"]},null)],(function(l,e){l(e,3,0,"60")}),null)}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"tev-message-with-icon",[],null,null,null,d.b,d.a)),t["\u0275did"](2,114688,null,0,c.a,[],{img:[0,"img"],altText:[1,"altText"],text:[2,"text"],smallText:[3,"smallText"]},null)],(function(l,e){l(e,2,0,"assets/icon-green-check.svg","green check","You don\u2019t need to upload your document again!","Your document has already been submitted. Now you can close and continue on your computer.")}),null)}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","col-xs-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"tev-update-id-applicant",[],null,[[null,"dataSent"]],(function(l,e,n){var t=!0;return"dataSent"===e&&(t=!1!==l.component.verificationSended(n)&&t),t}),h.b,h.a)),t["\u0275prd"](512,null,p.a,p.a,[]),t["\u0275did"](3,114688,null,0,f.a,[m.FormBuilder,g.a,b.a,p.a],{applicantFullName:[0,"applicantFullName"],checkFirstStep:[1,"checkFirstStep"],token:[2,"token"],info:[3,"info"]},{dataSent:"dataSent"})],(function(l,e){var n=e.component;l(e,3,0,"",!1,n.token,n.photoIdVerification)}),null)}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,15,"div",[["class","mobile"]],[[2,"upload-white",null]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,0,"img",[["alt","Tenant Evaluation"],["src","/assets/icon-te.svg"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](5,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](7,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](9,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,U)),t["\u0275did"](11,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](13,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](15,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var n=e.component;l(e,5,0,n.showUploadFile()),l(e,7,0,n.error&&!n.uploading&&!n.showForm),l(e,9,0,n.showButtonUploadOrRetry()),l(e,11,0,n.uploading),l(e,13,0,n.notTask),l(e,15,0,n.showForm)}),(function(l,e){l(e,0,0,e.component.showUploadFile())}))}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-expired-dialog",[],null,[[null,"responseExpired"]],(function(l,e,n){var t=!0;return"responseExpired"===e&&(t=!1!==l.component.forceUploadExpiredId(n)&&t),t}),w.b,w.a)),t["\u0275did"](1,114688,null,0,x.a,[],{errorBackRetries:[0,"errorBackRetries"]},{responseExpired:"responseExpired"})],(function(l,e){l(e,1,0,e.component.errorRetriesBack)}),null)}function B(l){return t["\u0275vid"](0,[t["\u0275qud"](671088640,1,{inputFile:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](2,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](4,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](6,16384,null,0,v.n,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,e){var n=e.component;l(e,2,0,n.uploadedFinish),l(e,4,0,!n.uploadedFinish),l(e,6,0,n.requestExpired)}),null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-upload",[],null,null,null,B,T)),t["\u0275did"](1,245760,null,0,R.a,[b.a,g.a,F.a],null,null)],(function(l,e){l(e,1,0)}),null)}var S=t["\u0275ccf"]("tev-upload",R.a,M,{},{},[])},GkbY:function(l,e,n){"use strict";n.d(e,"a",(function(){return t}));class t{constructor(){}ngOnInit(){}}},Grgp:function(l,e,n){"use strict";n.d(e,"a",(function(){return t}));class t{}},MMCy:function(l,e,n){"use strict";n.d(e,"a",(function(){return c}));var t=n("mrSG"),i=(n("bUwk"),n("IheW")),o=n("JIr8"),u=n("LRne"),r=(n("5+vj"),n("RuaF")),s=n("wd/R"),a=n("TEVI"),d=n.n(a);class c{constructor(l,e,n){this.http=l,this.ui=e,this.activeRoute=n,this.type="FRONT",this.endProcess=Boolean(0),this.uploadedFinish=Boolean(0),this.additionalText="",this.showButtonUpload=Boolean(1),this.photoIdVerification={id:null,firstName:null,lastName:null,dob:null,documentId:null,step1Name:null,step1Lastname:null,step1dob:null},this.forceUpload=Boolean(0),this.requestExpired=Boolean(0),this.errorRetriesBack=0,this.blobToFile=(l,e)=>{const n=l;return n.lastModified=new Date,n.name=e,l},this.listenToUrlParams()}listenToUrlParams(){this.activeRoute.params.subscribe(l=>{this.token=l.token,this.http.checkTokenUpload(l.token).pipe(Object(o.a)(l=>(this.uploadError(l,""),Object(u.a)(l)))).subscribe(l=>{})})}ngOnInit(){this.errorRetries=0}ngOnDestroy(){this.errorRetries=0}onFileChanged(l){this.error=null,this.subError="",this.uploading=!0;const e=this.selectedFile=l.target.files[0];if(e.type.endsWith("pdf"))this.selectedFile=e,this.onUpload();else{const l=e;d()({blob:l,toType:"image/jpeg",quality:.8}).then(l=>(this.selectedFile=this.blobToFile(l,e.name),this.onUpload(),Promise.resolve(!0))).catch(l=>(this.selectedFile=e,this.onUpload(),Promise.resolve(!0)))}}readFileData(l){return new Promise((e,n)=>{const t=new FileReader;t.onload=()=>{e(t.result)},t.onerror=()=>{n(t.error)},t.readAsDataURL(l)})}onUpload(){return t.a(this,void 0,void 0,(function*(){this.textFinal=null;const l=yield this.readFileData(this.selectedFile),e={filename:this.selectedFile.name,fileMimeType:this.selectedFile.type,fileData:l,fileSize:this.selectedFile.size,token:this.token,checkExpired:this.checkExpired,forceUpload:this.forceUpload,backId:"BACK"===this.type,retries:this.errorRetries};this.http.uploadDocumentFromMobile(e).pipe(Object(o.a)(l=>(this.uploadError(l,e.filename),Object(u.a)(l)))).subscribe(l=>{!l||l instanceof i.f||("OK"===l.result?(this.uploadSuccess(),this.errorRetries=0):"NR"===l.result?this.uploadNeedReview():"NM"===l.result?(this.error="The information doesn't match with the application. Please make sure to upload the ID for correct applicant \n\n",this.uploading=!1,this.errorRetries++,this.forceUpload=2===this.errorRetries):"NB"===l.result?(this.type="BACK",this.errorRetries=0):"NF"===l.result&&(this.needForm(l.idInfoExtractDTO,l.documentId,l.applicantId),this.errorRetries=0),this.uploading=!1)},l=>{this.errorRetries++,this.uploading=!1,this.error="We are not able to read the document. Please try again!",this.forceUpload=2===this.errorRetries})}))}uploadError(l,e){if(this.forceUpload=!1,l.status===r.a.REQUEST_TIMEOUT)this.error="We are not able to read the document. Please try again!",this.forceUpload=this.errorRetries>1;else if(l.status===r.a.UNPROCESSABLE_ENTITY){if(this.error=l.error.detail,this.forceUpload=!0,this.error.includes("The session"))this.textFinal="Please go back to the computer and generate a new QR code by refreshing the page. Scan the code and try again.",this.endProcess=!0,this.forceUpload=!1;else if(this.error.includes("expiration date")||this.error.includes("has expired")||this.error.includes("Non-US Driver\u2019s License detected")){if("FRONT"!==this.type)return this.showButtonUpload=!1,0==2-this.errorRetriesBack?(this.forceUpload=!0,this.http.confirmExpiredMobile(this.token).subscribe(()=>{this.uploadNeedReview()})):(this.requestExpired=!0,this.errorRetriesBack++,this.forceUpload=!1),this.errorRetries++,void(this.uploading=!1);{const l=2-this.errorRetries;1===l&&(this.checkExpired=!1,this.textFinal="We will upload and review this ID manually, if ID is expired the document may be rejected and a new non-expired ID will be requested."),this.subError=l+" tries left (then will upload document)",this.forceUpload=!1}}else if("invalid.task.id"===this.error)return this.notTask=!0,this.error="",void(this.forceUpload=!1)}else l.status===r.a.NOT_ACCEPTABLE?(this.error=l.error.detail,this.forceUpload=this.errorRetries>1):this.ui.showError({message:"There was a problem uploading the file "+e});this.errorRetries++,this.forceUpload=this.errorRetries>1,this.uploading=!1}uploadSuccess(){this.ui.showSuccess({message:"Documents Uploaded"}),this.selectedFile.progress=100,this.textFinal="",this.additionalText="You can now close and continue on to the computer.",this.uploading=!1,this.uploadedFinish=!0}uploadNeedReview(){this.selectedFile.progress=100,this.textFinal="Thank you for your cooperation! There is some information that needs to be manually verified.  Please review your dashboard for any additional documentation/ information that may be needed. ",this.additionalText="You can now close and continue on to the computer.",this.uploading=!1,this.uploadedFinish=!0}uploadNew(){this.inputFile.nativeElement.click()}needForm(l,e,n){this.errorRetries=0;const t=l.firstNameExt&&l.matchFirstName?l.firstNameExt:"",i=l.lastNameExt&&l.matchLastName?l.lastNameExt:"",o=l.dobExt&&l.dobExt&&l.matchDob?s(l.dobExt).toDate():null;this.showForm=!0,this.photoIdVerification={id:n,firstName:t,lastName:i,dob:o,documentId:e,step1Name:null,step1Lastname:null,step1dob:null}}closeUploadFinish(){}verificationSended(l){if("retry"===l)return this.type="FRONT",this.showForm=!1,this.uploadedFinish=!1,this.errorRetries++,void(this.uploading=!1);this.uploadSuccess()}showUploadFile(){return!(this.uploading||this.error||this.uploadedFinish||this.showForm||this.notTask)}getImage(){return"FRONT"===this.type?"assets/upload_from_mobile.svg":"assets/upload_back_mobile.svg"}showButtonUploadOrRetry(){return!!this.showButtonUpload&&!(this.uploading||this.endProcess||this.uploadedFinish||this.showForm||this.notTask)}forceUploadExpiredId(l){"retry"===l?(this.type="FRONT",this.errorRetries=0,this.error="",this.showButtonUpload=!0,this.requestExpired=!1):this.http.confirmExpiredMobile(this.token).subscribe(()=>{this.uploadNeedReview()})}}},kBy6:function(l,e,n){"use strict";var t=n("8Y7J"),i=n("iInd"),o=n("3KOM"),u=n("5+vj");n.d(e,"a",(function(){return d}));var r=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function s(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","upload-id-mobile"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t["\u0275did"](2,212992,null,0,i.q,[i.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null)],(function(l,e){l(e,2,0)}),null)}function a(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"tev-mobile",[],null,null,null,s,r)),t["\u0275did"](1,114688,null,0,o.a,[u.a],null,null)],(function(l,e){l(e,1,0)}),null)}var d=t["\u0275ccf"]("tev-mobile",o.a,a,{},{},[])}}]);