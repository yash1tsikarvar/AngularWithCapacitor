{"version":3,"sources":["./src/app/agreement/agreement/agreement.component.html","./src/app/agreement/agreement-routing.module.ts","./src/app/agreement/agreement.guard.ts","./src/app/agreement/agreement.module.ts","./src/app/agreement/agreement/agreement.component.scss","./src/app/agreement/agreement/agreement.component.ts"],"names":[],"mappings":"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","file":"agreement-agreement-module-es2015.js","sourcesContent":["export default \"<div class=\\\"container-fluid main-content\\\">\\n  <div class=\\\"row justify-content-sm-center\\\">\\n    <div class=\\\"col-12 col-sm-10 col-md-8 col-lg-8 col-xl-6\\\">\\n      <section class=\\\"agreement-content-box\\\">\\n        <article>\\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-6\\\">\\n              <h1 class=\\\"minimum-line-height\\\">\\n                <div class=\\\"icon-holder\\\"></div>\\n              </h1>\\n            </div>\\n            <div class=\\\"col-6 text-right\\\">\\n              <div class=\\\"main-icon-holder\\\">\\n                <a href=\\\"#\\\" (click)=\\\"logOut($event)\\\">Log Out</a>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <ul class=\\\"txt-sm pt-3\\\">\\n            <li>Date: {{mainApplication.paymentDate | date:'short'}}</li>\\n            <li>Transaction ID: {{mainApplication.transactionId}}</li>\\n            <li>Account #: {{mainApplication.account}}</li>\\n            <li>Amount: {{mainApplication.amountPaid | currency:'USD':true}}</li>\\n          </ul>\\n\\n            <p class=\\\"txt-xs pt-3\\\">I, <strong class=\\\"txt-applicant-name\\\">{{mainApplication.payerName}}</strong> Confirm that I have paid the above amount according to the card issuer agreement. I also understand that the application fee is required and nonrefundable regardless of the outcome of the application.</p>\\n\\n          <div class=\\\"agreement-text\\\">\\n            <p>PLEASE READ ALL THE PROPERTY SPECIAL NOTES LISTED BELOW CAREFULLY:</p>\\n                <p><b>* Any additional occupants 18 years old or older will have to make a separate application*</b></p>\\n                <p>Tenant Evaluation understands the importance of keeping your information secure from\\n                    unauthorized access. All of your sensitive data is encrypted before being transmitted to/from our\\n                    servers. Tenant Evaluation is a Level 1 Compliant Organization. For details on Level 1 security\\n                    standards please click here.</p>\\n            <p>You are hereby authorized to release any and all information requested with regards to verification of my bank account(s), \\n              credit history, residential history, criminal record history, employment verification and character references to \\n              Tenant Evaluation LLC. This information is to be used for my/our credit report for my/our Application for Occupancy.</p>\\n\\n            <p>I/We hereby waive any privileges I/We may have with respect to the said information in reference to its release to the aforesaid party. Information obtained for this report is to be released to Tenant Evaluation LLC, Property Manager, Board of Directors and The Landlord for their exclusive use only.</p>\\n\\n            <p>PLEASE INCLUDE COPY OF DRIVERâ€™S LICENSE OR PASSPORT TO CONFIRM IDENTITY.</p>\\n\\n            <p>Please notify your Landlord(s), Employer(s), and Character References that we will be contacting them to obtain a reference pursuant to your application.</p>\\n\\n            <p>I/We further state the Authorization Form were signed by me/us and was not originated with fraudulent intent by me/ us or any other person, and that the signature(s) below are my/our own proper signature.</p>\\n\\n            <p>I/We certify under penalty of perjury that the foregoing is true and correct.</p>\\n\\n            <p>I/WE UNDERSTAND THAT THE APPLICATION FEE IS REQUIRED AND NONREFUNDABLE REGARDLESS OF THE OUTCOME OF THE APPLICATION.</p>\\n\\n            <p>I/We further understand that any refundable monies paid through Tenant Evaluation in the form of deposits, extra fees, etc. will be refunded by the Association directly.</p>\\n\\n            <p>Please allow 14 days from the date below to complete the application. Please be aware that the associations have their own approval process which will start once the report has been released and the time frame may vary per association.</p>\\n\\n            <p>If after 30 days from the date you created the application Tenant Evaluation has not received all the required documentation, your application will be considered abandoned and the incomplete application will be closed and sent to the community. The application can only be re-opened within 30 days of being abandoned with written request from the the applicant.</p>\\n\\n            <p>If you or the co-applicant have falsified, deliberately mislead or omitted to mention any information on your application, you may not be approved for a purchase, lease and/or occupancy.</p>\\n          </div>\\n\\n          <h1 class=\\\"txt-lg pt-3\\\">Review Your signature</h1>\\n          <form class=\\\"signature\\\" [formGroup]=\\\"signatureForm\\\" (submit)=\\\"submit()\\\">\\n\\n            <div class=\\\"signature-input\\\">\\n              <input type=\\\"text\\\"\\n                     class=\\\"form-control\\\"\\n                     placeholder=\\\"Type your name here or draw below\\\"\\n                     formControlName=\\\"signatureText\\\">\\n            </div>\\n\\n            <div class=\\\"signature-canvas\\\">\\n\\n              <div class=\\\"signature-wrapper\\\">\\n                <canvas id=\\\"signature-pad\\\" #signaturePad></canvas>\\n              </div>\\n\\n              <div class=\\\"signature-text\\\">\\n                <canvas id=\\\"signature-text\\\" #signatureText></canvas>\\n              </div>\\n\\n            </div>\\n\\n\\n            <button class=\\\"btn btn-lg btn-primary px-5 mb-4\\\"\\n                    [disabled]=\\\"processing\\\"\\n                    type=\\\"submit\\\">Submit</button>\\n\\n            <button class=\\\"btn btn-lg btn-primary px-5 mb-4\\\"\\n                    [disabled]=\\\"processing\\\"\\n                    type=\\\"button\\\" (click)=\\\"clearSignature()\\\">Clear</button>\\n          </form>\\n        </article>\\n      </section><!-- ./agreement-content-box -->\\n    </div><!-- ./col -->\\n  </div><!-- ./row -->\\n</div><!-- ./container-fluid -->\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {AgreementComponent} from './agreement/agreement.component';\nimport {AgreementGuard} from './agreement.guard';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AgreementComponent,\n    canActivate: [AgreementGuard]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: [\n    AgreementGuard,\n  ]\n})\nexport class AgreementRoutingModule { }\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot} from '@angular/router';\nimport {Observable, of} from 'rxjs';\nimport {HttpService} from '../core/services/http.service';\nimport {catchError, switchMap, tap} from 'rxjs/operators';\nimport {HttpErrorResponse} from '@angular/common/http';\n\n@Injectable()\nexport class AgreementGuard implements CanActivate {\n\n  constructor(\n    private httpService: HttpService,\n    private router: Router,\n  ) {}\n\n  /**\n   *\n   * @param {ActivatedRouteSnapshot} next\n   * @param {RouterStateSnapshot} state\n   * @return {Observable<boolean>}\n   */\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> {\n    const {applicationId} = next.params;\n\n\n\n    return this.httpService\n      .getApplicationById(applicationId)\n      .pipe(\n        switchMap(response => {\n\n          if (!!response && response.signatureMissing) {\n            return of(true);\n          } else {\n            return of(false);\n          }\n        }),\n        catchError((httpError: HttpErrorResponse) => {\n          console.log(httpError);\n          return of(false);\n        }),\n        tap(canNavigate => {\n          if (!canNavigate) {\n            this.router\n              .navigate(['/application-list'])\n              .catch(console.log);\n          } else {\n\n          }\n        })\n      );\n  }\n}\n","import {NgModule} from '@angular/core';\n\nimport {AgreementRoutingModule} from './agreement-routing.module';\nimport {AgreementComponent} from './agreement/agreement.component';\nimport {SharedModule} from '../shared/shared.module';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    AgreementRoutingModule\n  ],\n  declarations: [\n    AgreementComponent\n  ]\n})\nexport class AgreementModule { }\n","export default \".agreement-text {\\n  max-height: 10em;\\n  overflow-y: auto;\\n  padding: 1em;\\n  margin: 1em 0;\\n  background-color: #E0E0E0;\\n}\\n\\n.signature-canvas {\\n  width: 100%;\\n  height: 200px;\\n  position: relative;\\n}\\n\\n#signature-pad, #signature-text {\\n  width: 100%;\\n  height: 200px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zYW5qZWV2c2FpbmkvRGVza3RvcC9Ob2RlSlMvQW5ndWxhcldpdGhDYXBhY2l0b3Ivc3JjL2FwcC9hZ3JlZW1lbnQvYWdyZWVtZW50L2FncmVlbWVudC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvYWdyZWVtZW50L2FncmVlbWVudC9hZ3JlZW1lbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx5QkFBQTtBQ0NGOztBRENBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtBQ0VGOztBREFBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7QUNHRiIsImZpbGUiOiJzcmMvYXBwL2FncmVlbWVudC9hZ3JlZW1lbnQvYWdyZWVtZW50LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFncmVlbWVudC10ZXh0IHtcbiAgbWF4LWhlaWdodDogMTBlbTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgcGFkZGluZzogMWVtO1xuICBtYXJnaW46IDFlbSAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTBFMEUwO1xufVxuLnNpZ25hdHVyZS1jYW52YXMge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAyMDBweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuI3NpZ25hdHVyZS1wYWQsICNzaWduYXR1cmUtdGV4dCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDIwMHB4O1xufVxuIiwiLmFncmVlbWVudC10ZXh0IHtcbiAgbWF4LWhlaWdodDogMTBlbTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgcGFkZGluZzogMWVtO1xuICBtYXJnaW46IDFlbSAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTBFMEUwO1xufVxuXG4uc2lnbmF0dXJlLWNhbnZhcyB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDIwMHB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbiNzaWduYXR1cmUtcGFkLCAjc2lnbmF0dXJlLXRleHQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAyMDBweDtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, HostListener, OnInit, ViewChild} from '@angular/core';\nimport {AuthService} from '../../core/services/auth.service';\nimport {Router} from '@angular/router';\nimport {HttpService} from '../../core/services/http.service';\nimport {ApplicationResponse} from '../../shared/definitions/responses/application.response';\nimport SignaturePad from 'signature_pad';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {Subject, combineLatest} from 'rxjs';\nimport {SignApplicationRequest} from '../../shared/definitions/requests/sign-application.request';\nimport {UiService} from '../../ui/ui.service';\nimport {HttpErrorResponse} from '@angular/common/http';\nimport {ErrorResponse} from '../../shared/definitions/responses/error.response';\nimport {CustomValidators} from '../../shared/custom-validators';\nimport {takeUntil} from 'rxjs/operators';\n\n@Component({\n  selector: 'tev-agreement',\n  templateUrl: './agreement.component.html',\n  styleUrls: ['./agreement.component.scss']\n})\nexport class AgreementComponent implements OnInit, AfterViewInit {\n\n  formReady$: Subject<boolean> = new Subject<boolean>();\n  dataReady$: Subject<boolean> = new Subject<boolean>();\n\n  mainApplication: ApplicationResponse;\n\n  @ViewChild('signaturePad', {static: false}) signaturePadRef: ElementRef;\n  @ViewChild('signatureText', {static: false}) signatureTextRef: ElementRef;\n\n  signatureCanvas: HTMLCanvasElement;\n  signatureTextCanvas: HTMLCanvasElement;\n  signaturePad: SignaturePad;\n\n  signatureForm: FormGroup;\n  processing = false;\n\n  smallLogo: string;\n  private destroyed$: Subject<any> = new Subject<any>();\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    this.setCanvasSize();\n  }\n\n  constructor(\n    private authService: AuthService,\n    private httpService: HttpService,\n    private uiService: UiService,\n    private formBuilder: FormBuilder,\n    private router: Router,\n  ) {\n    this.defaultValues();\n    this.listenToApplicationInformation();\n    this.listenToThemeValues();\n  }\n\n  ngOnInit() {\n    this.initForm();\n  }\n\n  listenToThemeValues() {\n    this.uiService\n      .smallLogo$\n      .pipe(\n        takeUntil(this.destroyed$)\n      )\n      .subscribe(value => this.smallLogo = `url(${value})`);\n  }\n\n  initForm() {\n    this.signatureForm = this.formBuilder\n      .group({\n        applicationId: [null, [Validators.required, CustomValidators.asciiValidator()]],\n        acknowledgerName: [null, [Validators.required, CustomValidators.asciiValidator()]],\n        noticeSignature: [null, [Validators.required, CustomValidators.asciiValidator()]],\n        signatureText: [''],\n      });\n\n    this.listenToSignatureText();\n    this.formReady$.next(true);\n  }\n\n  listenToSignatureText() {\n    this.signatureForm\n      .controls['signatureText']\n      .valueChanges\n      .subscribe(value => {\n        const canvasContext: CanvasRenderingContext2D = this.signatureTextCanvas.getContext('2d');\n        canvasContext.clearRect(0, 0, this.signatureTextCanvas.width, this.signatureTextCanvas.height);\n        canvasContext.font = \"italic 60px 'Herr Von Muellerhoff\";\n        canvasContext.fillText(value, 10, 110);\n\n        const dataUrl = this.signatureTextCanvas.toDataURL();\n\n        this.signaturePad.clear();\n        this.signaturePad.fromDataURL(dataUrl);\n\n      });\n  }\n\n  listenToApplicationInformation() {\n    this.httpService\n      .mainApplication$\n      .subscribe(application => {\n        if (this.mainApplication = application) {\n          this.dataReady$.next(true);\n        }\n      });\n  }\n\n  defaultValues() {\n\n    combineLatest([this.formReady$, this.dataReady$])\n      .subscribe(() => {\n\n        const {applicationId, payerName} = this.mainApplication;\n        this.signatureForm.controls['applicationId'].setValue(applicationId);\n        this.signatureForm.controls['acknowledgerName'].setValue(payerName);\n      });\n  }\n\n  submit() {\n\n    if (!this.signaturePad.isEmpty()) {\n\n      this.processing = true;\n      this.uiService\n        .showInfo({\n          message: 'Processing your request',\n          keepOpen: true\n        });\n\n      this.signatureForm.controls['noticeSignature'].setValue(this.signaturePad.toDataURL('image/png'));\n      const request: SignApplicationRequest = this.signatureForm.value;\n\n      this.httpService\n        .signApplication(request)\n        .subscribe(\n          (response: ApplicationResponse) => {\n\n            this.uiService\n              .showSuccess({\n                message: 'Authorization Signed',\n                removeCurrent: true\n              });\n\n\n            this.router\n              .navigate(['/dashboard', response.applicationId])\n              .catch(console.log);\n          },\n          (httpError: HttpErrorResponse) => {\n            this.processing = false;\n            const error: ErrorResponse = httpError.error;\n            this.uiService.showError({\n              message: error.title,\n              removeCurrent: true\n            });\n          }\n        );\n\n    } else {\n      this.processing = false;\n      this.uiService\n        .showError({\n          message: 'Please Sign the Application'\n        });\n    }\n  }\n\n  logOut(mouseEvent: MouseEvent) {\n    mouseEvent.preventDefault();\n\n    this.authService\n      .logOut()\n      .subscribe(() => {\n        this.router\n          .navigate(['/'])\n          .catch(console.log);\n      });\n  }\n\n  ngAfterViewInit() {\n    this.initSignature();\n  }\n\n  clearSignature() {\n    this.signaturePad.clear();\n  }\n\n  private initSignature() {\n    this.signatureCanvas = this.signaturePadRef.nativeElement;\n    this.signatureTextCanvas = this.signatureTextRef.nativeElement;\n    this.setCanvasSize();\n    this.signaturePad = new SignaturePad(this.signatureCanvas);\n  }\n\n  private setCanvasSize() {\n    const ratio =  Math.max(window.devicePixelRatio || 1, 1);\n\n    if (this.signatureCanvas) {\n      this.signatureCanvas.width = this.signatureCanvas.offsetWidth * ratio;\n      this.signatureCanvas.height = this.signatureCanvas.offsetHeight * ratio;\n      this.signatureCanvas.getContext('2d').scale(ratio, ratio);\n\n      if (this.signaturePad) {\n        this.signaturePad.clear();\n      }\n\n    }\n\n    if (this.signatureTextCanvas) {\n      this.signatureTextCanvas.width = this.signatureTextCanvas.offsetWidth * ratio;\n      this.signatureTextCanvas.height = this.signatureTextCanvas.offsetHeight * ratio;\n      this.signatureTextCanvas.getContext('2d').scale(ratio, ratio);\n    }\n\n    if (this.signatureForm && this.signaturePad) {\n      this.signatureForm\n        .controls['signatureText']\n        .updateValueAndValidity();\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}